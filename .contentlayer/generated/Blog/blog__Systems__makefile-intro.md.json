{
  "title": "Makefile 入门指南",
  "date": "2022-12-06T00:00:00.000Z",
  "tags": [
    "C++"
  ],
  "draft": false,
  "summary": "Makefile 基础教程：理解 targets、prerequisites 和 commands，掌握增量编译核心原理。",
  "authors": [
    "default"
  ],
  "body": {
    "raw": "\n本文是对 [Makefile Cookbook](https://makefiletutorial.com/#makefile-cookbook) 的简要翻译。\n\n## 为什么需要 Makefile\n\nMakefile 用于决定一个大型程序的哪一部分需要被重新编译。在大部分情况下，其被用来编译 C 或 C++ 文件。其他语言通常有自己的工具，其用途与 make 类似。\n\n## 运行样例\n\n让我们运行一个最简单的样例：新建文件夹，在其中创建 `Makefile` 文件：\n\n> **需要注意：makefile 中必须使用 tab 进行缩进**\n\n```makefile\nhello:\n\techo \"Hello, World\"\n```\n\n运行结果：\n\n```bash\n$ make\necho \"Hello, World\"\nHello, World\n```\n\n## Makefile 的语法\n\nMakefile 由一系列的 rule 构成，一个 rule 的范式如下：\n\n```makefile\ntargets: prerequisites\n\tcommand\n\tcommand\n\tcommand\n```\n\n- **targets**: 文件名，通过空格分隔。通常，一个 rule 只有一个 target\n- **commands**: 用于编译 targets 的指令，需要使用 tab 缩进\n- **prerequisites**: 也是文件名，代表\"运行命令时的依赖项\"\n\n## Make 的本质\n\n来看一个简单的例子：\n\n```makefile\nhello:\n\techo \"Hello, World\"\n\techo \"This line will always print, because the file hello does not exist.\"\n```\n\n让我们来运行 `make`。只要 **hello** 不存在，这些 command 就会运行，反之则不运行。\n\n需要认识到的是：**hello** 同时代表了 target hello 和 file hello，这两者的联系非常紧密。\n\n### 编译 C 文件示例\n\n创建 `blah.c`：\n\n```c\n// blah.c\nint main() { return 0; }\n```\n\n创建 `Makefile`：\n\n```makefile\nblah: blah.c\n\tcc blah.c -o blah\n```\n\n当运行 make 时，下面的步骤将会被执行：\n\n1. 第一个 target 将会被选中（默认 target）\n2. 检查 prerequisite `blah.c` 是否存在\n3. 决定是否需要运行此 target：只有当 `blah.c` 的文件修改时间在 `blah` 之后时才会运行\n\n这就是 **make 的本质**：当 prerequisites 在上次编译之后出现变化，就需要重新编译，反之则不需要。\n\n## 更多的例子\n\n下面的 `Makefile` 最终运行了 3 个 target：\n\n```makefile\nblah: blah.o\n\tcc blah.o -o blah # Runs third\n\nblah.o: blah.c\n\tcc -c blah.c -o blah.o # Runs second\n\nblah.c:\n\techo \"int main() { return 0; }\" > blah.c # Runs first\n```\n\n执行步骤：\n\n1. 首先选择 `blah` target\n2. `blah` 需要 `blah.o`，搜索 `blah.o` target\n3. `blah.o` 需要 `blah.c`，搜索 `blah.c` target\n4. `blah.c` 没有依赖，运行 echo\n5. 运行 `cc -c`\n6. 运行 `cc`\n7. 最终，`blah` 生成\n\n## Make Clean\n\nclean 的语法如下：\n\n```makefile\nsome_file:\n\ttouch some_file\n\nclean:\n\trm -f some_file\n```\n\n运行 `make clean` 时，clean 中的内容就会生效。\n\n## 变量\n\n变量只能是 strings，一般使用 `:=`：\n\n```makefile\nfiles := file1 file2\nsome_file: $(files)\n\techo \"Look at this variable: \" $(files)\n\ttouch some_file\n\nfile1:\n\ttouch file1\nfile2:\n\ttouch file2\n\nclean:\n\trm -f file1 file2 some_file\n```\n\n引用变量可以使用：`${}` 或 `$()`\n\n```makefile\nx := dude\n\nall:\n\techo $(x)\n\techo ${x}\n```\n",
    "code": "var Component=(()=>{var m=Object.create;var s=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var N=Object.getOwnPropertyNames;var k=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty;var g=(a,e)=>()=>(e||a((e={exports:{}}).exports,e),e.exports),f=(a,e)=>{for(var l in e)s(a,l,{get:e[l],enumerable:!0})},d=(a,e,l,i)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let c of N(e))!u.call(a,c)&&c!==l&&s(a,c,{get:()=>e[c],enumerable:!(i=p(e,c))||i.enumerable});return a};var b=(a,e,l)=>(l=a!=null?m(k(a)):{},d(e||!a||!a.__esModule?s(l,\"default\",{value:a,enumerable:!0}):l,a)),x=a=>d(s({},\"__esModule\",{value:!0}),a);var h=g((q,r)=>{r.exports=_jsx_runtime});var M={};f(M,{default:()=>t,frontmatter:()=>y});var n=b(h()),y={title:\"Makefile \\u5165\\u95E8\\u6307\\u5357\",date:\"2022-12-06\",tags:[\"C++\"],draft:!1,summary:\"Makefile \\u57FA\\u7840\\u6559\\u7A0B\\uFF1A\\u7406\\u89E3 targets\\u3001prerequisites \\u548C commands\\uFF0C\\u638C\\u63E1\\u589E\\u91CF\\u7F16\\u8BD1\\u6838\\u5FC3\\u539F\\u7406\\u3002\",authors:[\"default\"]};function o(a){let e={a:\"a\",blockquote:\"blockquote\",code:\"code\",h2:\"h2\",h3:\"h3\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",ul:\"ul\",...a.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.p,{children:[\"\\u672C\\u6587\\u662F\\u5BF9 \",(0,n.jsx)(e.a,{href:\"https://makefiletutorial.com/#makefile-cookbook\",children:\"Makefile Cookbook\"}),\" \\u7684\\u7B80\\u8981\\u7FFB\\u8BD1\\u3002\"]}),`\n`,(0,n.jsxs)(e.h2,{id:\"\\u4E3A\\u4EC0\\u4E48\\u9700\\u8981-makefile\",className:\"content-header\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#\\u4E3A\\u4EC0\\u4E48\\u9700\\u8981-makefile\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u4E3A\\u4EC0\\u4E48\\u9700\\u8981 Makefile\"]}),`\n`,(0,n.jsx)(e.p,{children:\"Makefile \\u7528\\u4E8E\\u51B3\\u5B9A\\u4E00\\u4E2A\\u5927\\u578B\\u7A0B\\u5E8F\\u7684\\u54EA\\u4E00\\u90E8\\u5206\\u9700\\u8981\\u88AB\\u91CD\\u65B0\\u7F16\\u8BD1\\u3002\\u5728\\u5927\\u90E8\\u5206\\u60C5\\u51B5\\u4E0B\\uFF0C\\u5176\\u88AB\\u7528\\u6765\\u7F16\\u8BD1 C \\u6216 C++ \\u6587\\u4EF6\\u3002\\u5176\\u4ED6\\u8BED\\u8A00\\u901A\\u5E38\\u6709\\u81EA\\u5DF1\\u7684\\u5DE5\\u5177\\uFF0C\\u5176\\u7528\\u9014\\u4E0E make \\u7C7B\\u4F3C\\u3002\"}),`\n`,(0,n.jsxs)(e.h2,{id:\"\\u8FD0\\u884C\\u6837\\u4F8B\",className:\"content-header\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#\\u8FD0\\u884C\\u6837\\u4F8B\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u8FD0\\u884C\\u6837\\u4F8B\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u8BA9\\u6211\\u4EEC\\u8FD0\\u884C\\u4E00\\u4E2A\\u6700\\u7B80\\u5355\\u7684\\u6837\\u4F8B\\uFF1A\\u65B0\\u5EFA\\u6587\\u4EF6\\u5939\\uFF0C\\u5728\\u5176\\u4E2D\\u521B\\u5EFA \",(0,n.jsx)(e.code,{children:\"Makefile\"}),\" \\u6587\\u4EF6\\uFF1A\"]}),`\n`,(0,n.jsxs)(e.blockquote,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:\"\\u9700\\u8981\\u6CE8\\u610F\\uFF1Amakefile \\u4E2D\\u5FC5\\u987B\\u4F7F\\u7528 tab \\u8FDB\\u884C\\u7F29\\u8FDB\"})}),`\n`]}),`\n`,(0,n.jsx)(e.pre,{className:\"language-makefile\",children:(0,n.jsxs)(e.code,{className:\"language-makefile code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token target symbol\",children:\"hello\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"\techo \",(0,n.jsx)(e.span,{className:\"token string\",children:'\"Hello, World\"'}),`\n`]})]})}),`\n`,(0,n.jsx)(e.p,{children:\"\\u8FD0\\u884C\\u7ED3\\u679C\\uFF1A\"}),`\n`,(0,n.jsx)(e.pre,{className:\"language-bash\",children:(0,n.jsxs)(e.code,{className:\"language-bash code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"$ \",(0,n.jsx)(e.span,{className:\"token function\",children:\"make\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token builtin class-name\",children:\"echo\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:'\"Hello, World\"'}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`Hello, World\n`})]})}),`\n`,(0,n.jsxs)(e.h2,{id:\"makefile-\\u7684\\u8BED\\u6CD5\",className:\"content-header\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#makefile-\\u7684\\u8BED\\u6CD5\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Makefile \\u7684\\u8BED\\u6CD5\"]}),`\n`,(0,n.jsx)(e.p,{children:\"Makefile \\u7531\\u4E00\\u7CFB\\u5217\\u7684 rule \\u6784\\u6210\\uFF0C\\u4E00\\u4E2A rule \\u7684\\u8303\\u5F0F\\u5982\\u4E0B\\uFF1A\"}),`\n`,(0,n.jsx)(e.pre,{className:\"language-makefile\",children:(0,n.jsxs)(e.code,{className:\"language-makefile code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token target symbol\",children:\"targets\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),` prerequisites\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\tcommand\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\tcommand\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\tcommand\n`})]})}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"targets\"}),\": \\u6587\\u4EF6\\u540D\\uFF0C\\u901A\\u8FC7\\u7A7A\\u683C\\u5206\\u9694\\u3002\\u901A\\u5E38\\uFF0C\\u4E00\\u4E2A rule \\u53EA\\u6709\\u4E00\\u4E2A target\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"commands\"}),\": \\u7528\\u4E8E\\u7F16\\u8BD1 targets \\u7684\\u6307\\u4EE4\\uFF0C\\u9700\\u8981\\u4F7F\\u7528 tab \\u7F29\\u8FDB\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"prerequisites\"}),': \\u4E5F\\u662F\\u6587\\u4EF6\\u540D\\uFF0C\\u4EE3\\u8868\"\\u8FD0\\u884C\\u547D\\u4EE4\\u65F6\\u7684\\u4F9D\\u8D56\\u9879\"']}),`\n`]}),`\n`,(0,n.jsxs)(e.h2,{id:\"make-\\u7684\\u672C\\u8D28\",className:\"content-header\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#make-\\u7684\\u672C\\u8D28\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Make \\u7684\\u672C\\u8D28\"]}),`\n`,(0,n.jsx)(e.p,{children:\"\\u6765\\u770B\\u4E00\\u4E2A\\u7B80\\u5355\\u7684\\u4F8B\\u5B50\\uFF1A\"}),`\n`,(0,n.jsx)(e.pre,{className:\"language-makefile\",children:(0,n.jsxs)(e.code,{className:\"language-makefile code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token target symbol\",children:\"hello\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"\techo \",(0,n.jsx)(e.span,{className:\"token string\",children:'\"Hello, World\"'}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"\techo \",(0,n.jsx)(e.span,{className:\"token string\",children:'\"This line will always print, because the file hello does not exist.\"'}),`\n`]})]})}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u8BA9\\u6211\\u4EEC\\u6765\\u8FD0\\u884C \",(0,n.jsx)(e.code,{children:\"make\"}),\"\\u3002\\u53EA\\u8981 \",(0,n.jsx)(e.strong,{children:\"hello\"}),\" \\u4E0D\\u5B58\\u5728\\uFF0C\\u8FD9\\u4E9B command \\u5C31\\u4F1A\\u8FD0\\u884C\\uFF0C\\u53CD\\u4E4B\\u5219\\u4E0D\\u8FD0\\u884C\\u3002\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u9700\\u8981\\u8BA4\\u8BC6\\u5230\\u7684\\u662F\\uFF1A\",(0,n.jsx)(e.strong,{children:\"hello\"}),\" \\u540C\\u65F6\\u4EE3\\u8868\\u4E86 target hello \\u548C file hello\\uFF0C\\u8FD9\\u4E24\\u8005\\u7684\\u8054\\u7CFB\\u975E\\u5E38\\u7D27\\u5BC6\\u3002\"]}),`\n`,(0,n.jsxs)(e.h3,{id:\"\\u7F16\\u8BD1-c-\\u6587\\u4EF6\\u793A\\u4F8B\",className:\"content-header\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#\\u7F16\\u8BD1-c-\\u6587\\u4EF6\\u793A\\u4F8B\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u7F16\\u8BD1 C \\u6587\\u4EF6\\u793A\\u4F8B\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u521B\\u5EFA \",(0,n.jsx)(e.code,{children:\"blah.c\"}),\"\\uFF1A\"]}),`\n`,(0,n.jsx)(e.pre,{className:\"language-c\",children:(0,n.jsxs)(e.code,{className:\"language-c code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"// blah.c\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"int\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"main\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"return\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"0\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u521B\\u5EFA \",(0,n.jsx)(e.code,{children:\"Makefile\"}),\"\\uFF1A\"]}),`\n`,(0,n.jsx)(e.pre,{className:\"language-makefile\",children:(0,n.jsxs)(e.code,{className:\"language-makefile code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token target symbol\",children:\"blah\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),` blah.c\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\tcc blah.c -o blah\n`})]})}),`\n`,(0,n.jsx)(e.p,{children:\"\\u5F53\\u8FD0\\u884C make \\u65F6\\uFF0C\\u4E0B\\u9762\\u7684\\u6B65\\u9AA4\\u5C06\\u4F1A\\u88AB\\u6267\\u884C\\uFF1A\"}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsx)(e.li,{children:\"\\u7B2C\\u4E00\\u4E2A target \\u5C06\\u4F1A\\u88AB\\u9009\\u4E2D\\uFF08\\u9ED8\\u8BA4 target\\uFF09\"}),`\n`,(0,n.jsxs)(e.li,{children:[\"\\u68C0\\u67E5 prerequisite \",(0,n.jsx)(e.code,{children:\"blah.c\"}),\" \\u662F\\u5426\\u5B58\\u5728\"]}),`\n`,(0,n.jsxs)(e.li,{children:[\"\\u51B3\\u5B9A\\u662F\\u5426\\u9700\\u8981\\u8FD0\\u884C\\u6B64 target\\uFF1A\\u53EA\\u6709\\u5F53 \",(0,n.jsx)(e.code,{children:\"blah.c\"}),\" \\u7684\\u6587\\u4EF6\\u4FEE\\u6539\\u65F6\\u95F4\\u5728 \",(0,n.jsx)(e.code,{children:\"blah\"}),\" \\u4E4B\\u540E\\u65F6\\u624D\\u4F1A\\u8FD0\\u884C\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u8FD9\\u5C31\\u662F \",(0,n.jsx)(e.strong,{children:\"make \\u7684\\u672C\\u8D28\"}),\"\\uFF1A\\u5F53 prerequisites \\u5728\\u4E0A\\u6B21\\u7F16\\u8BD1\\u4E4B\\u540E\\u51FA\\u73B0\\u53D8\\u5316\\uFF0C\\u5C31\\u9700\\u8981\\u91CD\\u65B0\\u7F16\\u8BD1\\uFF0C\\u53CD\\u4E4B\\u5219\\u4E0D\\u9700\\u8981\\u3002\"]}),`\n`,(0,n.jsxs)(e.h2,{id:\"\\u66F4\\u591A\\u7684\\u4F8B\\u5B50\",className:\"content-header\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#\\u66F4\\u591A\\u7684\\u4F8B\\u5B50\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u66F4\\u591A\\u7684\\u4F8B\\u5B50\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u4E0B\\u9762\\u7684 \",(0,n.jsx)(e.code,{children:\"Makefile\"}),\" \\u6700\\u7EC8\\u8FD0\\u884C\\u4E86 3 \\u4E2A target\\uFF1A\"]}),`\n`,(0,n.jsx)(e.pre,{className:\"language-makefile\",children:(0,n.jsxs)(e.code,{className:\"language-makefile code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token target symbol\",children:\"blah\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),` blah.o\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"\tcc blah.o -o blah \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"# Runs third\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token target symbol\",children:\"blah.o\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),` blah.c\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"\tcc -c blah.c -o blah.o \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"# Runs second\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token target symbol\",children:\"blah.c\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"\techo \",(0,n.jsx)(e.span,{className:\"token string\",children:'\"int main() { return 0; }\"'}),\" > blah.c \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"# Runs first\"}),`\n`]})]})}),`\n`,(0,n.jsx)(e.p,{children:\"\\u6267\\u884C\\u6B65\\u9AA4\\uFF1A\"}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[\"\\u9996\\u5148\\u9009\\u62E9 \",(0,n.jsx)(e.code,{children:\"blah\"}),\" target\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"blah\"}),\" \\u9700\\u8981 \",(0,n.jsx)(e.code,{children:\"blah.o\"}),\"\\uFF0C\\u641C\\u7D22 \",(0,n.jsx)(e.code,{children:\"blah.o\"}),\" target\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"blah.o\"}),\" \\u9700\\u8981 \",(0,n.jsx)(e.code,{children:\"blah.c\"}),\"\\uFF0C\\u641C\\u7D22 \",(0,n.jsx)(e.code,{children:\"blah.c\"}),\" target\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"blah.c\"}),\" \\u6CA1\\u6709\\u4F9D\\u8D56\\uFF0C\\u8FD0\\u884C echo\"]}),`\n`,(0,n.jsxs)(e.li,{children:[\"\\u8FD0\\u884C \",(0,n.jsx)(e.code,{children:\"cc -c\"})]}),`\n`,(0,n.jsxs)(e.li,{children:[\"\\u8FD0\\u884C \",(0,n.jsx)(e.code,{children:\"cc\"})]}),`\n`,(0,n.jsxs)(e.li,{children:[\"\\u6700\\u7EC8\\uFF0C\",(0,n.jsx)(e.code,{children:\"blah\"}),\" \\u751F\\u6210\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.h2,{id:\"make-clean\",className:\"content-header\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#make-clean\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Make Clean\"]}),`\n`,(0,n.jsx)(e.p,{children:\"clean \\u7684\\u8BED\\u6CD5\\u5982\\u4E0B\\uFF1A\"}),`\n`,(0,n.jsx)(e.pre,{className:\"language-makefile\",children:(0,n.jsxs)(e.code,{className:\"language-makefile code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token target symbol\",children:\"some_file\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\ttouch some_file\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token target symbol\",children:\"clean\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\trm -f some_file\n`})]})}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u8FD0\\u884C \",(0,n.jsx)(e.code,{children:\"make clean\"}),\" \\u65F6\\uFF0Cclean \\u4E2D\\u7684\\u5185\\u5BB9\\u5C31\\u4F1A\\u751F\\u6548\\u3002\"]}),`\n`,(0,n.jsxs)(e.h2,{id:\"\\u53D8\\u91CF\",className:\"content-header\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#\\u53D8\\u91CF\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u53D8\\u91CF\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u53D8\\u91CF\\u53EA\\u80FD\\u662F strings\\uFF0C\\u4E00\\u822C\\u4F7F\\u7528 \",(0,n.jsx)(e.code,{children:\":=\"}),\"\\uFF1A\"]}),`\n`,(0,n.jsx)(e.pre,{className:\"language-makefile\",children:(0,n.jsxs)(e.code,{className:\"language-makefile code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"files \",(0,n.jsx)(e.span,{className:\"token operator\",children:\":=\"}),` file1 file2\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token target symbol\",children:\"some_file\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token variable\",children:\"$\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"files\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"\techo \",(0,n.jsx)(e.span,{className:\"token string\",children:'\"Look at this variable: \"'}),\" \",(0,n.jsx)(e.span,{className:\"token variable\",children:\"$\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"files\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\ttouch some_file\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token target symbol\",children:\"file1\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\ttouch file1\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token target symbol\",children:\"file2\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\ttouch file2\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token target symbol\",children:\"clean\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\trm -f file1 file2 some_file\n`})]})}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u5F15\\u7528\\u53D8\\u91CF\\u53EF\\u4EE5\\u4F7F\\u7528\\uFF1A\",(0,n.jsx)(e.code,{children:\"${}\"}),\" \\u6216 \",(0,n.jsx)(e.code,{children:\"$()\"})]}),`\n`,(0,n.jsx)(e.pre,{className:\"language-makefile\",children:(0,n.jsxs)(e.code,{className:\"language-makefile code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"x \",(0,n.jsx)(e.span,{className:\"token operator\",children:\":=\"}),` dude\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token target symbol\",children:\"all\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"\techo \",(0,n.jsx)(e.span,{className:\"token variable\",children:\"$\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"x\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"\techo \",(0,n.jsx)(e.span,{className:\"token variable\",children:\"$\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\"x\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})})]})}function t(a={}){let{wrapper:e}=a.components||{};return e?(0,n.jsx)(e,{...a,children:(0,n.jsx)(o,{...a})}):o(a)}return x(M);})();\n;return Component;"
  },
  "_id": "blog/Systems/makefile-intro.md",
  "_raw": {
    "sourceFilePath": "blog/Systems/makefile-intro.md",
    "sourceFileName": "makefile-intro.md",
    "sourceFileDir": "blog/Systems",
    "contentType": "markdown",
    "flattenedPath": "blog/Systems/makefile-intro"
  },
  "type": "Blog",
  "readingTime": {
    "text": "4 min read",
    "minutes": 3.19,
    "time": 191400,
    "words": 638
  },
  "slug": "makefile-intro",
  "path": "blog/Systems/makefile-intro",
  "toc": [
    {
      "value": "为什么需要 Makefile",
      "url": "#为什么需要-makefile",
      "depth": 2
    },
    {
      "value": "运行样例",
      "url": "#运行样例",
      "depth": 2
    },
    {
      "value": "Makefile 的语法",
      "url": "#makefile-的语法",
      "depth": 2
    },
    {
      "value": "Make 的本质",
      "url": "#make-的本质",
      "depth": 2
    },
    {
      "value": "编译 C 文件示例",
      "url": "#编译-c-文件示例",
      "depth": 3
    },
    {
      "value": "更多的例子",
      "url": "#更多的例子",
      "depth": 2
    },
    {
      "value": "Make Clean",
      "url": "#make-clean",
      "depth": 2
    },
    {
      "value": "变量",
      "url": "#变量",
      "depth": 2
    }
  ],
  "structuredData": {
    "@context": "https://schema.org",
    "@type": "BlogPosting",
    "headline": "Makefile 入门指南",
    "datePublished": "2022-12-06T00:00:00.000Z",
    "dateModified": "2022-12-06T00:00:00.000Z",
    "description": "Makefile 基础教程：理解 targets、prerequisites 和 commands，掌握增量编译核心原理。",
    "url": "https://zhangjian94cn.github.io/blog/makefile-intro"
  }
}