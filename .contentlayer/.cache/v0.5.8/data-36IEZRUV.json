{
  "cacheItemsMap": {
    "authors/default.mdx": {
      "document": {
        "name": "Zhang Jian",
        "avatar": "/static/images/avatar.png",
        "occupation": "Algorithm Engineer",
        "email": "jianzhang@smail.nju.edu.cn",
        "github": "https://github.com/zhangjian94cn",
        "body": {
          "raw": "\nAI/ML Algorithm Engineer，专注于大语言模型、计算机视觉和机器人技术。\n\n在这里分享技术探索与生活思考。\n",
          "code": "var Component=(()=>{var u=Object.create;var i=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var l=Object.getOwnPropertyNames;var x=Object.getPrototypeOf,j=Object.prototype.hasOwnProperty;var d=(n,t)=>()=>(t||n((t={exports:{}}).exports,t),t.exports),_=(n,t)=>{for(var a in t)i(n,a,{get:t[a],enumerable:!0})},c=(n,t,a,o)=>{if(t&&typeof t==\"object\"||typeof t==\"function\")for(let r of l(t))!j.call(n,r)&&r!==a&&i(n,r,{get:()=>t[r],enumerable:!(o=p(t,r))||o.enumerable});return n};var f=(n,t,a)=>(a=n!=null?u(x(n)):{},c(t||!n||!n.__esModule?i(a,\"default\",{value:n,enumerable:!0}):a,n)),M=n=>c(i({},\"__esModule\",{value:!0}),n);var m=d((z,s)=>{s.exports=_jsx_runtime});var b={};_(b,{default:()=>h,frontmatter:()=>A});var e=f(m()),A={name:\"Zhang Jian\",avatar:\"/static/images/avatar.png\",occupation:\"Algorithm Engineer\",email:\"jianzhang@smail.nju.edu.cn\",github:\"https://github.com/zhangjian94cn\"};function g(n){let t={p:\"p\",...n.components};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(t.p,{children:\"AI/ML Algorithm Engineer\\uFF0C\\u4E13\\u6CE8\\u4E8E\\u5927\\u8BED\\u8A00\\u6A21\\u578B\\u3001\\u8BA1\\u7B97\\u673A\\u89C6\\u89C9\\u548C\\u673A\\u5668\\u4EBA\\u6280\\u672F\\u3002\"}),`\n`,(0,e.jsx)(t.p,{children:\"\\u5728\\u8FD9\\u91CC\\u5206\\u4EAB\\u6280\\u672F\\u63A2\\u7D22\\u4E0E\\u751F\\u6D3B\\u601D\\u8003\\u3002\"})]})}function h(n={}){let{wrapper:t}=n.components||{};return t?(0,e.jsx)(t,{...n,children:(0,e.jsx)(g,{...n})}):g(n)}return M(b);})();\n;return Component;"
        },
        "_id": "authors/default.mdx",
        "_raw": {
          "sourceFilePath": "authors/default.mdx",
          "sourceFileName": "default.mdx",
          "sourceFileDir": "authors",
          "contentType": "mdx",
          "flattenedPath": "authors/default"
        },
        "type": "Authors",
        "readingTime": {
          "text": "1 min read",
          "minutes": 0.18,
          "time": 10800,
          "words": 36
        },
        "slug": "default",
        "path": "authors/default",
        "toc": []
      },
      "documentHash": "1769915965396",
      "hasWarnings": false,
      "documentTypeName": "Authors"
    },
    "blog/avx-intro.mdx": {
      "document": {
        "title": "AVX 指令入门",
        "date": "2022-11-19T00:00:00.000Z",
        "tags": [
          "HPC",
          "AVX",
          "SIMD",
          "性能优化"
        ],
        "draft": false,
        "summary": "介绍 SIMD 向量化指令的基础概念，包括自动向量化与手动向量化的实现方式和性能对比。",
        "authors": [
          "default"
        ],
        "body": {
          "raw": "\n## 简介\n\nSIMD（Single Instruction Multiple Data）是指一条指令能够操作多个数据，是对 CPU 指令的扩展，主要用来进行小数据的并行操作。\n\n> Intel 最初支持 SIMD 的指令集是 1996 年集成在 Pentium 里的 MMX（Multi-Media Extension，多媒体扩展），它的主要目标是为了支持 MPEG 视频解码。Intel 在 1999 年 Pentium3 中推出了 SSE（Streaming SIMD Extensions，流式SIMD扩展），是继 MMX 的扩展指令集，主要用于 3D 图形计算。Intel 在 2008 年 3 月份提出了 AVX 指令集（Advanced Vector Extension，高级向量扩展），它是 SSE 延伸架构，将 SSE 中的 16 个 128 位 XMM 寄存器扩展为 16 个 256 位 YMM 寄存器，增加了一倍的运算效率。 (CSAPP)\n\n## 实现\n\n使用 AVX 指令加速代码主要有两种方式：\n\n**自动向量化**：intel C++ 编译器进行自动向量化，需要使用 `-xhost` 编译选项。在 gcc 编译器中的对应选项为 `-march=native`。开启该选项后，编译器会自动根据 CPU 支持的指令集进行向量化。\n\n**手动向量化**：主要使用 [Intel Intrinsics](https://www.intel.com/content/www/us/en/docs/intrinsics-guide/index.html) 中的指令进行代码程序的编写。\n\n### 自动向量化\n\n对于代码的指定部分进行向量化可以加上编译宏：\n\n```cpp\nvoid auto_vec(float* a, float* b, int* idx) {\n    #pragma ivdep\n    #pragma vector always\n    for (int j = 0; j < 1024; ++ j) {\n        a[idx[j]] += b[j];\n    }\n}\n```\n\n**速度比较**：当使用 `icc -O3 -xhost` 的编译指令时，运行 100m 次，相较于 `g++ -O3`，向量化的编译方式能够获得 2 倍左右的速度提升。\n\n观察输出文件的汇编代码，可以看到向量化指令的使用：\n\n```asm\n402ee0:       c4 81 7c 10 14 88       vmovups (%r8,%r9,4),%ymm2\n402ee6:       c4 81 7c 10 64 88 20    vmovups 0x20(%r8,%r9,4),%ymm4\n402eed:       c5 fc 57 c0             vxorps %ymm0,%ymm0,%ymm0\n402ef1:       62 f1 7d 08 74 c8       vpcmpeqb %xmm0,%xmm0,%k1\n402ef7:       c5 f4 57 c9             vxorps %ymm1,%ymm1,%ymm1\n402efb:       62 f2 7d 29 92 04 97    vgatherdps (%rdi,%ymm2,4),%ymm0\n```\n\n### 手动向量化\n\n下面是相同代码的手动向量化实现：\n\n```cpp\nvoid core_intrinsics(std::vector<float>& a, std::vector<float>& b, int* idx) {\n    for (int j = 0; j < 1024; j += 16) {\n        __m512i _idx = _mm512_load_epi32(idx + j);\n        __m512 _b512 = _mm512_load_ps(b.data() + j);\n        __m512 _a512 = _mm512_i32gather_ps(_idx, a.data(), 4);\n\n        __m512 _res = _mm512_add_ps(_a512, _b512);\n        _mm512_i32scatter_ps(a.data(), _idx, _res, 4);\n    }\n}\n```\n\n有兴趣的可以自己尝试，比较两种方法的速度以及背后的原因。\n\n## 结论\n\n通过上面的简单实验，我们初步认知了向量化的两种实现方式。但是如何能更好地利用 AVX 指令的优势，需要考虑具体的代码。影响性能的核心因素是 memory bound 还是 compute bound，代码程序是否能实现指令上的并行，代码的关键路径是什么等等都是我们需要考虑的。\n",
          "code": "var Component=(()=>{var m=Object.create;var l=Object.defineProperty;var h=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var N=Object.getPrototypeOf,k=Object.prototype.hasOwnProperty;var _=(a,n)=>()=>(n||a((n={exports:{}}).exports,n),n.exports),f=(a,n)=>{for(var s in n)l(a,s,{get:n[s],enumerable:!0})},o=(a,n,s,t)=>{if(n&&typeof n==\"object\"||typeof n==\"function\")for(let c of u(n))!k.call(a,c)&&c!==s&&l(a,c,{get:()=>n[c],enumerable:!(t=h(n,c))||t.enumerable});return a};var x=(a,n,s)=>(s=a!=null?m(N(a)):{},o(n||!a||!a.__esModule?l(s,\"default\",{value:a,enumerable:!0}):s,a)),g=a=>o(l({},\"__esModule\",{value:!0}),a);var r=_((v,i)=>{i.exports=_jsx_runtime});var b={};f(b,{default:()=>p,frontmatter:()=>y});var e=x(r()),y={title:\"AVX \\u6307\\u4EE4\\u5165\\u95E8\",date:\"2022-11-19\",tags:[\"HPC\",\"AVX\",\"SIMD\",\"\\u6027\\u80FD\\u4F18\\u5316\"],draft:!1,summary:\"\\u4ECB\\u7ECD SIMD \\u5411\\u91CF\\u5316\\u6307\\u4EE4\\u7684\\u57FA\\u7840\\u6982\\u5FF5\\uFF0C\\u5305\\u62EC\\u81EA\\u52A8\\u5411\\u91CF\\u5316\\u4E0E\\u624B\\u52A8\\u5411\\u91CF\\u5316\\u7684\\u5B9E\\u73B0\\u65B9\\u5F0F\\u548C\\u6027\\u80FD\\u5BF9\\u6BD4\\u3002\",authors:[\"default\"]};function d(a){let n={a:\"a\",blockquote:\"blockquote\",code:\"code\",h2:\"h2\",h3:\"h3\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",...a.components};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(n.h2,{id:\"\\u7B80\\u4ECB\",className:\"content-header\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#\\u7B80\\u4ECB\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u7B80\\u4ECB\"]}),`\n`,(0,e.jsx)(n.p,{children:\"SIMD\\uFF08Single Instruction Multiple Data\\uFF09\\u662F\\u6307\\u4E00\\u6761\\u6307\\u4EE4\\u80FD\\u591F\\u64CD\\u4F5C\\u591A\\u4E2A\\u6570\\u636E\\uFF0C\\u662F\\u5BF9 CPU \\u6307\\u4EE4\\u7684\\u6269\\u5C55\\uFF0C\\u4E3B\\u8981\\u7528\\u6765\\u8FDB\\u884C\\u5C0F\\u6570\\u636E\\u7684\\u5E76\\u884C\\u64CD\\u4F5C\\u3002\"}),`\n`,(0,e.jsxs)(n.blockquote,{children:[`\n`,(0,e.jsx)(n.p,{children:\"Intel \\u6700\\u521D\\u652F\\u6301 SIMD \\u7684\\u6307\\u4EE4\\u96C6\\u662F 1996 \\u5E74\\u96C6\\u6210\\u5728 Pentium \\u91CC\\u7684 MMX\\uFF08Multi-Media Extension\\uFF0C\\u591A\\u5A92\\u4F53\\u6269\\u5C55\\uFF09\\uFF0C\\u5B83\\u7684\\u4E3B\\u8981\\u76EE\\u6807\\u662F\\u4E3A\\u4E86\\u652F\\u6301 MPEG \\u89C6\\u9891\\u89E3\\u7801\\u3002Intel \\u5728 1999 \\u5E74 Pentium3 \\u4E2D\\u63A8\\u51FA\\u4E86 SSE\\uFF08Streaming SIMD Extensions\\uFF0C\\u6D41\\u5F0FSIMD\\u6269\\u5C55\\uFF09\\uFF0C\\u662F\\u7EE7 MMX \\u7684\\u6269\\u5C55\\u6307\\u4EE4\\u96C6\\uFF0C\\u4E3B\\u8981\\u7528\\u4E8E 3D \\u56FE\\u5F62\\u8BA1\\u7B97\\u3002Intel \\u5728 2008 \\u5E74 3 \\u6708\\u4EFD\\u63D0\\u51FA\\u4E86 AVX \\u6307\\u4EE4\\u96C6\\uFF08Advanced Vector Extension\\uFF0C\\u9AD8\\u7EA7\\u5411\\u91CF\\u6269\\u5C55\\uFF09\\uFF0C\\u5B83\\u662F SSE \\u5EF6\\u4F38\\u67B6\\u6784\\uFF0C\\u5C06 SSE \\u4E2D\\u7684 16 \\u4E2A 128 \\u4F4D XMM \\u5BC4\\u5B58\\u5668\\u6269\\u5C55\\u4E3A 16 \\u4E2A 256 \\u4F4D YMM \\u5BC4\\u5B58\\u5668\\uFF0C\\u589E\\u52A0\\u4E86\\u4E00\\u500D\\u7684\\u8FD0\\u7B97\\u6548\\u7387\\u3002 (CSAPP)\"}),`\n`]}),`\n`,(0,e.jsxs)(n.h2,{id:\"\\u5B9E\\u73B0\",className:\"content-header\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#\\u5B9E\\u73B0\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u5B9E\\u73B0\"]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u4F7F\\u7528 AVX \\u6307\\u4EE4\\u52A0\\u901F\\u4EE3\\u7801\\u4E3B\\u8981\\u6709\\u4E24\\u79CD\\u65B9\\u5F0F\\uFF1A\"}),`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:\"\\u81EA\\u52A8\\u5411\\u91CF\\u5316\"}),\"\\uFF1Aintel C++ \\u7F16\\u8BD1\\u5668\\u8FDB\\u884C\\u81EA\\u52A8\\u5411\\u91CF\\u5316\\uFF0C\\u9700\\u8981\\u4F7F\\u7528 \",(0,e.jsx)(n.code,{children:\"-xhost\"}),\" \\u7F16\\u8BD1\\u9009\\u9879\\u3002\\u5728 gcc \\u7F16\\u8BD1\\u5668\\u4E2D\\u7684\\u5BF9\\u5E94\\u9009\\u9879\\u4E3A \",(0,e.jsx)(n.code,{children:\"-march=native\"}),\"\\u3002\\u5F00\\u542F\\u8BE5\\u9009\\u9879\\u540E\\uFF0C\\u7F16\\u8BD1\\u5668\\u4F1A\\u81EA\\u52A8\\u6839\\u636E CPU \\u652F\\u6301\\u7684\\u6307\\u4EE4\\u96C6\\u8FDB\\u884C\\u5411\\u91CF\\u5316\\u3002\"]}),`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:\"\\u624B\\u52A8\\u5411\\u91CF\\u5316\"}),\"\\uFF1A\\u4E3B\\u8981\\u4F7F\\u7528 \",(0,e.jsx)(n.a,{href:\"https://www.intel.com/content/www/us/en/docs/intrinsics-guide/index.html\",children:\"Intel Intrinsics\"}),\" \\u4E2D\\u7684\\u6307\\u4EE4\\u8FDB\\u884C\\u4EE3\\u7801\\u7A0B\\u5E8F\\u7684\\u7F16\\u5199\\u3002\"]}),`\n`,(0,e.jsxs)(n.h3,{id:\"\\u81EA\\u52A8\\u5411\\u91CF\\u5316\",className:\"content-header\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#\\u81EA\\u52A8\\u5411\\u91CF\\u5316\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u81EA\\u52A8\\u5411\\u91CF\\u5316\"]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u5BF9\\u4E8E\\u4EE3\\u7801\\u7684\\u6307\\u5B9A\\u90E8\\u5206\\u8FDB\\u884C\\u5411\\u91CF\\u5316\\u53EF\\u4EE5\\u52A0\\u4E0A\\u7F16\\u8BD1\\u5B8F\\uFF1A\"}),`\n`,(0,e.jsx)(n.pre,{className:\"language-cpp\",children:(0,e.jsxs)(n.code,{className:\"language-cpp code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"void\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"auto_vec\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token keyword\",children:\"float\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"*\"}),\" a\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"float\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"*\"}),\" b\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"int\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"*\"}),\" idx\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsxs)(n.span,{className:\"token macro property\",children:[(0,e.jsx)(n.span,{className:\"token directive-hash\",children:\"#\"}),(0,e.jsx)(n.span,{className:\"token directive keyword\",children:\"pragma\"}),\" \",(0,e.jsx)(n.span,{className:\"token expression\",children:\"ivdep\"})]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsxs)(n.span,{className:\"token macro property\",children:[(0,e.jsx)(n.span,{className:\"token directive-hash\",children:\"#\"}),(0,e.jsx)(n.span,{className:\"token directive keyword\",children:\"pragma\"}),\" \",(0,e.jsx)(n.span,{className:\"token expression\",children:\"vector always\"})]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"for\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token keyword\",children:\"int\"}),\" j \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"0\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),\" j \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"<\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"1024\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"++\"}),\" j\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        a\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"idx\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"j\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"+=\"}),\" b\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"j\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:\"\\u901F\\u5EA6\\u6BD4\\u8F83\"}),\"\\uFF1A\\u5F53\\u4F7F\\u7528 \",(0,e.jsx)(n.code,{children:\"icc -O3 -xhost\"}),\" \\u7684\\u7F16\\u8BD1\\u6307\\u4EE4\\u65F6\\uFF0C\\u8FD0\\u884C 100m \\u6B21\\uFF0C\\u76F8\\u8F83\\u4E8E \",(0,e.jsx)(n.code,{children:\"g++ -O3\"}),\"\\uFF0C\\u5411\\u91CF\\u5316\\u7684\\u7F16\\u8BD1\\u65B9\\u5F0F\\u80FD\\u591F\\u83B7\\u5F97 2 \\u500D\\u5DE6\\u53F3\\u7684\\u901F\\u5EA6\\u63D0\\u5347\\u3002\"]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u89C2\\u5BDF\\u8F93\\u51FA\\u6587\\u4EF6\\u7684\\u6C47\\u7F16\\u4EE3\\u7801\\uFF0C\\u53EF\\u4EE5\\u770B\\u5230\\u5411\\u91CF\\u5316\\u6307\\u4EE4\\u7684\\u4F7F\\u7528\\uFF1A\"}),`\n`,(0,e.jsx)(n.pre,{children:(0,e.jsxs)(n.code,{className:\"language-asm code-highlight\",children:[(0,e.jsx)(n.span,{className:\"code-line\",children:`402ee0:       c4 81 7c 10 14 88       vmovups (%r8,%r9,4),%ymm2\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`402ee6:       c4 81 7c 10 64 88 20    vmovups 0x20(%r8,%r9,4),%ymm4\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`402eed:       c5 fc 57 c0             vxorps %ymm0,%ymm0,%ymm0\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`402ef1:       62 f1 7d 08 74 c8       vpcmpeqb %xmm0,%xmm0,%k1\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`402ef7:       c5 f4 57 c9             vxorps %ymm1,%ymm1,%ymm1\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`402efb:       62 f2 7d 29 92 04 97    vgatherdps (%rdi,%ymm2,4),%ymm0\n`})]})}),`\n`,(0,e.jsxs)(n.h3,{id:\"\\u624B\\u52A8\\u5411\\u91CF\\u5316\",className:\"content-header\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#\\u624B\\u52A8\\u5411\\u91CF\\u5316\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u624B\\u52A8\\u5411\\u91CF\\u5316\"]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u4E0B\\u9762\\u662F\\u76F8\\u540C\\u4EE3\\u7801\\u7684\\u624B\\u52A8\\u5411\\u91CF\\u5316\\u5B9E\\u73B0\\uFF1A\"}),`\n`,(0,e.jsx)(n.pre,{className:\"language-cpp\",children:(0,e.jsxs)(n.code,{className:\"language-cpp code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"void\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"core_intrinsics\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"std\",(0,e.jsx)(n.span,{className:\"token double-colon punctuation\",children:\"::\"}),\"vector\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"<\"}),(0,e.jsx)(n.span,{className:\"token keyword\",children:\"float\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\">\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"&\"}),\" a\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" std\",(0,e.jsx)(n.span,{className:\"token double-colon punctuation\",children:\"::\"}),\"vector\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"<\"}),(0,e.jsx)(n.span,{className:\"token keyword\",children:\"float\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\">\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"&\"}),\" b\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"int\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"*\"}),\" idx\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"for\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token keyword\",children:\"int\"}),\" j \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"0\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),\" j \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"<\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"1024\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),\" j \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"+=\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"16\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        __m512i _idx \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"_mm512_load_epi32\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"idx \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"+\"}),\" j\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        __m512 _b512 \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"_mm512_load_ps\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"b\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"data\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"+\"}),\" j\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        __m512 _a512 \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"_mm512_i32gather_ps\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"_idx\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" a\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"data\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"4\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        __m512 _res \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"_mm512_add_ps\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"_a512\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" _b512\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token function\",children:\"_mm512_i32scatter_ps\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"a\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"data\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" _idx\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" _res\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"4\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,e.jsx)(n.p,{children:\"\\u6709\\u5174\\u8DA3\\u7684\\u53EF\\u4EE5\\u81EA\\u5DF1\\u5C1D\\u8BD5\\uFF0C\\u6BD4\\u8F83\\u4E24\\u79CD\\u65B9\\u6CD5\\u7684\\u901F\\u5EA6\\u4EE5\\u53CA\\u80CC\\u540E\\u7684\\u539F\\u56E0\\u3002\"}),`\n`,(0,e.jsxs)(n.h2,{id:\"\\u7ED3\\u8BBA\",className:\"content-header\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#\\u7ED3\\u8BBA\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u7ED3\\u8BBA\"]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u901A\\u8FC7\\u4E0A\\u9762\\u7684\\u7B80\\u5355\\u5B9E\\u9A8C\\uFF0C\\u6211\\u4EEC\\u521D\\u6B65\\u8BA4\\u77E5\\u4E86\\u5411\\u91CF\\u5316\\u7684\\u4E24\\u79CD\\u5B9E\\u73B0\\u65B9\\u5F0F\\u3002\\u4F46\\u662F\\u5982\\u4F55\\u80FD\\u66F4\\u597D\\u5730\\u5229\\u7528 AVX \\u6307\\u4EE4\\u7684\\u4F18\\u52BF\\uFF0C\\u9700\\u8981\\u8003\\u8651\\u5177\\u4F53\\u7684\\u4EE3\\u7801\\u3002\\u5F71\\u54CD\\u6027\\u80FD\\u7684\\u6838\\u5FC3\\u56E0\\u7D20\\u662F memory bound \\u8FD8\\u662F compute bound\\uFF0C\\u4EE3\\u7801\\u7A0B\\u5E8F\\u662F\\u5426\\u80FD\\u5B9E\\u73B0\\u6307\\u4EE4\\u4E0A\\u7684\\u5E76\\u884C\\uFF0C\\u4EE3\\u7801\\u7684\\u5173\\u952E\\u8DEF\\u5F84\\u662F\\u4EC0\\u4E48\\u7B49\\u7B49\\u90FD\\u662F\\u6211\\u4EEC\\u9700\\u8981\\u8003\\u8651\\u7684\\u3002\"})]})}function p(a={}){let{wrapper:n}=a.components||{};return n?(0,e.jsx)(n,{...a,children:(0,e.jsx)(d,{...a})}):d(a)}return g(b);})();\n;return Component;"
        },
        "_id": "blog/avx-intro.mdx",
        "_raw": {
          "sourceFilePath": "blog/avx-intro.mdx",
          "sourceFileName": "avx-intro.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/avx-intro"
        },
        "type": "Blog",
        "readingTime": {
          "text": "4 min read",
          "minutes": 3.38,
          "time": 202800,
          "words": 676
        },
        "slug": "avx-intro",
        "path": "blog/avx-intro",
        "toc": [
          {
            "value": "简介",
            "url": "#简介",
            "depth": 2
          },
          {
            "value": "实现",
            "url": "#实现",
            "depth": 2
          },
          {
            "value": "自动向量化",
            "url": "#自动向量化",
            "depth": 3
          },
          {
            "value": "手动向量化",
            "url": "#手动向量化",
            "depth": 3
          },
          {
            "value": "结论",
            "url": "#结论",
            "depth": 2
          }
        ],
        "structuredData": {
          "@context": "https://schema.org",
          "@type": "BlogPosting",
          "headline": "AVX 指令入门",
          "datePublished": "2022-11-19T00:00:00.000Z",
          "dateModified": "2022-11-19T00:00:00.000Z",
          "description": "介绍 SIMD 向量化指令的基础概念，包括自动向量化与手动向量化的实现方式和性能对比。",
          "url": "https://zhangjian94cn.github.io/blog/avx-intro"
        }
      },
      "documentHash": "1770184228778",
      "hasWarnings": false,
      "documentTypeName": "Blog"
    },
    "blog/cuda-optimization-tips.mdx": {
      "document": {
        "title": "CUDA 性能优化技巧",
        "date": "2026-01-15T00:00:00.000Z",
        "tags": [
          "CUDA",
          "HPC",
          "性能优化",
          "GPU"
        ],
        "draft": false,
        "summary": "深入探讨 CUDA 编程中的性能优化策略，包括内存访问模式、线程组织和性能分析工具。",
        "authors": [
          "default"
        ],
        "body": {
          "raw": "\n## 为什么需要 CUDA 优化\n\nGPU 并行计算能力强大，但要充分发挥性能需要了解硬件特性。优化得当可以获得 10-100 倍加速。\n\n## 核心优化策略\n\n### 1. 内存合并访问\n\nGPU 内存以 128 字节为单位读取，相邻线程访问相邻内存效率最高：\n\n```cpp\n// ❌ 慢：跨步访问\n__global__ void bad_kernel(float* data, int stride) {\n    int idx = threadIdx.x * stride;\n    float val = data[idx];  // 非合并访问\n}\n\n// ✅ 快：连续访问\n__global__ void good_kernel(float* data) {\n    int idx = threadIdx.x;\n    float val = data[idx];  // 合并访问\n}\n```\n\n### 2. 共享内存使用\n\n共享内存速度比全局内存快 100 倍：\n\n```cpp\n__global__ void matrix_mul(float* A, float* B, float* C) {\n    __shared__ float tile_A[16][16];\n    __shared__ float tile_B[16][16];\n\n    // 分块加载到共享内存\n    tile_A[ty][tx] = A[row * N + tx];\n    tile_B[ty][tx] = B[ty * N + col];\n    __syncthreads();\n\n    // 在共享内存中计算\n    for (int k = 0; k < 16; k++) {\n        sum += tile_A[ty][k] * tile_B[k][tx];\n    }\n}\n```\n\n### 3. 避免分支分歧\n\n同一个 warp 内的线程应执行相同指令：\n\n```cpp\n// ❌ 分支分歧\nif (threadIdx.x % 2 == 0) {\n    // 一半线程执行这里\n} else {\n    // 另一半线程执行这里\n}\n\n// ✅ 无分歧\nint offset = (threadIdx.x % 2) * stride;\ndata[threadIdx.x + offset] = value;\n```\n\n## 性能分析工具\n\n### Nsight Compute\n\n```bash\nncu --target-processes all ./my_cuda_app\n```\n\n关注指标：\n\n- **SM 利用率**: 应 > 80%\n- **内存带宽利用率**: 应 > 60%\n- **Occupancy**: 活跃 warp 比例\n\n### nvprof (旧版)\n\n```bash\nnvprof --print-gpu-trace ./my_cuda_app\n```\n\n## 性能对比\n\n优化前后的矩阵乘法性能：\n\n| 版本        | 耗时   | 加速比 |\n| ----------- | ------ | ------ |\n| CPU 基线    | 1200ms | 1x     |\n| 朴素 CUDA   | 45ms   | 27x    |\n| 共享内存    | 8ms    | 150x   |\n| Tensor Core | 2ms    | 600x   |\n\n## 总结\n\nCUDA 优化需要理解硬件架构。善用性能分析工具，找到瓶颈再针对性优化。\n",
          "code": "var Component=(()=>{var h=Object.create;var l=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var N=Object.getPrototypeOf,k=Object.prototype.hasOwnProperty;var g=(a,n)=>()=>(n||a((n={exports:{}}).exports,n),n.exports),x=(a,n)=>{for(var s in n)l(a,s,{get:n[s],enumerable:!0})},i=(a,n,s,t)=>{if(n&&typeof n==\"object\"||typeof n==\"function\")for(let c of u(n))!k.call(a,c)&&c!==s&&l(a,c,{get:()=>n[c],enumerable:!(t=m(n,c))||t.enumerable});return a};var _=(a,n,s)=>(s=a!=null?h(N(a)):{},i(n||!a||!a.__esModule?l(s,\"default\",{value:a,enumerable:!0}):s,a)),f=a=>i(l({},\"__esModule\",{value:!0}),a);var r=g((I,o)=>{o.exports=_jsx_runtime});var y={};x(y,{default:()=>p,frontmatter:()=>b});var e=_(r()),b={title:\"CUDA \\u6027\\u80FD\\u4F18\\u5316\\u6280\\u5DE7\",date:\"2026-01-15\",tags:[\"CUDA\",\"HPC\",\"\\u6027\\u80FD\\u4F18\\u5316\",\"GPU\"],draft:!1,summary:\"\\u6DF1\\u5165\\u63A2\\u8BA8 CUDA \\u7F16\\u7A0B\\u4E2D\\u7684\\u6027\\u80FD\\u4F18\\u5316\\u7B56\\u7565\\uFF0C\\u5305\\u62EC\\u5185\\u5B58\\u8BBF\\u95EE\\u6A21\\u5F0F\\u3001\\u7EBF\\u7A0B\\u7EC4\\u7EC7\\u548C\\u6027\\u80FD\\u5206\\u6790\\u5DE5\\u5177\\u3002\",authors:[\"default\"]};function d(a){let n={a:\"a\",code:\"code\",h2:\"h2\",h3:\"h3\",li:\"li\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",table:\"table\",tbody:\"tbody\",td:\"td\",th:\"th\",thead:\"thead\",tr:\"tr\",ul:\"ul\",...a.components};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(n.h2,{id:\"\\u4E3A\\u4EC0\\u4E48\\u9700\\u8981-cuda-\\u4F18\\u5316\",className:\"content-header\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#\\u4E3A\\u4EC0\\u4E48\\u9700\\u8981-cuda-\\u4F18\\u5316\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u4E3A\\u4EC0\\u4E48\\u9700\\u8981 CUDA \\u4F18\\u5316\"]}),`\n`,(0,e.jsx)(n.p,{children:\"GPU \\u5E76\\u884C\\u8BA1\\u7B97\\u80FD\\u529B\\u5F3A\\u5927\\uFF0C\\u4F46\\u8981\\u5145\\u5206\\u53D1\\u6325\\u6027\\u80FD\\u9700\\u8981\\u4E86\\u89E3\\u786C\\u4EF6\\u7279\\u6027\\u3002\\u4F18\\u5316\\u5F97\\u5F53\\u53EF\\u4EE5\\u83B7\\u5F97 10-100 \\u500D\\u52A0\\u901F\\u3002\"}),`\n`,(0,e.jsxs)(n.h2,{id:\"\\u6838\\u5FC3\\u4F18\\u5316\\u7B56\\u7565\",className:\"content-header\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#\\u6838\\u5FC3\\u4F18\\u5316\\u7B56\\u7565\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u6838\\u5FC3\\u4F18\\u5316\\u7B56\\u7565\"]}),`\n`,(0,e.jsxs)(n.h3,{id:\"1-\\u5185\\u5B58\\u5408\\u5E76\\u8BBF\\u95EE\",className:\"content-header\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#1-\\u5185\\u5B58\\u5408\\u5E76\\u8BBF\\u95EE\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"1. \\u5185\\u5B58\\u5408\\u5E76\\u8BBF\\u95EE\"]}),`\n`,(0,e.jsx)(n.p,{children:\"GPU \\u5185\\u5B58\\u4EE5 128 \\u5B57\\u8282\\u4E3A\\u5355\\u4F4D\\u8BFB\\u53D6\\uFF0C\\u76F8\\u90BB\\u7EBF\\u7A0B\\u8BBF\\u95EE\\u76F8\\u90BB\\u5185\\u5B58\\u6548\\u7387\\u6700\\u9AD8\\uFF1A\"}),`\n`,(0,e.jsx)(n.pre,{className:\"language-cpp\",children:(0,e.jsxs)(n.code,{className:\"language-cpp code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"// \\u274C \\u6162\\uFF1A\\u8DE8\\u6B65\\u8BBF\\u95EE\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"__global__ \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"void\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"bad_kernel\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token keyword\",children:\"float\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"*\"}),\" data\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"int\"}),\" stride\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"int\"}),\" idx \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" threadIdx\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"x \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"*\"}),\" stride\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"float\"}),\" val \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" data\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"idx\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),\"  \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// \\u975E\\u5408\\u5E76\\u8BBF\\u95EE\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"// \\u2705 \\u5FEB\\uFF1A\\u8FDE\\u7EED\\u8BBF\\u95EE\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"__global__ \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"void\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"good_kernel\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token keyword\",children:\"float\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"*\"}),\" data\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"int\"}),\" idx \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" threadIdx\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"x\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"float\"}),\" val \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" data\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"idx\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),\"  \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// \\u5408\\u5E76\\u8BBF\\u95EE\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,e.jsxs)(n.h3,{id:\"2-\\u5171\\u4EAB\\u5185\\u5B58\\u4F7F\\u7528\",className:\"content-header\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#2-\\u5171\\u4EAB\\u5185\\u5B58\\u4F7F\\u7528\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"2. \\u5171\\u4EAB\\u5185\\u5B58\\u4F7F\\u7528\"]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u5171\\u4EAB\\u5185\\u5B58\\u901F\\u5EA6\\u6BD4\\u5168\\u5C40\\u5185\\u5B58\\u5FEB 100 \\u500D\\uFF1A\"}),`\n`,(0,e.jsx)(n.pre,{className:\"language-cpp\",children:(0,e.jsxs)(n.code,{className:\"language-cpp code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"__global__ \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"void\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"matrix_mul\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token keyword\",children:\"float\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"*\"}),\" A\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"float\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"*\"}),\" B\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"float\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"*\"}),\" C\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    __shared__ \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"float\"}),\" tile_A\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"16\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"16\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    __shared__ \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"float\"}),\" tile_B\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"16\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"16\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// \\u5206\\u5757\\u52A0\\u8F7D\\u5230\\u5171\\u4EAB\\u5185\\u5B58\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    tile_A\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"ty\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"tx\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" A\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"row \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"*\"}),\" N \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"+\"}),\" tx\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    tile_B\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"ty\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"tx\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" B\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"ty \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"*\"}),\" N \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"+\"}),\" col\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token function\",children:\"__syncthreads\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// \\u5728\\u5171\\u4EAB\\u5185\\u5B58\\u4E2D\\u8BA1\\u7B97\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"for\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token keyword\",children:\"int\"}),\" k \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"0\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),\" k \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"<\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"16\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),\" k\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"++\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        sum \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"+=\"}),\" tile_A\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"ty\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"k\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"*\"}),\" tile_B\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"k\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"tx\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,e.jsxs)(n.h3,{id:\"3-\\u907F\\u514D\\u5206\\u652F\\u5206\\u6B67\",className:\"content-header\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#3-\\u907F\\u514D\\u5206\\u652F\\u5206\\u6B67\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"3. \\u907F\\u514D\\u5206\\u652F\\u5206\\u6B67\"]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u540C\\u4E00\\u4E2A warp \\u5185\\u7684\\u7EBF\\u7A0B\\u5E94\\u6267\\u884C\\u76F8\\u540C\\u6307\\u4EE4\\uFF1A\"}),`\n`,(0,e.jsx)(n.pre,{className:\"language-cpp\",children:(0,e.jsxs)(n.code,{className:\"language-cpp code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"// \\u274C \\u5206\\u652F\\u5206\\u6B67\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"if\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"threadIdx\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"x \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"%\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"2\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"==\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"0\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// \\u4E00\\u534A\\u7EBF\\u7A0B\\u6267\\u884C\\u8FD9\\u91CC\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"else\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// \\u53E6\\u4E00\\u534A\\u7EBF\\u7A0B\\u6267\\u884C\\u8FD9\\u91CC\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"// \\u2705 \\u65E0\\u5206\\u6B67\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"int\"}),\" offset \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"threadIdx\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"x \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"%\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"2\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"*\"}),\" stride\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"data\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"threadIdx\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"x \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"+\"}),\" offset\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" value\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]})]})}),`\n`,(0,e.jsxs)(n.h2,{id:\"\\u6027\\u80FD\\u5206\\u6790\\u5DE5\\u5177\",className:\"content-header\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#\\u6027\\u80FD\\u5206\\u6790\\u5DE5\\u5177\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u6027\\u80FD\\u5206\\u6790\\u5DE5\\u5177\"]}),`\n`,(0,e.jsxs)(n.h3,{id:\"nsight-compute\",className:\"content-header\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#nsight-compute\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Nsight Compute\"]}),`\n`,(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsx)(n.code,{className:\"language-bash code-highlight\",children:(0,e.jsx)(n.span,{className:\"code-line\",children:`ncu --target-processes all ./my_cuda_app\n`})})}),`\n`,(0,e.jsx)(n.p,{children:\"\\u5173\\u6CE8\\u6307\\u6807\\uFF1A\"}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"SM \\u5229\\u7528\\u7387\"}),\": \\u5E94 > 80%\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"\\u5185\\u5B58\\u5E26\\u5BBD\\u5229\\u7528\\u7387\"}),\": \\u5E94 > 60%\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"Occupancy\"}),\": \\u6D3B\\u8DC3 warp \\u6BD4\\u4F8B\"]}),`\n`]}),`\n`,(0,e.jsxs)(n.h3,{id:\"nvprof-\\u65E7\\u7248\",className:\"content-header\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#nvprof-\\u65E7\\u7248\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"nvprof (\\u65E7\\u7248)\"]}),`\n`,(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsx)(n.code,{className:\"language-bash code-highlight\",children:(0,e.jsx)(n.span,{className:\"code-line\",children:`nvprof --print-gpu-trace ./my_cuda_app\n`})})}),`\n`,(0,e.jsxs)(n.h2,{id:\"\\u6027\\u80FD\\u5BF9\\u6BD4\",className:\"content-header\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#\\u6027\\u80FD\\u5BF9\\u6BD4\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u6027\\u80FD\\u5BF9\\u6BD4\"]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u4F18\\u5316\\u524D\\u540E\\u7684\\u77E9\\u9635\\u4E58\\u6CD5\\u6027\\u80FD\\uFF1A\"}),`\n`,(0,e.jsxs)(n.table,{children:[(0,e.jsx)(n.thead,{children:(0,e.jsxs)(n.tr,{children:[(0,e.jsx)(n.th,{children:\"\\u7248\\u672C\"}),(0,e.jsx)(n.th,{children:\"\\u8017\\u65F6\"}),(0,e.jsx)(n.th,{children:\"\\u52A0\\u901F\\u6BD4\"})]})}),(0,e.jsxs)(n.tbody,{children:[(0,e.jsxs)(n.tr,{children:[(0,e.jsx)(n.td,{children:\"CPU \\u57FA\\u7EBF\"}),(0,e.jsx)(n.td,{children:\"1200ms\"}),(0,e.jsx)(n.td,{children:\"1x\"})]}),(0,e.jsxs)(n.tr,{children:[(0,e.jsx)(n.td,{children:\"\\u6734\\u7D20 CUDA\"}),(0,e.jsx)(n.td,{children:\"45ms\"}),(0,e.jsx)(n.td,{children:\"27x\"})]}),(0,e.jsxs)(n.tr,{children:[(0,e.jsx)(n.td,{children:\"\\u5171\\u4EAB\\u5185\\u5B58\"}),(0,e.jsx)(n.td,{children:\"8ms\"}),(0,e.jsx)(n.td,{children:\"150x\"})]}),(0,e.jsxs)(n.tr,{children:[(0,e.jsx)(n.td,{children:\"Tensor Core\"}),(0,e.jsx)(n.td,{children:\"2ms\"}),(0,e.jsx)(n.td,{children:\"600x\"})]})]})]}),`\n`,(0,e.jsxs)(n.h2,{id:\"\\u603B\\u7ED3\",className:\"content-header\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#\\u603B\\u7ED3\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u603B\\u7ED3\"]}),`\n`,(0,e.jsx)(n.p,{children:\"CUDA \\u4F18\\u5316\\u9700\\u8981\\u7406\\u89E3\\u786C\\u4EF6\\u67B6\\u6784\\u3002\\u5584\\u7528\\u6027\\u80FD\\u5206\\u6790\\u5DE5\\u5177\\uFF0C\\u627E\\u5230\\u74F6\\u9888\\u518D\\u9488\\u5BF9\\u6027\\u4F18\\u5316\\u3002\"})]})}function p(a={}){let{wrapper:n}=a.components||{};return n?(0,e.jsx)(n,{...a,children:(0,e.jsx)(d,{...a})}):d(a)}return f(y);})();\n;return Component;"
        },
        "_id": "blog/cuda-optimization-tips.mdx",
        "_raw": {
          "sourceFilePath": "blog/cuda-optimization-tips.mdx",
          "sourceFileName": "cuda-optimization-tips.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/cuda-optimization-tips"
        },
        "type": "Blog",
        "readingTime": {
          "text": "3 min read",
          "minutes": 2.225,
          "time": 133500,
          "words": 445
        },
        "slug": "cuda-optimization-tips",
        "path": "blog/cuda-optimization-tips",
        "toc": [
          {
            "value": "为什么需要 CUDA 优化",
            "url": "#为什么需要-cuda-优化",
            "depth": 2
          },
          {
            "value": "核心优化策略",
            "url": "#核心优化策略",
            "depth": 2
          },
          {
            "value": "1. 内存合并访问",
            "url": "#1-内存合并访问",
            "depth": 3
          },
          {
            "value": "2. 共享内存使用",
            "url": "#2-共享内存使用",
            "depth": 3
          },
          {
            "value": "3. 避免分支分歧",
            "url": "#3-避免分支分歧",
            "depth": 3
          },
          {
            "value": "性能分析工具",
            "url": "#性能分析工具",
            "depth": 2
          },
          {
            "value": "Nsight Compute",
            "url": "#nsight-compute",
            "depth": 3
          },
          {
            "value": "nvprof (旧版)",
            "url": "#nvprof-旧版",
            "depth": 3
          },
          {
            "value": "性能对比",
            "url": "#性能对比",
            "depth": 2
          },
          {
            "value": "总结",
            "url": "#总结",
            "depth": 2
          }
        ],
        "structuredData": {
          "@context": "https://schema.org",
          "@type": "BlogPosting",
          "headline": "CUDA 性能优化技巧",
          "datePublished": "2026-01-15T00:00:00.000Z",
          "dateModified": "2026-01-15T00:00:00.000Z",
          "description": "深入探讨 CUDA 编程中的性能优化策略，包括内存访问模式、线程组织和性能分析工具。",
          "url": "https://zhangjian94cn.github.io/blog/cuda-optimization-tips"
        }
      },
      "documentHash": "1769918048047",
      "hasWarnings": false,
      "documentTypeName": "Blog"
    },
    "blog/high-accuracy-segmentation.mdx": {
      "document": {
        "title": "高精度图像分割技术回顾",
        "date": "2023-11-06T00:00:00.000Z",
        "tags": [
          "深度学习",
          "计算机视觉",
          "图像分割"
        ],
        "draft": false,
        "summary": "回顾高精度图像分割算法发展：从 BASNet 到 U2Net，再到 DIS。探讨 Residual Refine Module 及多尺度融合技术。",
        "authors": [
          "default"
        ],
        "body": {
          "raw": "\n## 前言\n\n最近回顾了一下之前使用过的高精度图像分割算法，从 BASNet，到 U2Net，再到 2022 年的 DIS。高精度的图像分割技术在计算机视觉领域具有着极为重要的应用。通过准确地分离图像中的不同对象、区域和特征，我们可以实现：\n\n1. **更安全的自动驾驶**：通过将道路、车道线、交通标志和行人精确分离，以帮助车辆导航\n2. **更精确的医疗诊断**：通过将自动化的分割人体器官，可以实现高精度自动化的人体手术\n3. **更佳的社交应用体验**：通过高精度的分割，我们可以实现各种创意效果，如背景虚化、景深效果和图像合成等等\n\n## BASNet\n\n这篇论文的贡献主要有两个：\n\n- 提出了一个基于残差的 Refine 模块（Residual Refine Module）\n- 使用了多层级的 loss，分别是 pixel，patch 和 map 级别的 BCE，SSIM，IOU loss\n\n### predict-refine 网络架构\n\nBASNet 是一个类似 U-Net 的 encoder-decoder 的网络架构，其和传统分割网络的区别在于：增加了一个 refine 模块。refine 模块的输入是：encoder 的特征，其学习的目标是 coarse predict 网络与 ground truth 的残差。\n\n### 多层级的混合 loss\n\n- **BCE loss**：这是一个针对像素进行二分类的 loss\n- **Structural SIMilarity (SSIM)**：结构相似性的度量，用于衡量两张图的相似度，特别关注边缘效果\n- **IOU**：对整个图像的分割正确率的一种度量\n\n## U2Net\n\nU2Net 的主要贡献有两个：\n\n- 提出了一个能融合多尺度信息的 RSU（ReSidual U-blocks）结构\n- 基于 RSU 结构的新的网络架构\n\n### ReSidual U-blocks\n\nRSU 的结构简单来说就是：残差的跨接维度是以一个 UNet 为单位的。换句话说 ResNet 结构中的 weight layer 被替换成了一个 UNet，这样做的优势在于 U-block 的输出可以认为是带有多尺度信息的，从而增强了模型的能力。\n\n### 网络架构\n\n整体的网络架构是在原来的 RSU 模块的基础上再套一个 UNet 的结构，这也是为什么叫 U² 的原因。对于每一层的特征输出，最终都会被 concate 到一起，得到一个融合之后的结果。\n\n需要注意的是，在 loss 计算时，不仅考虑了最终的 S_fuse，其每一个特征层的输出都会被加入到 loss 计算中去。\n\n## Highly Accurate Dichotomous Image Segmentation（DIS）\n\n这篇工作很大的贡献在于：提供了一个高精度的分割数据集。尤其是对于物体细节这块，标注的非常精准，此类数据成本往往很高，能够公开出来是非常难得的。\n\n相对于 U2Net，效果上也有了很大的提升。除了数据集的贡献之外，这篇工作提出了：\n\n- 一种新的基于中间监督的基线 IS-Net，它通过强制高维特征的直接同步来减少过拟合\n- 人工矫正量（HCE）指标\n\n### IS-Net 网络架构\n\nIS-Net 的网络架构基本上是沿用了 U2Net 的结构，区别在于其对多尺度下的特征进行直接的监督。如何做到这一点呢？其将训练分成了两个阶段：\n\n1. 第一阶段基于 ground truth 训练一个编码器，其包含了多尺度下对应的**特征 ground truth**\n2. 第二阶段利用这些特征 ground truth 去训练原来的 U2Net 结构\n\n需要注意的是，在推理过程中，我们只需要主干部分，特征监督模块只参与训练。\n\n## 结语\n\n通过本文，我们简单回顾了高精度图像分割相关工作，其在计算机视觉领域具有着广泛的应用前景。这些算法的不断发展和改进使我们能够更准确地分离图像中的不同对象、区域和特征。\n\n## 参考\n\n- [BASNet](https://github.com/xuebinqin/BASNet)\n- [U-2-Net](https://github.com/xuebinqin/U-2-Net)\n- [DIS](https://github.com/xuebinqin/DIS)\n",
          "code": "var Component=(()=>{var u=Object.create;var c=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var N=Object.getOwnPropertyNames;var p=Object.getPrototypeOf,f=Object.prototype.hasOwnProperty;var g=(i,e)=>()=>(e||i((e={exports:{}}).exports,e),e.exports),S=(i,e)=>{for(var r in e)c(i,r,{get:e[r],enumerable:!0})},t=(i,e,r,a)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let l of N(e))!f.call(i,l)&&l!==r&&c(i,l,{get:()=>e[l],enumerable:!(a=m(e,l))||a.enumerable});return i};var I=(i,e,r)=>(r=i!=null?u(p(i)):{},t(e||!i||!i.__esModule?c(r,\"default\",{value:i,enumerable:!0}):r,i)),b=i=>t(c({},\"__esModule\",{value:!0}),i);var h=g((R,d)=>{d.exports=_jsx_runtime});var U={};S(U,{default:()=>o,frontmatter:()=>x});var n=I(h()),x={title:\"\\u9AD8\\u7CBE\\u5EA6\\u56FE\\u50CF\\u5206\\u5272\\u6280\\u672F\\u56DE\\u987E\",date:\"2023-11-06\",tags:[\"\\u6DF1\\u5EA6\\u5B66\\u4E60\",\"\\u8BA1\\u7B97\\u673A\\u89C6\\u89C9\",\"\\u56FE\\u50CF\\u5206\\u5272\"],draft:!1,summary:\"\\u56DE\\u987E\\u9AD8\\u7CBE\\u5EA6\\u56FE\\u50CF\\u5206\\u5272\\u7B97\\u6CD5\\u53D1\\u5C55\\uFF1A\\u4ECE BASNet \\u5230 U2Net\\uFF0C\\u518D\\u5230 DIS\\u3002\\u63A2\\u8BA8 Residual Refine Module \\u53CA\\u591A\\u5C3A\\u5EA6\\u878D\\u5408\\u6280\\u672F\\u3002\",authors:[\"default\"]};function s(i){let e={a:\"a\",h2:\"h2\",h3:\"h3\",li:\"li\",ol:\"ol\",p:\"p\",span:\"span\",strong:\"strong\",ul:\"ul\",...i.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.h2,{id:\"\\u524D\\u8A00\",className:\"content-header\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#\\u524D\\u8A00\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u524D\\u8A00\"]}),`\n`,(0,n.jsx)(e.p,{children:\"\\u6700\\u8FD1\\u56DE\\u987E\\u4E86\\u4E00\\u4E0B\\u4E4B\\u524D\\u4F7F\\u7528\\u8FC7\\u7684\\u9AD8\\u7CBE\\u5EA6\\u56FE\\u50CF\\u5206\\u5272\\u7B97\\u6CD5\\uFF0C\\u4ECE BASNet\\uFF0C\\u5230 U2Net\\uFF0C\\u518D\\u5230 2022 \\u5E74\\u7684 DIS\\u3002\\u9AD8\\u7CBE\\u5EA6\\u7684\\u56FE\\u50CF\\u5206\\u5272\\u6280\\u672F\\u5728\\u8BA1\\u7B97\\u673A\\u89C6\\u89C9\\u9886\\u57DF\\u5177\\u6709\\u7740\\u6781\\u4E3A\\u91CD\\u8981\\u7684\\u5E94\\u7528\\u3002\\u901A\\u8FC7\\u51C6\\u786E\\u5730\\u5206\\u79BB\\u56FE\\u50CF\\u4E2D\\u7684\\u4E0D\\u540C\\u5BF9\\u8C61\\u3001\\u533A\\u57DF\\u548C\\u7279\\u5F81\\uFF0C\\u6211\\u4EEC\\u53EF\\u4EE5\\u5B9E\\u73B0\\uFF1A\"}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"\\u66F4\\u5B89\\u5168\\u7684\\u81EA\\u52A8\\u9A7E\\u9A76\"}),\"\\uFF1A\\u901A\\u8FC7\\u5C06\\u9053\\u8DEF\\u3001\\u8F66\\u9053\\u7EBF\\u3001\\u4EA4\\u901A\\u6807\\u5FD7\\u548C\\u884C\\u4EBA\\u7CBE\\u786E\\u5206\\u79BB\\uFF0C\\u4EE5\\u5E2E\\u52A9\\u8F66\\u8F86\\u5BFC\\u822A\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"\\u66F4\\u7CBE\\u786E\\u7684\\u533B\\u7597\\u8BCA\\u65AD\"}),\"\\uFF1A\\u901A\\u8FC7\\u5C06\\u81EA\\u52A8\\u5316\\u7684\\u5206\\u5272\\u4EBA\\u4F53\\u5668\\u5B98\\uFF0C\\u53EF\\u4EE5\\u5B9E\\u73B0\\u9AD8\\u7CBE\\u5EA6\\u81EA\\u52A8\\u5316\\u7684\\u4EBA\\u4F53\\u624B\\u672F\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"\\u66F4\\u4F73\\u7684\\u793E\\u4EA4\\u5E94\\u7528\\u4F53\\u9A8C\"}),\"\\uFF1A\\u901A\\u8FC7\\u9AD8\\u7CBE\\u5EA6\\u7684\\u5206\\u5272\\uFF0C\\u6211\\u4EEC\\u53EF\\u4EE5\\u5B9E\\u73B0\\u5404\\u79CD\\u521B\\u610F\\u6548\\u679C\\uFF0C\\u5982\\u80CC\\u666F\\u865A\\u5316\\u3001\\u666F\\u6DF1\\u6548\\u679C\\u548C\\u56FE\\u50CF\\u5408\\u6210\\u7B49\\u7B49\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.h2,{id:\"basnet\",className:\"content-header\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#basnet\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"BASNet\"]}),`\n`,(0,n.jsx)(e.p,{children:\"\\u8FD9\\u7BC7\\u8BBA\\u6587\\u7684\\u8D21\\u732E\\u4E3B\\u8981\\u6709\\u4E24\\u4E2A\\uFF1A\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:\"\\u63D0\\u51FA\\u4E86\\u4E00\\u4E2A\\u57FA\\u4E8E\\u6B8B\\u5DEE\\u7684 Refine \\u6A21\\u5757\\uFF08Residual Refine Module\\uFF09\"}),`\n`,(0,n.jsx)(e.li,{children:\"\\u4F7F\\u7528\\u4E86\\u591A\\u5C42\\u7EA7\\u7684 loss\\uFF0C\\u5206\\u522B\\u662F pixel\\uFF0Cpatch \\u548C map \\u7EA7\\u522B\\u7684 BCE\\uFF0CSSIM\\uFF0CIOU loss\"}),`\n`]}),`\n`,(0,n.jsxs)(e.h3,{id:\"predict-refine-\\u7F51\\u7EDC\\u67B6\\u6784\",className:\"content-header\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#predict-refine-\\u7F51\\u7EDC\\u67B6\\u6784\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"predict-refine \\u7F51\\u7EDC\\u67B6\\u6784\"]}),`\n`,(0,n.jsx)(e.p,{children:\"BASNet \\u662F\\u4E00\\u4E2A\\u7C7B\\u4F3C U-Net \\u7684 encoder-decoder \\u7684\\u7F51\\u7EDC\\u67B6\\u6784\\uFF0C\\u5176\\u548C\\u4F20\\u7EDF\\u5206\\u5272\\u7F51\\u7EDC\\u7684\\u533A\\u522B\\u5728\\u4E8E\\uFF1A\\u589E\\u52A0\\u4E86\\u4E00\\u4E2A refine \\u6A21\\u5757\\u3002refine \\u6A21\\u5757\\u7684\\u8F93\\u5165\\u662F\\uFF1Aencoder \\u7684\\u7279\\u5F81\\uFF0C\\u5176\\u5B66\\u4E60\\u7684\\u76EE\\u6807\\u662F coarse predict \\u7F51\\u7EDC\\u4E0E ground truth \\u7684\\u6B8B\\u5DEE\\u3002\"}),`\n`,(0,n.jsxs)(e.h3,{id:\"\\u591A\\u5C42\\u7EA7\\u7684\\u6DF7\\u5408-loss\",className:\"content-header\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#\\u591A\\u5C42\\u7EA7\\u7684\\u6DF7\\u5408-loss\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u591A\\u5C42\\u7EA7\\u7684\\u6DF7\\u5408 loss\"]}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"BCE loss\"}),\"\\uFF1A\\u8FD9\\u662F\\u4E00\\u4E2A\\u9488\\u5BF9\\u50CF\\u7D20\\u8FDB\\u884C\\u4E8C\\u5206\\u7C7B\\u7684 loss\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"Structural SIMilarity (SSIM)\"}),\"\\uFF1A\\u7ED3\\u6784\\u76F8\\u4F3C\\u6027\\u7684\\u5EA6\\u91CF\\uFF0C\\u7528\\u4E8E\\u8861\\u91CF\\u4E24\\u5F20\\u56FE\\u7684\\u76F8\\u4F3C\\u5EA6\\uFF0C\\u7279\\u522B\\u5173\\u6CE8\\u8FB9\\u7F18\\u6548\\u679C\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"IOU\"}),\"\\uFF1A\\u5BF9\\u6574\\u4E2A\\u56FE\\u50CF\\u7684\\u5206\\u5272\\u6B63\\u786E\\u7387\\u7684\\u4E00\\u79CD\\u5EA6\\u91CF\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.h2,{id:\"u2net\",className:\"content-header\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#u2net\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"U2Net\"]}),`\n`,(0,n.jsx)(e.p,{children:\"U2Net \\u7684\\u4E3B\\u8981\\u8D21\\u732E\\u6709\\u4E24\\u4E2A\\uFF1A\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:\"\\u63D0\\u51FA\\u4E86\\u4E00\\u4E2A\\u80FD\\u878D\\u5408\\u591A\\u5C3A\\u5EA6\\u4FE1\\u606F\\u7684 RSU\\uFF08ReSidual U-blocks\\uFF09\\u7ED3\\u6784\"}),`\n`,(0,n.jsx)(e.li,{children:\"\\u57FA\\u4E8E RSU \\u7ED3\\u6784\\u7684\\u65B0\\u7684\\u7F51\\u7EDC\\u67B6\\u6784\"}),`\n`]}),`\n`,(0,n.jsxs)(e.h3,{id:\"residual-u-blocks\",className:\"content-header\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#residual-u-blocks\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"ReSidual U-blocks\"]}),`\n`,(0,n.jsx)(e.p,{children:\"RSU \\u7684\\u7ED3\\u6784\\u7B80\\u5355\\u6765\\u8BF4\\u5C31\\u662F\\uFF1A\\u6B8B\\u5DEE\\u7684\\u8DE8\\u63A5\\u7EF4\\u5EA6\\u662F\\u4EE5\\u4E00\\u4E2A UNet \\u4E3A\\u5355\\u4F4D\\u7684\\u3002\\u6362\\u53E5\\u8BDD\\u8BF4 ResNet \\u7ED3\\u6784\\u4E2D\\u7684 weight layer \\u88AB\\u66FF\\u6362\\u6210\\u4E86\\u4E00\\u4E2A UNet\\uFF0C\\u8FD9\\u6837\\u505A\\u7684\\u4F18\\u52BF\\u5728\\u4E8E U-block \\u7684\\u8F93\\u51FA\\u53EF\\u4EE5\\u8BA4\\u4E3A\\u662F\\u5E26\\u6709\\u591A\\u5C3A\\u5EA6\\u4FE1\\u606F\\u7684\\uFF0C\\u4ECE\\u800C\\u589E\\u5F3A\\u4E86\\u6A21\\u578B\\u7684\\u80FD\\u529B\\u3002\"}),`\n`,(0,n.jsxs)(e.h3,{id:\"\\u7F51\\u7EDC\\u67B6\\u6784\",className:\"content-header\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#\\u7F51\\u7EDC\\u67B6\\u6784\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u7F51\\u7EDC\\u67B6\\u6784\"]}),`\n`,(0,n.jsx)(e.p,{children:\"\\u6574\\u4F53\\u7684\\u7F51\\u7EDC\\u67B6\\u6784\\u662F\\u5728\\u539F\\u6765\\u7684 RSU \\u6A21\\u5757\\u7684\\u57FA\\u7840\\u4E0A\\u518D\\u5957\\u4E00\\u4E2A UNet \\u7684\\u7ED3\\u6784\\uFF0C\\u8FD9\\u4E5F\\u662F\\u4E3A\\u4EC0\\u4E48\\u53EB U\\xB2 \\u7684\\u539F\\u56E0\\u3002\\u5BF9\\u4E8E\\u6BCF\\u4E00\\u5C42\\u7684\\u7279\\u5F81\\u8F93\\u51FA\\uFF0C\\u6700\\u7EC8\\u90FD\\u4F1A\\u88AB concate \\u5230\\u4E00\\u8D77\\uFF0C\\u5F97\\u5230\\u4E00\\u4E2A\\u878D\\u5408\\u4E4B\\u540E\\u7684\\u7ED3\\u679C\\u3002\"}),`\n`,(0,n.jsx)(e.p,{children:\"\\u9700\\u8981\\u6CE8\\u610F\\u7684\\u662F\\uFF0C\\u5728 loss \\u8BA1\\u7B97\\u65F6\\uFF0C\\u4E0D\\u4EC5\\u8003\\u8651\\u4E86\\u6700\\u7EC8\\u7684 S_fuse\\uFF0C\\u5176\\u6BCF\\u4E00\\u4E2A\\u7279\\u5F81\\u5C42\\u7684\\u8F93\\u51FA\\u90FD\\u4F1A\\u88AB\\u52A0\\u5165\\u5230 loss \\u8BA1\\u7B97\\u4E2D\\u53BB\\u3002\"}),`\n`,(0,n.jsxs)(e.h2,{id:\"highly-accurate-dichotomous-image-segmentationdis\",className:\"content-header\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#highly-accurate-dichotomous-image-segmentationdis\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Highly Accurate Dichotomous Image Segmentation\\uFF08DIS\\uFF09\"]}),`\n`,(0,n.jsx)(e.p,{children:\"\\u8FD9\\u7BC7\\u5DE5\\u4F5C\\u5F88\\u5927\\u7684\\u8D21\\u732E\\u5728\\u4E8E\\uFF1A\\u63D0\\u4F9B\\u4E86\\u4E00\\u4E2A\\u9AD8\\u7CBE\\u5EA6\\u7684\\u5206\\u5272\\u6570\\u636E\\u96C6\\u3002\\u5C24\\u5176\\u662F\\u5BF9\\u4E8E\\u7269\\u4F53\\u7EC6\\u8282\\u8FD9\\u5757\\uFF0C\\u6807\\u6CE8\\u7684\\u975E\\u5E38\\u7CBE\\u51C6\\uFF0C\\u6B64\\u7C7B\\u6570\\u636E\\u6210\\u672C\\u5F80\\u5F80\\u5F88\\u9AD8\\uFF0C\\u80FD\\u591F\\u516C\\u5F00\\u51FA\\u6765\\u662F\\u975E\\u5E38\\u96BE\\u5F97\\u7684\\u3002\"}),`\n`,(0,n.jsx)(e.p,{children:\"\\u76F8\\u5BF9\\u4E8E U2Net\\uFF0C\\u6548\\u679C\\u4E0A\\u4E5F\\u6709\\u4E86\\u5F88\\u5927\\u7684\\u63D0\\u5347\\u3002\\u9664\\u4E86\\u6570\\u636E\\u96C6\\u7684\\u8D21\\u732E\\u4E4B\\u5916\\uFF0C\\u8FD9\\u7BC7\\u5DE5\\u4F5C\\u63D0\\u51FA\\u4E86\\uFF1A\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:\"\\u4E00\\u79CD\\u65B0\\u7684\\u57FA\\u4E8E\\u4E2D\\u95F4\\u76D1\\u7763\\u7684\\u57FA\\u7EBF IS-Net\\uFF0C\\u5B83\\u901A\\u8FC7\\u5F3A\\u5236\\u9AD8\\u7EF4\\u7279\\u5F81\\u7684\\u76F4\\u63A5\\u540C\\u6B65\\u6765\\u51CF\\u5C11\\u8FC7\\u62DF\\u5408\"}),`\n`,(0,n.jsx)(e.li,{children:\"\\u4EBA\\u5DE5\\u77EB\\u6B63\\u91CF\\uFF08HCE\\uFF09\\u6307\\u6807\"}),`\n`]}),`\n`,(0,n.jsxs)(e.h3,{id:\"is-net-\\u7F51\\u7EDC\\u67B6\\u6784\",className:\"content-header\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#is-net-\\u7F51\\u7EDC\\u67B6\\u6784\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"IS-Net \\u7F51\\u7EDC\\u67B6\\u6784\"]}),`\n`,(0,n.jsx)(e.p,{children:\"IS-Net \\u7684\\u7F51\\u7EDC\\u67B6\\u6784\\u57FA\\u672C\\u4E0A\\u662F\\u6CBF\\u7528\\u4E86 U2Net \\u7684\\u7ED3\\u6784\\uFF0C\\u533A\\u522B\\u5728\\u4E8E\\u5176\\u5BF9\\u591A\\u5C3A\\u5EA6\\u4E0B\\u7684\\u7279\\u5F81\\u8FDB\\u884C\\u76F4\\u63A5\\u7684\\u76D1\\u7763\\u3002\\u5982\\u4F55\\u505A\\u5230\\u8FD9\\u4E00\\u70B9\\u5462\\uFF1F\\u5176\\u5C06\\u8BAD\\u7EC3\\u5206\\u6210\\u4E86\\u4E24\\u4E2A\\u9636\\u6BB5\\uFF1A\"}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[\"\\u7B2C\\u4E00\\u9636\\u6BB5\\u57FA\\u4E8E ground truth \\u8BAD\\u7EC3\\u4E00\\u4E2A\\u7F16\\u7801\\u5668\\uFF0C\\u5176\\u5305\\u542B\\u4E86\\u591A\\u5C3A\\u5EA6\\u4E0B\\u5BF9\\u5E94\\u7684\",(0,n.jsx)(e.strong,{children:\"\\u7279\\u5F81 ground truth\"})]}),`\n`,(0,n.jsx)(e.li,{children:\"\\u7B2C\\u4E8C\\u9636\\u6BB5\\u5229\\u7528\\u8FD9\\u4E9B\\u7279\\u5F81 ground truth \\u53BB\\u8BAD\\u7EC3\\u539F\\u6765\\u7684 U2Net \\u7ED3\\u6784\"}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:\"\\u9700\\u8981\\u6CE8\\u610F\\u7684\\u662F\\uFF0C\\u5728\\u63A8\\u7406\\u8FC7\\u7A0B\\u4E2D\\uFF0C\\u6211\\u4EEC\\u53EA\\u9700\\u8981\\u4E3B\\u5E72\\u90E8\\u5206\\uFF0C\\u7279\\u5F81\\u76D1\\u7763\\u6A21\\u5757\\u53EA\\u53C2\\u4E0E\\u8BAD\\u7EC3\\u3002\"}),`\n`,(0,n.jsxs)(e.h2,{id:\"\\u7ED3\\u8BED\",className:\"content-header\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#\\u7ED3\\u8BED\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u7ED3\\u8BED\"]}),`\n`,(0,n.jsx)(e.p,{children:\"\\u901A\\u8FC7\\u672C\\u6587\\uFF0C\\u6211\\u4EEC\\u7B80\\u5355\\u56DE\\u987E\\u4E86\\u9AD8\\u7CBE\\u5EA6\\u56FE\\u50CF\\u5206\\u5272\\u76F8\\u5173\\u5DE5\\u4F5C\\uFF0C\\u5176\\u5728\\u8BA1\\u7B97\\u673A\\u89C6\\u89C9\\u9886\\u57DF\\u5177\\u6709\\u7740\\u5E7F\\u6CDB\\u7684\\u5E94\\u7528\\u524D\\u666F\\u3002\\u8FD9\\u4E9B\\u7B97\\u6CD5\\u7684\\u4E0D\\u65AD\\u53D1\\u5C55\\u548C\\u6539\\u8FDB\\u4F7F\\u6211\\u4EEC\\u80FD\\u591F\\u66F4\\u51C6\\u786E\\u5730\\u5206\\u79BB\\u56FE\\u50CF\\u4E2D\\u7684\\u4E0D\\u540C\\u5BF9\\u8C61\\u3001\\u533A\\u57DF\\u548C\\u7279\\u5F81\\u3002\"}),`\n`,(0,n.jsxs)(e.h2,{id:\"\\u53C2\\u8003\",className:\"content-header\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#\\u53C2\\u8003\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u53C2\\u8003\"]}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\"https://github.com/xuebinqin/BASNet\",children:\"BASNet\"})}),`\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\"https://github.com/xuebinqin/U-2-Net\",children:\"U-2-Net\"})}),`\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\"https://github.com/xuebinqin/DIS\",children:\"DIS\"})}),`\n`]})]})}function o(i={}){let{wrapper:e}=i.components||{};return e?(0,n.jsx)(e,{...i,children:(0,n.jsx)(s,{...i})}):s(i)}return b(U);})();\n;return Component;"
        },
        "_id": "blog/high-accuracy-segmentation.mdx",
        "_raw": {
          "sourceFilePath": "blog/high-accuracy-segmentation.mdx",
          "sourceFileName": "high-accuracy-segmentation.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/high-accuracy-segmentation"
        },
        "type": "Blog",
        "readingTime": {
          "text": "6 min read",
          "minutes": 5.06,
          "time": 303600,
          "words": 1012
        },
        "slug": "high-accuracy-segmentation",
        "path": "blog/high-accuracy-segmentation",
        "toc": [
          {
            "value": "前言",
            "url": "#前言",
            "depth": 2
          },
          {
            "value": "BASNet",
            "url": "#basnet",
            "depth": 2
          },
          {
            "value": "predict-refine 网络架构",
            "url": "#predict-refine-网络架构",
            "depth": 3
          },
          {
            "value": "多层级的混合 loss",
            "url": "#多层级的混合-loss",
            "depth": 3
          },
          {
            "value": "U2Net",
            "url": "#u2net",
            "depth": 2
          },
          {
            "value": "ReSidual U-blocks",
            "url": "#residual-u-blocks",
            "depth": 3
          },
          {
            "value": "网络架构",
            "url": "#网络架构",
            "depth": 3
          },
          {
            "value": "Highly Accurate Dichotomous Image Segmentation（DIS）",
            "url": "#highly-accurate-dichotomous-image-segmentationdis",
            "depth": 2
          },
          {
            "value": "IS-Net 网络架构",
            "url": "#is-net-网络架构",
            "depth": 3
          },
          {
            "value": "结语",
            "url": "#结语",
            "depth": 2
          },
          {
            "value": "参考",
            "url": "#参考",
            "depth": 2
          }
        ],
        "structuredData": {
          "@context": "https://schema.org",
          "@type": "BlogPosting",
          "headline": "高精度图像分割技术回顾",
          "datePublished": "2023-11-06T00:00:00.000Z",
          "dateModified": "2023-11-06T00:00:00.000Z",
          "description": "回顾高精度图像分割算法发展：从 BASNet 到 U2Net，再到 DIS。探讨 Residual Refine Module 及多尺度融合技术。",
          "url": "https://zhangjian94cn.github.io/blog/high-accuracy-segmentation"
        }
      },
      "documentHash": "1770184436036",
      "hasWarnings": false,
      "documentTypeName": "Blog"
    },
    "blog/llm-on-ray.mdx": {
      "document": {
        "title": "Introducing Intel LLM-on-Ray: A New Era for Large Language Models",
        "date": "2023-12-09T00:00:00.000Z",
        "tags": [
          "LLM",
          "Ray",
          "Intel",
          "分布式训练"
        ],
        "draft": false,
        "summary": "Pretrain, finetune and serve LLMs on Intel platforms with Ray distributed framework.",
        "authors": [
          "default"
        ],
        "body": {
          "raw": "\nWe are thrilled to announce the launch of the [Intel LLM-on-Ray project](https://github.com/intel/llm-on-ray), a groundbreaking initiative designed to revolutionize the way large language models (LLMs) are pretrained, finetuned, and served on Intel platforms using the Ray framework.\n\n## Empowering LLMs with Intel and Ray\n\nThe Intel LLM-on-Ray project brings together the scalability of Ray with the robustness of Intel's hardware, delivering an unparalleled environment for working with LLMs. Researchers and developers can now leverage this powerful combination to train and deploy some of the most advanced AI models with greater ease and efficiency.\n\n## Key Features\n\n- **Scalability**: Handle massive datasets and model sizes without compromising on performance.\n- **Flexibility**: Pretrain and finetune models with custom workflows tailored to specific needs.\n- **Efficiency**: Optimize resource utilization on Intel platforms, reducing operational costs.\n- **Ease of Use**: Simplified APIs and tools make it easier to get started and scale up.\n\n## Get Started\n\nThe project is open-source and ready for contributions. We encourage you to join us in this journey and help shape the future of LLMs. For more information, visit the [Intel LLM-on-Ray GitHub repository](https://github.com/intel/llm-on-ray).\n\n## Join the Community\n\nBecome part of a growing community of developers and researchers passionate about the potential of LLMs. Share your insights, collaborate on projects, and learn from the expertise of others in the field.\n",
          "code": "var Component=(()=>{var m=Object.create;var i=Object.defineProperty;var u=Object.getOwnPropertyDescriptor;var f=Object.getOwnPropertyNames;var p=Object.getPrototypeOf,g=Object.prototype.hasOwnProperty;var y=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),L=(t,e)=>{for(var a in e)i(t,a,{get:e[a],enumerable:!0})},s=(t,e,a,o)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let r of f(e))!g.call(t,r)&&r!==a&&i(t,r,{get:()=>e[r],enumerable:!(o=u(e,r))||o.enumerable});return t};var w=(t,e,a)=>(a=t!=null?m(p(t)):{},s(e||!t||!t.__esModule?i(a,\"default\",{value:t,enumerable:!0}):a,t)),b=t=>s(i({},\"__esModule\",{value:!0}),t);var d=y((j,l)=>{l.exports=_jsx_runtime});var x={};L(x,{default:()=>h,frontmatter:()=>I});var n=w(d()),I={title:\"Introducing Intel LLM-on-Ray: A New Era for Large Language Models\",date:\"2023-12-09\",tags:[\"LLM\",\"Ray\",\"Intel\",\"\\u5206\\u5E03\\u5F0F\\u8BAD\\u7EC3\"],draft:!1,summary:\"Pretrain, finetune and serve LLMs on Intel platforms with Ray distributed framework.\",authors:[\"default\"]};function c(t){let e={a:\"a\",h2:\"h2\",li:\"li\",p:\"p\",span:\"span\",strong:\"strong\",ul:\"ul\",...t.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.p,{children:[\"We are thrilled to announce the launch of the \",(0,n.jsx)(e.a,{href:\"https://github.com/intel/llm-on-ray\",children:\"Intel LLM-on-Ray project\"}),\", a groundbreaking initiative designed to revolutionize the way large language models (LLMs) are pretrained, finetuned, and served on Intel platforms using the Ray framework.\"]}),`\n`,(0,n.jsxs)(e.h2,{id:\"empowering-llms-with-intel-and-ray\",className:\"content-header\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#empowering-llms-with-intel-and-ray\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Empowering LLMs with Intel and Ray\"]}),`\n`,(0,n.jsx)(e.p,{children:\"The Intel LLM-on-Ray project brings together the scalability of Ray with the robustness of Intel's hardware, delivering an unparalleled environment for working with LLMs. Researchers and developers can now leverage this powerful combination to train and deploy some of the most advanced AI models with greater ease and efficiency.\"}),`\n`,(0,n.jsxs)(e.h2,{id:\"key-features\",className:\"content-header\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#key-features\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Key Features\"]}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"Scalability\"}),\": Handle massive datasets and model sizes without compromising on performance.\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"Flexibility\"}),\": Pretrain and finetune models with custom workflows tailored to specific needs.\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"Efficiency\"}),\": Optimize resource utilization on Intel platforms, reducing operational costs.\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"Ease of Use\"}),\": Simplified APIs and tools make it easier to get started and scale up.\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.h2,{id:\"get-started\",className:\"content-header\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#get-started\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Get Started\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"The project is open-source and ready for contributions. We encourage you to join us in this journey and help shape the future of LLMs. For more information, visit the \",(0,n.jsx)(e.a,{href:\"https://github.com/intel/llm-on-ray\",children:\"Intel LLM-on-Ray GitHub repository\"}),\".\"]}),`\n`,(0,n.jsxs)(e.h2,{id:\"join-the-community\",className:\"content-header\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#join-the-community\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Join the Community\"]}),`\n`,(0,n.jsx)(e.p,{children:\"Become part of a growing community of developers and researchers passionate about the potential of LLMs. Share your insights, collaborate on projects, and learn from the expertise of others in the field.\"})]})}function h(t={}){let{wrapper:e}=t.components||{};return e?(0,n.jsx)(e,{...t,children:(0,n.jsx)(c,{...t})}):c(t)}return b(x);})();\n;return Component;"
        },
        "_id": "blog/llm-on-ray.mdx",
        "_raw": {
          "sourceFilePath": "blog/llm-on-ray.mdx",
          "sourceFileName": "llm-on-ray.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/llm-on-ray"
        },
        "type": "Blog",
        "readingTime": {
          "text": "2 min read",
          "minutes": 1.1,
          "time": 66000,
          "words": 220
        },
        "slug": "llm-on-ray",
        "path": "blog/llm-on-ray",
        "toc": [
          {
            "value": "Empowering LLMs with Intel and Ray",
            "url": "#empowering-llms-with-intel-and-ray",
            "depth": 2
          },
          {
            "value": "Key Features",
            "url": "#key-features",
            "depth": 2
          },
          {
            "value": "Get Started",
            "url": "#get-started",
            "depth": 2
          },
          {
            "value": "Join the Community",
            "url": "#join-the-community",
            "depth": 2
          }
        ],
        "structuredData": {
          "@context": "https://schema.org",
          "@type": "BlogPosting",
          "headline": "Introducing Intel LLM-on-Ray: A New Era for Large Language Models",
          "datePublished": "2023-12-09T00:00:00.000Z",
          "dateModified": "2023-12-09T00:00:00.000Z",
          "description": "Pretrain, finetune and serve LLMs on Intel platforms with Ray distributed framework.",
          "url": "https://zhangjian94cn.github.io/blog/llm-on-ray"
        }
      },
      "documentHash": "1770184136025",
      "hasWarnings": false,
      "documentTypeName": "Blog"
    },
    "blog/makefile-intro.mdx": {
      "document": {
        "title": "Makefile 入门指南",
        "date": "2022-12-06T00:00:00.000Z",
        "tags": [
          "编译",
          "Makefile",
          "C++"
        ],
        "draft": false,
        "summary": "Makefile 基础教程：理解 targets、prerequisites 和 commands，掌握增量编译核心原理。",
        "authors": [
          "default"
        ],
        "body": {
          "raw": "\n本文是对 [Makefile Cookbook](https://makefiletutorial.com/#makefile-cookbook) 的简要翻译。\n\n## 为什么需要 Makefile\n\nMakefile 用于决定一个大型程序的哪一部分需要被重新编译。在大部分情况下，其被用来编译 C 或 C++ 文件。其他语言通常有自己的工具，其用途与 make 类似。\n\n## 运行样例\n\n让我们运行一个最简单的样例：新建文件夹，在其中创建 `Makefile` 文件：\n\n> **需要注意：makefile 中必须使用 tab 进行缩进**\n\n```makefile\nhello:\n\techo \"Hello, World\"\n```\n\n运行结果：\n\n```bash\n$ make\necho \"Hello, World\"\nHello, World\n```\n\n## Makefile 的语法\n\nMakefile 由一系列的 rule 构成，一个 rule 的范式如下：\n\n```makefile\ntargets: prerequisites\n\tcommand\n\tcommand\n\tcommand\n```\n\n- **targets**: 文件名，通过空格分隔。通常，一个 rule 只有一个 target\n- **commands**: 用于编译 targets 的指令，需要使用 tab 缩进\n- **prerequisites**: 也是文件名，代表\"运行命令时的依赖项\"\n\n## Make 的本质\n\n来看一个简单的例子：\n\n```makefile\nhello:\n\techo \"Hello, World\"\n\techo \"This line will always print, because the file hello does not exist.\"\n```\n\n让我们来运行 `make`。只要 **hello** 不存在，这些 command 就会运行，反之则不运行。\n\n需要认识到的是：**hello** 同时代表了 target hello 和 file hello，这两者的联系非常紧密。\n\n### 编译 C 文件示例\n\n创建 `blah.c`：\n\n```c\n// blah.c\nint main() { return 0; }\n```\n\n创建 `Makefile`：\n\n```makefile\nblah: blah.c\n\tcc blah.c -o blah\n```\n\n当运行 make 时，下面的步骤将会被执行：\n\n1. 第一个 target 将会被选中（默认 target）\n2. 检查 prerequisite `blah.c` 是否存在\n3. 决定是否需要运行此 target：只有当 `blah.c` 的文件修改时间在 `blah` 之后时才会运行\n\n这就是 **make 的本质**：当 prerequisites 在上次编译之后出现变化，就需要重新编译，反之则不需要。\n\n## 更多的例子\n\n下面的 `Makefile` 最终运行了 3 个 target：\n\n```makefile\nblah: blah.o\n\tcc blah.o -o blah # Runs third\n\nblah.o: blah.c\n\tcc -c blah.c -o blah.o # Runs second\n\nblah.c:\n\techo \"int main() { return 0; }\" > blah.c # Runs first\n```\n\n执行步骤：\n\n1. 首先选择 `blah` target\n2. `blah` 需要 `blah.o`，搜索 `blah.o` target\n3. `blah.o` 需要 `blah.c`，搜索 `blah.c` target\n4. `blah.c` 没有依赖，运行 echo\n5. 运行 `cc -c`\n6. 运行 `cc`\n7. 最终，`blah` 生成\n\n## Make Clean\n\nclean 的语法如下：\n\n```makefile\nsome_file:\n\ttouch some_file\n\nclean:\n\trm -f some_file\n```\n\n运行 `make clean` 时，clean 中的内容就会生效。\n\n## 变量\n\n变量只能是 strings，一般使用 `:=`：\n\n```makefile\nfiles := file1 file2\nsome_file: $(files)\n\techo \"Look at this variable: \" $(files)\n\ttouch some_file\n\nfile1:\n\ttouch file1\nfile2:\n\ttouch file2\n\nclean:\n\trm -f file1 file2 some_file\n```\n\n引用变量可以使用：`${}` 或 `$()`\n\n```makefile\nx := dude\n\nall:\n\techo $(x)\n\techo ${x}\n```\n",
          "code": "var Component=(()=>{var m=Object.create;var s=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var N=Object.getOwnPropertyNames;var k=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty;var g=(a,e)=>()=>(e||a((e={exports:{}}).exports,e),e.exports),f=(a,e)=>{for(var l in e)s(a,l,{get:e[l],enumerable:!0})},d=(a,e,l,i)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let c of N(e))!u.call(a,c)&&c!==l&&s(a,c,{get:()=>e[c],enumerable:!(i=p(e,c))||i.enumerable});return a};var b=(a,e,l)=>(l=a!=null?m(k(a)):{},d(e||!a||!a.__esModule?s(l,\"default\",{value:a,enumerable:!0}):l,a)),x=a=>d(s({},\"__esModule\",{value:!0}),a);var h=g((q,r)=>{r.exports=_jsx_runtime});var M={};f(M,{default:()=>t,frontmatter:()=>y});var n=b(h()),y={title:\"Makefile \\u5165\\u95E8\\u6307\\u5357\",date:\"2022-12-06\",tags:[\"\\u7F16\\u8BD1\",\"Makefile\",\"C++\"],draft:!1,summary:\"Makefile \\u57FA\\u7840\\u6559\\u7A0B\\uFF1A\\u7406\\u89E3 targets\\u3001prerequisites \\u548C commands\\uFF0C\\u638C\\u63E1\\u589E\\u91CF\\u7F16\\u8BD1\\u6838\\u5FC3\\u539F\\u7406\\u3002\",authors:[\"default\"]};function o(a){let e={a:\"a\",blockquote:\"blockquote\",code:\"code\",h2:\"h2\",h3:\"h3\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",ul:\"ul\",...a.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.p,{children:[\"\\u672C\\u6587\\u662F\\u5BF9 \",(0,n.jsx)(e.a,{href:\"https://makefiletutorial.com/#makefile-cookbook\",children:\"Makefile Cookbook\"}),\" \\u7684\\u7B80\\u8981\\u7FFB\\u8BD1\\u3002\"]}),`\n`,(0,n.jsxs)(e.h2,{id:\"\\u4E3A\\u4EC0\\u4E48\\u9700\\u8981-makefile\",className:\"content-header\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#\\u4E3A\\u4EC0\\u4E48\\u9700\\u8981-makefile\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u4E3A\\u4EC0\\u4E48\\u9700\\u8981 Makefile\"]}),`\n`,(0,n.jsx)(e.p,{children:\"Makefile \\u7528\\u4E8E\\u51B3\\u5B9A\\u4E00\\u4E2A\\u5927\\u578B\\u7A0B\\u5E8F\\u7684\\u54EA\\u4E00\\u90E8\\u5206\\u9700\\u8981\\u88AB\\u91CD\\u65B0\\u7F16\\u8BD1\\u3002\\u5728\\u5927\\u90E8\\u5206\\u60C5\\u51B5\\u4E0B\\uFF0C\\u5176\\u88AB\\u7528\\u6765\\u7F16\\u8BD1 C \\u6216 C++ \\u6587\\u4EF6\\u3002\\u5176\\u4ED6\\u8BED\\u8A00\\u901A\\u5E38\\u6709\\u81EA\\u5DF1\\u7684\\u5DE5\\u5177\\uFF0C\\u5176\\u7528\\u9014\\u4E0E make \\u7C7B\\u4F3C\\u3002\"}),`\n`,(0,n.jsxs)(e.h2,{id:\"\\u8FD0\\u884C\\u6837\\u4F8B\",className:\"content-header\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#\\u8FD0\\u884C\\u6837\\u4F8B\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u8FD0\\u884C\\u6837\\u4F8B\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u8BA9\\u6211\\u4EEC\\u8FD0\\u884C\\u4E00\\u4E2A\\u6700\\u7B80\\u5355\\u7684\\u6837\\u4F8B\\uFF1A\\u65B0\\u5EFA\\u6587\\u4EF6\\u5939\\uFF0C\\u5728\\u5176\\u4E2D\\u521B\\u5EFA \",(0,n.jsx)(e.code,{children:\"Makefile\"}),\" \\u6587\\u4EF6\\uFF1A\"]}),`\n`,(0,n.jsxs)(e.blockquote,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:\"\\u9700\\u8981\\u6CE8\\u610F\\uFF1Amakefile \\u4E2D\\u5FC5\\u987B\\u4F7F\\u7528 tab \\u8FDB\\u884C\\u7F29\\u8FDB\"})}),`\n`]}),`\n`,(0,n.jsx)(e.pre,{className:\"language-makefile\",children:(0,n.jsxs)(e.code,{className:\"language-makefile code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token target symbol\",children:\"hello\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"\techo \",(0,n.jsx)(e.span,{className:\"token string\",children:'\"Hello, World\"'}),`\n`]})]})}),`\n`,(0,n.jsx)(e.p,{children:\"\\u8FD0\\u884C\\u7ED3\\u679C\\uFF1A\"}),`\n`,(0,n.jsx)(e.pre,{className:\"language-bash\",children:(0,n.jsxs)(e.code,{className:\"language-bash code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"$ \",(0,n.jsx)(e.span,{className:\"token function\",children:\"make\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token builtin class-name\",children:\"echo\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:'\"Hello, World\"'}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`Hello, World\n`})]})}),`\n`,(0,n.jsxs)(e.h2,{id:\"makefile-\\u7684\\u8BED\\u6CD5\",className:\"content-header\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#makefile-\\u7684\\u8BED\\u6CD5\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Makefile \\u7684\\u8BED\\u6CD5\"]}),`\n`,(0,n.jsx)(e.p,{children:\"Makefile \\u7531\\u4E00\\u7CFB\\u5217\\u7684 rule \\u6784\\u6210\\uFF0C\\u4E00\\u4E2A rule \\u7684\\u8303\\u5F0F\\u5982\\u4E0B\\uFF1A\"}),`\n`,(0,n.jsx)(e.pre,{className:\"language-makefile\",children:(0,n.jsxs)(e.code,{className:\"language-makefile code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token target symbol\",children:\"targets\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),` prerequisites\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\tcommand\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\tcommand\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\tcommand\n`})]})}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"targets\"}),\": \\u6587\\u4EF6\\u540D\\uFF0C\\u901A\\u8FC7\\u7A7A\\u683C\\u5206\\u9694\\u3002\\u901A\\u5E38\\uFF0C\\u4E00\\u4E2A rule \\u53EA\\u6709\\u4E00\\u4E2A target\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"commands\"}),\": \\u7528\\u4E8E\\u7F16\\u8BD1 targets \\u7684\\u6307\\u4EE4\\uFF0C\\u9700\\u8981\\u4F7F\\u7528 tab \\u7F29\\u8FDB\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"prerequisites\"}),': \\u4E5F\\u662F\\u6587\\u4EF6\\u540D\\uFF0C\\u4EE3\\u8868\"\\u8FD0\\u884C\\u547D\\u4EE4\\u65F6\\u7684\\u4F9D\\u8D56\\u9879\"']}),`\n`]}),`\n`,(0,n.jsxs)(e.h2,{id:\"make-\\u7684\\u672C\\u8D28\",className:\"content-header\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#make-\\u7684\\u672C\\u8D28\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Make \\u7684\\u672C\\u8D28\"]}),`\n`,(0,n.jsx)(e.p,{children:\"\\u6765\\u770B\\u4E00\\u4E2A\\u7B80\\u5355\\u7684\\u4F8B\\u5B50\\uFF1A\"}),`\n`,(0,n.jsx)(e.pre,{className:\"language-makefile\",children:(0,n.jsxs)(e.code,{className:\"language-makefile code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token target symbol\",children:\"hello\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"\techo \",(0,n.jsx)(e.span,{className:\"token string\",children:'\"Hello, World\"'}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"\techo \",(0,n.jsx)(e.span,{className:\"token string\",children:'\"This line will always print, because the file hello does not exist.\"'}),`\n`]})]})}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u8BA9\\u6211\\u4EEC\\u6765\\u8FD0\\u884C \",(0,n.jsx)(e.code,{children:\"make\"}),\"\\u3002\\u53EA\\u8981 \",(0,n.jsx)(e.strong,{children:\"hello\"}),\" \\u4E0D\\u5B58\\u5728\\uFF0C\\u8FD9\\u4E9B command \\u5C31\\u4F1A\\u8FD0\\u884C\\uFF0C\\u53CD\\u4E4B\\u5219\\u4E0D\\u8FD0\\u884C\\u3002\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u9700\\u8981\\u8BA4\\u8BC6\\u5230\\u7684\\u662F\\uFF1A\",(0,n.jsx)(e.strong,{children:\"hello\"}),\" \\u540C\\u65F6\\u4EE3\\u8868\\u4E86 target hello \\u548C file hello\\uFF0C\\u8FD9\\u4E24\\u8005\\u7684\\u8054\\u7CFB\\u975E\\u5E38\\u7D27\\u5BC6\\u3002\"]}),`\n`,(0,n.jsxs)(e.h3,{id:\"\\u7F16\\u8BD1-c-\\u6587\\u4EF6\\u793A\\u4F8B\",className:\"content-header\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#\\u7F16\\u8BD1-c-\\u6587\\u4EF6\\u793A\\u4F8B\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u7F16\\u8BD1 C \\u6587\\u4EF6\\u793A\\u4F8B\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u521B\\u5EFA \",(0,n.jsx)(e.code,{children:\"blah.c\"}),\"\\uFF1A\"]}),`\n`,(0,n.jsx)(e.pre,{className:\"language-c\",children:(0,n.jsxs)(e.code,{className:\"language-c code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"// blah.c\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"int\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"main\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"return\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"0\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u521B\\u5EFA \",(0,n.jsx)(e.code,{children:\"Makefile\"}),\"\\uFF1A\"]}),`\n`,(0,n.jsx)(e.pre,{className:\"language-makefile\",children:(0,n.jsxs)(e.code,{className:\"language-makefile code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token target symbol\",children:\"blah\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),` blah.c\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\tcc blah.c -o blah\n`})]})}),`\n`,(0,n.jsx)(e.p,{children:\"\\u5F53\\u8FD0\\u884C make \\u65F6\\uFF0C\\u4E0B\\u9762\\u7684\\u6B65\\u9AA4\\u5C06\\u4F1A\\u88AB\\u6267\\u884C\\uFF1A\"}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsx)(e.li,{children:\"\\u7B2C\\u4E00\\u4E2A target \\u5C06\\u4F1A\\u88AB\\u9009\\u4E2D\\uFF08\\u9ED8\\u8BA4 target\\uFF09\"}),`\n`,(0,n.jsxs)(e.li,{children:[\"\\u68C0\\u67E5 prerequisite \",(0,n.jsx)(e.code,{children:\"blah.c\"}),\" \\u662F\\u5426\\u5B58\\u5728\"]}),`\n`,(0,n.jsxs)(e.li,{children:[\"\\u51B3\\u5B9A\\u662F\\u5426\\u9700\\u8981\\u8FD0\\u884C\\u6B64 target\\uFF1A\\u53EA\\u6709\\u5F53 \",(0,n.jsx)(e.code,{children:\"blah.c\"}),\" \\u7684\\u6587\\u4EF6\\u4FEE\\u6539\\u65F6\\u95F4\\u5728 \",(0,n.jsx)(e.code,{children:\"blah\"}),\" \\u4E4B\\u540E\\u65F6\\u624D\\u4F1A\\u8FD0\\u884C\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u8FD9\\u5C31\\u662F \",(0,n.jsx)(e.strong,{children:\"make \\u7684\\u672C\\u8D28\"}),\"\\uFF1A\\u5F53 prerequisites \\u5728\\u4E0A\\u6B21\\u7F16\\u8BD1\\u4E4B\\u540E\\u51FA\\u73B0\\u53D8\\u5316\\uFF0C\\u5C31\\u9700\\u8981\\u91CD\\u65B0\\u7F16\\u8BD1\\uFF0C\\u53CD\\u4E4B\\u5219\\u4E0D\\u9700\\u8981\\u3002\"]}),`\n`,(0,n.jsxs)(e.h2,{id:\"\\u66F4\\u591A\\u7684\\u4F8B\\u5B50\",className:\"content-header\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#\\u66F4\\u591A\\u7684\\u4F8B\\u5B50\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u66F4\\u591A\\u7684\\u4F8B\\u5B50\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u4E0B\\u9762\\u7684 \",(0,n.jsx)(e.code,{children:\"Makefile\"}),\" \\u6700\\u7EC8\\u8FD0\\u884C\\u4E86 3 \\u4E2A target\\uFF1A\"]}),`\n`,(0,n.jsx)(e.pre,{className:\"language-makefile\",children:(0,n.jsxs)(e.code,{className:\"language-makefile code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token target symbol\",children:\"blah\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),` blah.o\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"\tcc blah.o -o blah \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"# Runs third\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token target symbol\",children:\"blah.o\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),` blah.c\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"\tcc -c blah.c -o blah.o \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"# Runs second\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token target symbol\",children:\"blah.c\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"\techo \",(0,n.jsx)(e.span,{className:\"token string\",children:'\"int main() { return 0; }\"'}),\" > blah.c \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"# Runs first\"}),`\n`]})]})}),`\n`,(0,n.jsx)(e.p,{children:\"\\u6267\\u884C\\u6B65\\u9AA4\\uFF1A\"}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[\"\\u9996\\u5148\\u9009\\u62E9 \",(0,n.jsx)(e.code,{children:\"blah\"}),\" target\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"blah\"}),\" \\u9700\\u8981 \",(0,n.jsx)(e.code,{children:\"blah.o\"}),\"\\uFF0C\\u641C\\u7D22 \",(0,n.jsx)(e.code,{children:\"blah.o\"}),\" target\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"blah.o\"}),\" \\u9700\\u8981 \",(0,n.jsx)(e.code,{children:\"blah.c\"}),\"\\uFF0C\\u641C\\u7D22 \",(0,n.jsx)(e.code,{children:\"blah.c\"}),\" target\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"blah.c\"}),\" \\u6CA1\\u6709\\u4F9D\\u8D56\\uFF0C\\u8FD0\\u884C echo\"]}),`\n`,(0,n.jsxs)(e.li,{children:[\"\\u8FD0\\u884C \",(0,n.jsx)(e.code,{children:\"cc -c\"})]}),`\n`,(0,n.jsxs)(e.li,{children:[\"\\u8FD0\\u884C \",(0,n.jsx)(e.code,{children:\"cc\"})]}),`\n`,(0,n.jsxs)(e.li,{children:[\"\\u6700\\u7EC8\\uFF0C\",(0,n.jsx)(e.code,{children:\"blah\"}),\" \\u751F\\u6210\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.h2,{id:\"make-clean\",className:\"content-header\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#make-clean\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Make Clean\"]}),`\n`,(0,n.jsx)(e.p,{children:\"clean \\u7684\\u8BED\\u6CD5\\u5982\\u4E0B\\uFF1A\"}),`\n`,(0,n.jsx)(e.pre,{className:\"language-makefile\",children:(0,n.jsxs)(e.code,{className:\"language-makefile code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token target symbol\",children:\"some_file\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\ttouch some_file\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token target symbol\",children:\"clean\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\trm -f some_file\n`})]})}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u8FD0\\u884C \",(0,n.jsx)(e.code,{children:\"make clean\"}),\" \\u65F6\\uFF0Cclean \\u4E2D\\u7684\\u5185\\u5BB9\\u5C31\\u4F1A\\u751F\\u6548\\u3002\"]}),`\n`,(0,n.jsxs)(e.h2,{id:\"\\u53D8\\u91CF\",className:\"content-header\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#\\u53D8\\u91CF\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u53D8\\u91CF\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u53D8\\u91CF\\u53EA\\u80FD\\u662F strings\\uFF0C\\u4E00\\u822C\\u4F7F\\u7528 \",(0,n.jsx)(e.code,{children:\":=\"}),\"\\uFF1A\"]}),`\n`,(0,n.jsx)(e.pre,{className:\"language-makefile\",children:(0,n.jsxs)(e.code,{className:\"language-makefile code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"files \",(0,n.jsx)(e.span,{className:\"token operator\",children:\":=\"}),` file1 file2\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token target symbol\",children:\"some_file\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token variable\",children:\"$\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"files\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"\techo \",(0,n.jsx)(e.span,{className:\"token string\",children:'\"Look at this variable: \"'}),\" \",(0,n.jsx)(e.span,{className:\"token variable\",children:\"$\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"files\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\ttouch some_file\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token target symbol\",children:\"file1\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\ttouch file1\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token target symbol\",children:\"file2\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\ttouch file2\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token target symbol\",children:\"clean\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\trm -f file1 file2 some_file\n`})]})}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u5F15\\u7528\\u53D8\\u91CF\\u53EF\\u4EE5\\u4F7F\\u7528\\uFF1A\",(0,n.jsx)(e.code,{children:\"${}\"}),\" \\u6216 \",(0,n.jsx)(e.code,{children:\"$()\"})]}),`\n`,(0,n.jsx)(e.pre,{className:\"language-makefile\",children:(0,n.jsxs)(e.code,{className:\"language-makefile code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"x \",(0,n.jsx)(e.span,{className:\"token operator\",children:\":=\"}),` dude\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token target symbol\",children:\"all\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"\techo \",(0,n.jsx)(e.span,{className:\"token variable\",children:\"$\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"x\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"\techo \",(0,n.jsx)(e.span,{className:\"token variable\",children:\"$\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\"x\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})})]})}function t(a={}){let{wrapper:e}=a.components||{};return e?(0,n.jsx)(e,{...a,children:(0,n.jsx)(o,{...a})}):o(a)}return x(M);})();\n;return Component;"
        },
        "_id": "blog/makefile-intro.mdx",
        "_raw": {
          "sourceFilePath": "blog/makefile-intro.mdx",
          "sourceFileName": "makefile-intro.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/makefile-intro"
        },
        "type": "Blog",
        "readingTime": {
          "text": "4 min read",
          "minutes": 3.19,
          "time": 191400,
          "words": 638
        },
        "slug": "makefile-intro",
        "path": "blog/makefile-intro",
        "toc": [
          {
            "value": "为什么需要 Makefile",
            "url": "#为什么需要-makefile",
            "depth": 2
          },
          {
            "value": "运行样例",
            "url": "#运行样例",
            "depth": 2
          },
          {
            "value": "Makefile 的语法",
            "url": "#makefile-的语法",
            "depth": 2
          },
          {
            "value": "Make 的本质",
            "url": "#make-的本质",
            "depth": 2
          },
          {
            "value": "编译 C 文件示例",
            "url": "#编译-c-文件示例",
            "depth": 3
          },
          {
            "value": "更多的例子",
            "url": "#更多的例子",
            "depth": 2
          },
          {
            "value": "Make Clean",
            "url": "#make-clean",
            "depth": 2
          },
          {
            "value": "变量",
            "url": "#变量",
            "depth": 2
          }
        ],
        "structuredData": {
          "@context": "https://schema.org",
          "@type": "BlogPosting",
          "headline": "Makefile 入门指南",
          "datePublished": "2022-12-06T00:00:00.000Z",
          "dateModified": "2022-12-06T00:00:00.000Z",
          "description": "Makefile 基础教程：理解 targets、prerequisites 和 commands，掌握增量编译核心原理。",
          "url": "https://zhangjian94cn.github.io/blog/makefile-intro"
        }
      },
      "documentHash": "1770184323128",
      "hasWarnings": false,
      "documentTypeName": "Blog"
    },
    "blog/multi-agent-autogen.mdx": {
      "document": {
        "title": "基于 AutoGen 的数智助手问答架构设计",
        "date": "2025-02-05T00:00:00.000Z",
        "tags": [
          "AI",
          "多智能体",
          "AutoGen",
          "架构设计"
        ],
        "draft": false,
        "summary": "深入探讨基于 AutoGen 框架的多智能体对话系统架构设计，包括意图理解、任务规划及 Deepseek R1 融合方案。",
        "authors": [
          "default"
        ],
        "body": {
          "raw": "\n## 🔍 整体架构设计\n\n> 💡 我们采用分层模块化的设计理念，构建了一个灵活可扩展的多智能体系统。这种设计不仅确保了系统的高可用性，也为未来的功能扩展提供了良好的基础。\n\n基于多智能体的架构设计采用分层模块化方案，主要包含以下核心组件：\n\n### 顶层控制模块\n\n1. **意图澄清Agent**：\n   - 采用规则模板+相似度匹配处理模糊问题，阈值低于0.8时触发澄清\n   - 结合用户画像和历史会话进行意图预测，准确率超过95%才确认\n   - 使用主动问答策略收集缺失信息，如套餐类型、使用场景等\n   - 进行初步意图分类，支持查询、办理、咨询等类型\n\n2. **意图理解Agent**：\n   - 使用NER（命名实体识别）技术识别业务实体（套餐名称、手机号码、时间等）\n   - 基于预定义规则模板进行意图匹配和分类\n   - 结合实体识别和规则匹配结果进行综合分析\n   - 输出标准化的意图理解结果（实体、类型、置信度）\n\n3. **任务规划Agent**：\n   - 基于DAG图构建任务执行流程，将复杂任务拆解为原子任务节点\n   - 使用优先级队列管理任务调度，支持动态调整执行顺序\n   - 采用状态机管理任务生命周期，包含待执行、执行中、完成、失败等状态\n   - 内置任务重试和异常处理机制，确保任务执行的可靠性\n\n### 业务执行模块\n\n系统根据不同业务场景划分为多个并行的业务处理单元，每个单元包含两层智能体：\n\n1. **意图识别Agent**：\n   - 基于澄清结果精确识别用户意图\n   - 基于上下文和历史交互智能推断用户真实意图\n   - 适配多个助手的意图识别，实现精准分发\n\n2. **业务逻辑Agent**：\n   - 执行具体的业务操作：处理用户查询、执行业务办理、提供智能推荐\n   - 负责与底层服务交互：调用业务接口、访问数据库、对接第三方系统\n   - 处理业务规则校验：权限验证、规则约束、异常处理\n\n## 🛠️ 智能体框架选型\n\n> 💡 框架选择关系到整个项目的成败，我们进行了深入的调研和分析。\n\n### 调研方法与过程\n\n我认为在评估智能体框架时，我们应该采取更加务实的调研方式。我们首先对市面上常见的智能体框架做了全面摸底，重点看了各个框架的使用情况、社区活跃度，以及实际落地案例。除此之外，我们也深入研究了每个框架的技术特点、性能表现和扩展能力。\n\n从业务角度来看，有几个关键点特别重要：首先是要能扛住大流量，其次是要能适应我们多样化的业务场景，最后是要保证稳定性和安全性。\n\n### 为什么选择 AutoGen\n\n经过反复比较和讨论，我们觉得 AutoGen 是最适合的选择：\n\n- **灵活的 API 设计**：工具链也很完善，对快速开发业务很有帮助\n- **多语言支持**：支持多种编程语言，插件机制也很强大\n- **微软背书**：有微软在背后支持，框架的未来发展更有保障\n\n### 框架对比\n\n| 框架名称             | 描述                       | 优势                                |\n| -------------------- | -------------------------- | ----------------------------------- |\n| **AutoGen**          | 微软开源的新一代智能体框架 | 多层次API、强大插件系统、跨语言支持 |\n| **LangChain Agents** | 模块化的大语言模型应用框架 | 高度模块化、生态完善、社区活跃      |\n| **Qwen-Agent**       | 通义千问开源的智能体框架   | 中文理解能力强、工具调用丰富        |\n| **BabyAGI**          | 轻量级自主智能体框架       | 轻量、简单、低门槛                  |\n\n## 🧠 Deepseek R1 融合\n\n为了进一步提升系统的语义理解和意图解析能力，我们计划引入 Deepseek R1 模型，并将其与现有的多智能体架构深度融合。\n\n### 集成方案：基于深度思考过程的认知迭代\n\n在原有意图澄清与理解模块的基础上，我们进一步提取 Deepseek R1 模型内部的思考过程（chain-of-thought），并在此过程中调用知识库进行信息补充与反馈。\n\n整体流程如下：\n\n1. **初步解析与思考**：调用 Deepseek R1 模型进行初步语义解析，并提取模型内部生成的思考过程\n2. **知识库查询**：利用初步生成的思考过程作为查询条件，获取相关的背景知识和数据补充\n3. **融合与迭代优化**：将知识库返回的信息与原始思考过程进行融合，经过多轮迭代逐步收敛\n\n**示例代码：**\n\n```python\ndef deepseek_iterative_analysis(user_input, max_iterations=3):\n    # 第一步：调用 Deepseek R1 生成初步解析结果和内部思考过程\n    initial_result = deepseek_r1_api(user_input, mode=\"chain-of-thought\")\n\n    combined_input = initial_result[\"chain_of_thought\"]\n    for i in range(max_iterations):\n        # 1. 主动查询知识库获取相关信息\n        kb_info = query_knowledge_base(combined_input)\n\n        # 2. 让知识库根据当前思考状态推送补充信息\n        kb_suggestions = knowledge_base_suggestions(combined_input)\n\n        # 3. 合并两种知识来源\n        enriched_knowledge = merge_knowledge(kb_info, kb_suggestions)\n\n        # 迭代优化\n        refined_result = deepseek_r1_api(input_for_refinement, mode=\"iterative-refinement\")\n\n        if has_converged(combined_input):\n            break\n\n    return {\"final_intent\": refined_result.get(\"result\")}\n```\n\n### 场景案例：套餐推荐优化\n\n> 🔍 用户咨询：\"我想给父母换个套餐，他们每月通话时长200分钟左右，偶尔刷视频，主要是和家人视频通话，预算150元以内。\"\n\n**传统向量检索模式**：\n\n- 提取关键词：\"通话时长200分钟\"、\"视频通话\"、\"150元\"\n- 向量检索匹配相似套餐\n- 缺乏场景理解，无法理解\"父母\"这类用户特征\n\n**Deepseek R1 思维链模式**：\n\n1. **用户画像解析**：老年群体(父母)、以通话为主、预算敏感\n2. **需求分层**：核心需求(通话约200分钟)、次要需求(视频通话流量)、价格上限(150元)\n3. **套餐匹配逻辑**：优先考虑老年专属套餐、通话时长满足需求\n4. **个性化建议**：推荐开通亲情网、建议设置流量提醒\n\n### 融合优势与效果展望\n\n- **准确性提升**：深层语义解析有助于显著提高意图和实体识别的准确率\n- **决策支持**：融合后的解析结果可为任务规划和后续处理提供更可靠的语义信息\n- **模块灵活性**：无论是作为现有 Agent 的增强，还是独立智能体存在，Deepseek R1 模型均可以根据业务需求灵活调度\n\n未来，我们将持续监控 Deepseek R1 模型在实际场景下的表现，并根据用户反馈不断优化融合策略。\n",
          "code": "var Component=(()=>{var p=Object.create;var i=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var N=Object.getPrototypeOf,k=Object.prototype.hasOwnProperty;var g=(a,n)=>()=>(n||a((n={exports:{}}).exports,n),n.exports),_=(a,n)=>{for(var c in n)i(a,c,{get:n[c],enumerable:!0})},r=(a,n,c,s)=>{if(n&&typeof n==\"object\"||typeof n==\"function\")for(let l of u(n))!k.call(a,l)&&l!==c&&i(a,l,{get:()=>n[l],enumerable:!(s=m(n,l))||s.enumerable});return a};var b=(a,n,c)=>(c=a!=null?p(N(a)):{},r(n||!a||!a.__esModule?i(c,\"default\",{value:a,enumerable:!0}):c,a)),f=a=>r(i({},\"__esModule\",{value:!0}),a);var t=g((I,d)=>{d.exports=_jsx_runtime});var A={};_(A,{default:()=>o,frontmatter:()=>x});var e=b(t()),x={title:\"\\u57FA\\u4E8E AutoGen \\u7684\\u6570\\u667A\\u52A9\\u624B\\u95EE\\u7B54\\u67B6\\u6784\\u8BBE\\u8BA1\",date:\"2025-02-05\",tags:[\"AI\",\"\\u591A\\u667A\\u80FD\\u4F53\",\"AutoGen\",\"\\u67B6\\u6784\\u8BBE\\u8BA1\"],draft:!1,summary:\"\\u6DF1\\u5165\\u63A2\\u8BA8\\u57FA\\u4E8E AutoGen \\u6846\\u67B6\\u7684\\u591A\\u667A\\u80FD\\u4F53\\u5BF9\\u8BDD\\u7CFB\\u7EDF\\u67B6\\u6784\\u8BBE\\u8BA1\\uFF0C\\u5305\\u62EC\\u610F\\u56FE\\u7406\\u89E3\\u3001\\u4EFB\\u52A1\\u89C4\\u5212\\u53CA Deepseek R1 \\u878D\\u5408\\u65B9\\u6848\\u3002\",authors:[\"default\"]};function h(a){let n={a:\"a\",blockquote:\"blockquote\",code:\"code\",h2:\"h2\",h3:\"h3\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",table:\"table\",tbody:\"tbody\",td:\"td\",th:\"th\",thead:\"thead\",tr:\"tr\",ul:\"ul\",...a.components};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(n.h2,{id:\"-\\u6574\\u4F53\\u67B6\\u6784\\u8BBE\\u8BA1\",className:\"content-header\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#-\\u6574\\u4F53\\u67B6\\u6784\\u8BBE\\u8BA1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u{1F50D} \\u6574\\u4F53\\u67B6\\u6784\\u8BBE\\u8BA1\"]}),`\n`,(0,e.jsxs)(n.blockquote,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u{1F4A1} \\u6211\\u4EEC\\u91C7\\u7528\\u5206\\u5C42\\u6A21\\u5757\\u5316\\u7684\\u8BBE\\u8BA1\\u7406\\u5FF5\\uFF0C\\u6784\\u5EFA\\u4E86\\u4E00\\u4E2A\\u7075\\u6D3B\\u53EF\\u6269\\u5C55\\u7684\\u591A\\u667A\\u80FD\\u4F53\\u7CFB\\u7EDF\\u3002\\u8FD9\\u79CD\\u8BBE\\u8BA1\\u4E0D\\u4EC5\\u786E\\u4FDD\\u4E86\\u7CFB\\u7EDF\\u7684\\u9AD8\\u53EF\\u7528\\u6027\\uFF0C\\u4E5F\\u4E3A\\u672A\\u6765\\u7684\\u529F\\u80FD\\u6269\\u5C55\\u63D0\\u4F9B\\u4E86\\u826F\\u597D\\u7684\\u57FA\\u7840\\u3002\"}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u57FA\\u4E8E\\u591A\\u667A\\u80FD\\u4F53\\u7684\\u67B6\\u6784\\u8BBE\\u8BA1\\u91C7\\u7528\\u5206\\u5C42\\u6A21\\u5757\\u5316\\u65B9\\u6848\\uFF0C\\u4E3B\\u8981\\u5305\\u542B\\u4EE5\\u4E0B\\u6838\\u5FC3\\u7EC4\\u4EF6\\uFF1A\"}),`\n`,(0,e.jsxs)(n.h3,{id:\"\\u9876\\u5C42\\u63A7\\u5236\\u6A21\\u5757\",className:\"content-header\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#\\u9876\\u5C42\\u63A7\\u5236\\u6A21\\u5757\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u9876\\u5C42\\u63A7\\u5236\\u6A21\\u5757\"]}),`\n`,(0,e.jsxs)(n.ol,{children:[`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:\"\\u610F\\u56FE\\u6F84\\u6E05Agent\"}),\"\\uFF1A\"]}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:\"\\u91C7\\u7528\\u89C4\\u5219\\u6A21\\u677F+\\u76F8\\u4F3C\\u5EA6\\u5339\\u914D\\u5904\\u7406\\u6A21\\u7CCA\\u95EE\\u9898\\uFF0C\\u9608\\u503C\\u4F4E\\u4E8E0.8\\u65F6\\u89E6\\u53D1\\u6F84\\u6E05\"}),`\n`,(0,e.jsx)(n.li,{children:\"\\u7ED3\\u5408\\u7528\\u6237\\u753B\\u50CF\\u548C\\u5386\\u53F2\\u4F1A\\u8BDD\\u8FDB\\u884C\\u610F\\u56FE\\u9884\\u6D4B\\uFF0C\\u51C6\\u786E\\u7387\\u8D85\\u8FC795%\\u624D\\u786E\\u8BA4\"}),`\n`,(0,e.jsx)(n.li,{children:\"\\u4F7F\\u7528\\u4E3B\\u52A8\\u95EE\\u7B54\\u7B56\\u7565\\u6536\\u96C6\\u7F3A\\u5931\\u4FE1\\u606F\\uFF0C\\u5982\\u5957\\u9910\\u7C7B\\u578B\\u3001\\u4F7F\\u7528\\u573A\\u666F\\u7B49\"}),`\n`,(0,e.jsx)(n.li,{children:\"\\u8FDB\\u884C\\u521D\\u6B65\\u610F\\u56FE\\u5206\\u7C7B\\uFF0C\\u652F\\u6301\\u67E5\\u8BE2\\u3001\\u529E\\u7406\\u3001\\u54A8\\u8BE2\\u7B49\\u7C7B\\u578B\"}),`\n`]}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:\"\\u610F\\u56FE\\u7406\\u89E3Agent\"}),\"\\uFF1A\"]}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:\"\\u4F7F\\u7528NER\\uFF08\\u547D\\u540D\\u5B9E\\u4F53\\u8BC6\\u522B\\uFF09\\u6280\\u672F\\u8BC6\\u522B\\u4E1A\\u52A1\\u5B9E\\u4F53\\uFF08\\u5957\\u9910\\u540D\\u79F0\\u3001\\u624B\\u673A\\u53F7\\u7801\\u3001\\u65F6\\u95F4\\u7B49\\uFF09\"}),`\n`,(0,e.jsx)(n.li,{children:\"\\u57FA\\u4E8E\\u9884\\u5B9A\\u4E49\\u89C4\\u5219\\u6A21\\u677F\\u8FDB\\u884C\\u610F\\u56FE\\u5339\\u914D\\u548C\\u5206\\u7C7B\"}),`\n`,(0,e.jsx)(n.li,{children:\"\\u7ED3\\u5408\\u5B9E\\u4F53\\u8BC6\\u522B\\u548C\\u89C4\\u5219\\u5339\\u914D\\u7ED3\\u679C\\u8FDB\\u884C\\u7EFC\\u5408\\u5206\\u6790\"}),`\n`,(0,e.jsx)(n.li,{children:\"\\u8F93\\u51FA\\u6807\\u51C6\\u5316\\u7684\\u610F\\u56FE\\u7406\\u89E3\\u7ED3\\u679C\\uFF08\\u5B9E\\u4F53\\u3001\\u7C7B\\u578B\\u3001\\u7F6E\\u4FE1\\u5EA6\\uFF09\"}),`\n`]}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:\"\\u4EFB\\u52A1\\u89C4\\u5212Agent\"}),\"\\uFF1A\"]}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:\"\\u57FA\\u4E8EDAG\\u56FE\\u6784\\u5EFA\\u4EFB\\u52A1\\u6267\\u884C\\u6D41\\u7A0B\\uFF0C\\u5C06\\u590D\\u6742\\u4EFB\\u52A1\\u62C6\\u89E3\\u4E3A\\u539F\\u5B50\\u4EFB\\u52A1\\u8282\\u70B9\"}),`\n`,(0,e.jsx)(n.li,{children:\"\\u4F7F\\u7528\\u4F18\\u5148\\u7EA7\\u961F\\u5217\\u7BA1\\u7406\\u4EFB\\u52A1\\u8C03\\u5EA6\\uFF0C\\u652F\\u6301\\u52A8\\u6001\\u8C03\\u6574\\u6267\\u884C\\u987A\\u5E8F\"}),`\n`,(0,e.jsx)(n.li,{children:\"\\u91C7\\u7528\\u72B6\\u6001\\u673A\\u7BA1\\u7406\\u4EFB\\u52A1\\u751F\\u547D\\u5468\\u671F\\uFF0C\\u5305\\u542B\\u5F85\\u6267\\u884C\\u3001\\u6267\\u884C\\u4E2D\\u3001\\u5B8C\\u6210\\u3001\\u5931\\u8D25\\u7B49\\u72B6\\u6001\"}),`\n`,(0,e.jsx)(n.li,{children:\"\\u5185\\u7F6E\\u4EFB\\u52A1\\u91CD\\u8BD5\\u548C\\u5F02\\u5E38\\u5904\\u7406\\u673A\\u5236\\uFF0C\\u786E\\u4FDD\\u4EFB\\u52A1\\u6267\\u884C\\u7684\\u53EF\\u9760\\u6027\"}),`\n`]}),`\n`]}),`\n`]}),`\n`,(0,e.jsxs)(n.h3,{id:\"\\u4E1A\\u52A1\\u6267\\u884C\\u6A21\\u5757\",className:\"content-header\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#\\u4E1A\\u52A1\\u6267\\u884C\\u6A21\\u5757\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u4E1A\\u52A1\\u6267\\u884C\\u6A21\\u5757\"]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u7CFB\\u7EDF\\u6839\\u636E\\u4E0D\\u540C\\u4E1A\\u52A1\\u573A\\u666F\\u5212\\u5206\\u4E3A\\u591A\\u4E2A\\u5E76\\u884C\\u7684\\u4E1A\\u52A1\\u5904\\u7406\\u5355\\u5143\\uFF0C\\u6BCF\\u4E2A\\u5355\\u5143\\u5305\\u542B\\u4E24\\u5C42\\u667A\\u80FD\\u4F53\\uFF1A\"}),`\n`,(0,e.jsxs)(n.ol,{children:[`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:\"\\u610F\\u56FE\\u8BC6\\u522BAgent\"}),\"\\uFF1A\"]}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:\"\\u57FA\\u4E8E\\u6F84\\u6E05\\u7ED3\\u679C\\u7CBE\\u786E\\u8BC6\\u522B\\u7528\\u6237\\u610F\\u56FE\"}),`\n`,(0,e.jsx)(n.li,{children:\"\\u57FA\\u4E8E\\u4E0A\\u4E0B\\u6587\\u548C\\u5386\\u53F2\\u4EA4\\u4E92\\u667A\\u80FD\\u63A8\\u65AD\\u7528\\u6237\\u771F\\u5B9E\\u610F\\u56FE\"}),`\n`,(0,e.jsx)(n.li,{children:\"\\u9002\\u914D\\u591A\\u4E2A\\u52A9\\u624B\\u7684\\u610F\\u56FE\\u8BC6\\u522B\\uFF0C\\u5B9E\\u73B0\\u7CBE\\u51C6\\u5206\\u53D1\"}),`\n`]}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:\"\\u4E1A\\u52A1\\u903B\\u8F91Agent\"}),\"\\uFF1A\"]}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:\"\\u6267\\u884C\\u5177\\u4F53\\u7684\\u4E1A\\u52A1\\u64CD\\u4F5C\\uFF1A\\u5904\\u7406\\u7528\\u6237\\u67E5\\u8BE2\\u3001\\u6267\\u884C\\u4E1A\\u52A1\\u529E\\u7406\\u3001\\u63D0\\u4F9B\\u667A\\u80FD\\u63A8\\u8350\"}),`\n`,(0,e.jsx)(n.li,{children:\"\\u8D1F\\u8D23\\u4E0E\\u5E95\\u5C42\\u670D\\u52A1\\u4EA4\\u4E92\\uFF1A\\u8C03\\u7528\\u4E1A\\u52A1\\u63A5\\u53E3\\u3001\\u8BBF\\u95EE\\u6570\\u636E\\u5E93\\u3001\\u5BF9\\u63A5\\u7B2C\\u4E09\\u65B9\\u7CFB\\u7EDF\"}),`\n`,(0,e.jsx)(n.li,{children:\"\\u5904\\u7406\\u4E1A\\u52A1\\u89C4\\u5219\\u6821\\u9A8C\\uFF1A\\u6743\\u9650\\u9A8C\\u8BC1\\u3001\\u89C4\\u5219\\u7EA6\\u675F\\u3001\\u5F02\\u5E38\\u5904\\u7406\"}),`\n`]}),`\n`]}),`\n`]}),`\n`,(0,e.jsxs)(n.h2,{id:\"\\uFE0F-\\u667A\\u80FD\\u4F53\\u6846\\u67B6\\u9009\\u578B\",className:\"content-header\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#\\uFE0F-\\u667A\\u80FD\\u4F53\\u6846\\u67B6\\u9009\\u578B\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u{1F6E0}\\uFE0F \\u667A\\u80FD\\u4F53\\u6846\\u67B6\\u9009\\u578B\"]}),`\n`,(0,e.jsxs)(n.blockquote,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u{1F4A1} \\u6846\\u67B6\\u9009\\u62E9\\u5173\\u7CFB\\u5230\\u6574\\u4E2A\\u9879\\u76EE\\u7684\\u6210\\u8D25\\uFF0C\\u6211\\u4EEC\\u8FDB\\u884C\\u4E86\\u6DF1\\u5165\\u7684\\u8C03\\u7814\\u548C\\u5206\\u6790\\u3002\"}),`\n`]}),`\n`,(0,e.jsxs)(n.h3,{id:\"\\u8C03\\u7814\\u65B9\\u6CD5\\u4E0E\\u8FC7\\u7A0B\",className:\"content-header\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#\\u8C03\\u7814\\u65B9\\u6CD5\\u4E0E\\u8FC7\\u7A0B\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u8C03\\u7814\\u65B9\\u6CD5\\u4E0E\\u8FC7\\u7A0B\"]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u6211\\u8BA4\\u4E3A\\u5728\\u8BC4\\u4F30\\u667A\\u80FD\\u4F53\\u6846\\u67B6\\u65F6\\uFF0C\\u6211\\u4EEC\\u5E94\\u8BE5\\u91C7\\u53D6\\u66F4\\u52A0\\u52A1\\u5B9E\\u7684\\u8C03\\u7814\\u65B9\\u5F0F\\u3002\\u6211\\u4EEC\\u9996\\u5148\\u5BF9\\u5E02\\u9762\\u4E0A\\u5E38\\u89C1\\u7684\\u667A\\u80FD\\u4F53\\u6846\\u67B6\\u505A\\u4E86\\u5168\\u9762\\u6478\\u5E95\\uFF0C\\u91CD\\u70B9\\u770B\\u4E86\\u5404\\u4E2A\\u6846\\u67B6\\u7684\\u4F7F\\u7528\\u60C5\\u51B5\\u3001\\u793E\\u533A\\u6D3B\\u8DC3\\u5EA6\\uFF0C\\u4EE5\\u53CA\\u5B9E\\u9645\\u843D\\u5730\\u6848\\u4F8B\\u3002\\u9664\\u6B64\\u4E4B\\u5916\\uFF0C\\u6211\\u4EEC\\u4E5F\\u6DF1\\u5165\\u7814\\u7A76\\u4E86\\u6BCF\\u4E2A\\u6846\\u67B6\\u7684\\u6280\\u672F\\u7279\\u70B9\\u3001\\u6027\\u80FD\\u8868\\u73B0\\u548C\\u6269\\u5C55\\u80FD\\u529B\\u3002\"}),`\n`,(0,e.jsx)(n.p,{children:\"\\u4ECE\\u4E1A\\u52A1\\u89D2\\u5EA6\\u6765\\u770B\\uFF0C\\u6709\\u51E0\\u4E2A\\u5173\\u952E\\u70B9\\u7279\\u522B\\u91CD\\u8981\\uFF1A\\u9996\\u5148\\u662F\\u8981\\u80FD\\u625B\\u4F4F\\u5927\\u6D41\\u91CF\\uFF0C\\u5176\\u6B21\\u662F\\u8981\\u80FD\\u9002\\u5E94\\u6211\\u4EEC\\u591A\\u6837\\u5316\\u7684\\u4E1A\\u52A1\\u573A\\u666F\\uFF0C\\u6700\\u540E\\u662F\\u8981\\u4FDD\\u8BC1\\u7A33\\u5B9A\\u6027\\u548C\\u5B89\\u5168\\u6027\\u3002\"}),`\n`,(0,e.jsxs)(n.h3,{id:\"\\u4E3A\\u4EC0\\u4E48\\u9009\\u62E9-autogen\",className:\"content-header\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#\\u4E3A\\u4EC0\\u4E48\\u9009\\u62E9-autogen\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u4E3A\\u4EC0\\u4E48\\u9009\\u62E9 AutoGen\"]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u7ECF\\u8FC7\\u53CD\\u590D\\u6BD4\\u8F83\\u548C\\u8BA8\\u8BBA\\uFF0C\\u6211\\u4EEC\\u89C9\\u5F97 AutoGen \\u662F\\u6700\\u9002\\u5408\\u7684\\u9009\\u62E9\\uFF1A\"}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"\\u7075\\u6D3B\\u7684 API \\u8BBE\\u8BA1\"}),\"\\uFF1A\\u5DE5\\u5177\\u94FE\\u4E5F\\u5F88\\u5B8C\\u5584\\uFF0C\\u5BF9\\u5FEB\\u901F\\u5F00\\u53D1\\u4E1A\\u52A1\\u5F88\\u6709\\u5E2E\\u52A9\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"\\u591A\\u8BED\\u8A00\\u652F\\u6301\"}),\"\\uFF1A\\u652F\\u6301\\u591A\\u79CD\\u7F16\\u7A0B\\u8BED\\u8A00\\uFF0C\\u63D2\\u4EF6\\u673A\\u5236\\u4E5F\\u5F88\\u5F3A\\u5927\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"\\u5FAE\\u8F6F\\u80CC\\u4E66\"}),\"\\uFF1A\\u6709\\u5FAE\\u8F6F\\u5728\\u80CC\\u540E\\u652F\\u6301\\uFF0C\\u6846\\u67B6\\u7684\\u672A\\u6765\\u53D1\\u5C55\\u66F4\\u6709\\u4FDD\\u969C\"]}),`\n`]}),`\n`,(0,e.jsxs)(n.h3,{id:\"\\u6846\\u67B6\\u5BF9\\u6BD4\",className:\"content-header\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#\\u6846\\u67B6\\u5BF9\\u6BD4\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u6846\\u67B6\\u5BF9\\u6BD4\"]}),`\n`,(0,e.jsxs)(n.table,{children:[(0,e.jsx)(n.thead,{children:(0,e.jsxs)(n.tr,{children:[(0,e.jsx)(n.th,{children:\"\\u6846\\u67B6\\u540D\\u79F0\"}),(0,e.jsx)(n.th,{children:\"\\u63CF\\u8FF0\"}),(0,e.jsx)(n.th,{children:\"\\u4F18\\u52BF\"})]})}),(0,e.jsxs)(n.tbody,{children:[(0,e.jsxs)(n.tr,{children:[(0,e.jsx)(n.td,{children:(0,e.jsx)(n.strong,{children:\"AutoGen\"})}),(0,e.jsx)(n.td,{children:\"\\u5FAE\\u8F6F\\u5F00\\u6E90\\u7684\\u65B0\\u4E00\\u4EE3\\u667A\\u80FD\\u4F53\\u6846\\u67B6\"}),(0,e.jsx)(n.td,{children:\"\\u591A\\u5C42\\u6B21API\\u3001\\u5F3A\\u5927\\u63D2\\u4EF6\\u7CFB\\u7EDF\\u3001\\u8DE8\\u8BED\\u8A00\\u652F\\u6301\"})]}),(0,e.jsxs)(n.tr,{children:[(0,e.jsx)(n.td,{children:(0,e.jsx)(n.strong,{children:\"LangChain Agents\"})}),(0,e.jsx)(n.td,{children:\"\\u6A21\\u5757\\u5316\\u7684\\u5927\\u8BED\\u8A00\\u6A21\\u578B\\u5E94\\u7528\\u6846\\u67B6\"}),(0,e.jsx)(n.td,{children:\"\\u9AD8\\u5EA6\\u6A21\\u5757\\u5316\\u3001\\u751F\\u6001\\u5B8C\\u5584\\u3001\\u793E\\u533A\\u6D3B\\u8DC3\"})]}),(0,e.jsxs)(n.tr,{children:[(0,e.jsx)(n.td,{children:(0,e.jsx)(n.strong,{children:\"Qwen-Agent\"})}),(0,e.jsx)(n.td,{children:\"\\u901A\\u4E49\\u5343\\u95EE\\u5F00\\u6E90\\u7684\\u667A\\u80FD\\u4F53\\u6846\\u67B6\"}),(0,e.jsx)(n.td,{children:\"\\u4E2D\\u6587\\u7406\\u89E3\\u80FD\\u529B\\u5F3A\\u3001\\u5DE5\\u5177\\u8C03\\u7528\\u4E30\\u5BCC\"})]}),(0,e.jsxs)(n.tr,{children:[(0,e.jsx)(n.td,{children:(0,e.jsx)(n.strong,{children:\"BabyAGI\"})}),(0,e.jsx)(n.td,{children:\"\\u8F7B\\u91CF\\u7EA7\\u81EA\\u4E3B\\u667A\\u80FD\\u4F53\\u6846\\u67B6\"}),(0,e.jsx)(n.td,{children:\"\\u8F7B\\u91CF\\u3001\\u7B80\\u5355\\u3001\\u4F4E\\u95E8\\u69DB\"})]})]})]}),`\n`,(0,e.jsxs)(n.h2,{id:\"-deepseek-r1-\\u878D\\u5408\",className:\"content-header\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#-deepseek-r1-\\u878D\\u5408\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u{1F9E0} Deepseek R1 \\u878D\\u5408\"]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u4E3A\\u4E86\\u8FDB\\u4E00\\u6B65\\u63D0\\u5347\\u7CFB\\u7EDF\\u7684\\u8BED\\u4E49\\u7406\\u89E3\\u548C\\u610F\\u56FE\\u89E3\\u6790\\u80FD\\u529B\\uFF0C\\u6211\\u4EEC\\u8BA1\\u5212\\u5F15\\u5165 Deepseek R1 \\u6A21\\u578B\\uFF0C\\u5E76\\u5C06\\u5176\\u4E0E\\u73B0\\u6709\\u7684\\u591A\\u667A\\u80FD\\u4F53\\u67B6\\u6784\\u6DF1\\u5EA6\\u878D\\u5408\\u3002\"}),`\n`,(0,e.jsxs)(n.h3,{id:\"\\u96C6\\u6210\\u65B9\\u6848\\u57FA\\u4E8E\\u6DF1\\u5EA6\\u601D\\u8003\\u8FC7\\u7A0B\\u7684\\u8BA4\\u77E5\\u8FED\\u4EE3\",className:\"content-header\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#\\u96C6\\u6210\\u65B9\\u6848\\u57FA\\u4E8E\\u6DF1\\u5EA6\\u601D\\u8003\\u8FC7\\u7A0B\\u7684\\u8BA4\\u77E5\\u8FED\\u4EE3\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u96C6\\u6210\\u65B9\\u6848\\uFF1A\\u57FA\\u4E8E\\u6DF1\\u5EA6\\u601D\\u8003\\u8FC7\\u7A0B\\u7684\\u8BA4\\u77E5\\u8FED\\u4EE3\"]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u5728\\u539F\\u6709\\u610F\\u56FE\\u6F84\\u6E05\\u4E0E\\u7406\\u89E3\\u6A21\\u5757\\u7684\\u57FA\\u7840\\u4E0A\\uFF0C\\u6211\\u4EEC\\u8FDB\\u4E00\\u6B65\\u63D0\\u53D6 Deepseek R1 \\u6A21\\u578B\\u5185\\u90E8\\u7684\\u601D\\u8003\\u8FC7\\u7A0B\\uFF08chain-of-thought\\uFF09\\uFF0C\\u5E76\\u5728\\u6B64\\u8FC7\\u7A0B\\u4E2D\\u8C03\\u7528\\u77E5\\u8BC6\\u5E93\\u8FDB\\u884C\\u4FE1\\u606F\\u8865\\u5145\\u4E0E\\u53CD\\u9988\\u3002\"}),`\n`,(0,e.jsx)(n.p,{children:\"\\u6574\\u4F53\\u6D41\\u7A0B\\u5982\\u4E0B\\uFF1A\"}),`\n`,(0,e.jsxs)(n.ol,{children:[`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"\\u521D\\u6B65\\u89E3\\u6790\\u4E0E\\u601D\\u8003\"}),\"\\uFF1A\\u8C03\\u7528 Deepseek R1 \\u6A21\\u578B\\u8FDB\\u884C\\u521D\\u6B65\\u8BED\\u4E49\\u89E3\\u6790\\uFF0C\\u5E76\\u63D0\\u53D6\\u6A21\\u578B\\u5185\\u90E8\\u751F\\u6210\\u7684\\u601D\\u8003\\u8FC7\\u7A0B\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"\\u77E5\\u8BC6\\u5E93\\u67E5\\u8BE2\"}),\"\\uFF1A\\u5229\\u7528\\u521D\\u6B65\\u751F\\u6210\\u7684\\u601D\\u8003\\u8FC7\\u7A0B\\u4F5C\\u4E3A\\u67E5\\u8BE2\\u6761\\u4EF6\\uFF0C\\u83B7\\u53D6\\u76F8\\u5173\\u7684\\u80CC\\u666F\\u77E5\\u8BC6\\u548C\\u6570\\u636E\\u8865\\u5145\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"\\u878D\\u5408\\u4E0E\\u8FED\\u4EE3\\u4F18\\u5316\"}),\"\\uFF1A\\u5C06\\u77E5\\u8BC6\\u5E93\\u8FD4\\u56DE\\u7684\\u4FE1\\u606F\\u4E0E\\u539F\\u59CB\\u601D\\u8003\\u8FC7\\u7A0B\\u8FDB\\u884C\\u878D\\u5408\\uFF0C\\u7ECF\\u8FC7\\u591A\\u8F6E\\u8FED\\u4EE3\\u9010\\u6B65\\u6536\\u655B\"]}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.strong,{children:\"\\u793A\\u4F8B\\u4EE3\\u7801\\uFF1A\"})}),`\n`,(0,e.jsx)(n.pre,{className:\"language-python\",children:(0,e.jsxs)(n.code,{className:\"language-python code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"def\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"deepseek_iterative_analysis\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"user_input\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" max_iterations\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"3\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"# \\u7B2C\\u4E00\\u6B65\\uFF1A\\u8C03\\u7528 Deepseek R1 \\u751F\\u6210\\u521D\\u6B65\\u89E3\\u6790\\u7ED3\\u679C\\u548C\\u5185\\u90E8\\u601D\\u8003\\u8FC7\\u7A0B\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    initial_result \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" deepseek_r1_api\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"user_input\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" mode\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:'\"chain-of-thought\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    combined_input \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" initial_result\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token string\",children:'\"chain_of_thought\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"for\"}),\" i \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"in\"}),\" \",(0,e.jsx)(n.span,{className:\"token builtin\",children:\"range\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"max_iterations\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"# 1. \\u4E3B\\u52A8\\u67E5\\u8BE2\\u77E5\\u8BC6\\u5E93\\u83B7\\u53D6\\u76F8\\u5173\\u4FE1\\u606F\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        kb_info \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" query_knowledge_base\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"combined_input\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"# 2. \\u8BA9\\u77E5\\u8BC6\\u5E93\\u6839\\u636E\\u5F53\\u524D\\u601D\\u8003\\u72B6\\u6001\\u63A8\\u9001\\u8865\\u5145\\u4FE1\\u606F\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        kb_suggestions \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" knowledge_base_suggestions\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"combined_input\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"# 3. \\u5408\\u5E76\\u4E24\\u79CD\\u77E5\\u8BC6\\u6765\\u6E90\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        enriched_knowledge \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" merge_knowledge\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"kb_info\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" kb_suggestions\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"# \\u8FED\\u4EE3\\u4F18\\u5316\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        refined_result \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" deepseek_r1_api\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"input_for_refinement\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" mode\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:'\"iterative-refinement\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"if\"}),\" has_converged\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"combined_input\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"            \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"break\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"return\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),(0,e.jsx)(n.span,{className:\"token string\",children:'\"final_intent\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" refined_result\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"get\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:'\"result\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,e.jsxs)(n.h3,{id:\"\\u573A\\u666F\\u6848\\u4F8B\\u5957\\u9910\\u63A8\\u8350\\u4F18\\u5316\",className:\"content-header\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#\\u573A\\u666F\\u6848\\u4F8B\\u5957\\u9910\\u63A8\\u8350\\u4F18\\u5316\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u573A\\u666F\\u6848\\u4F8B\\uFF1A\\u5957\\u9910\\u63A8\\u8350\\u4F18\\u5316\"]}),`\n`,(0,e.jsxs)(n.blockquote,{children:[`\n`,(0,e.jsx)(n.p,{children:'\\u{1F50D} \\u7528\\u6237\\u54A8\\u8BE2\\uFF1A\"\\u6211\\u60F3\\u7ED9\\u7236\\u6BCD\\u6362\\u4E2A\\u5957\\u9910\\uFF0C\\u4ED6\\u4EEC\\u6BCF\\u6708\\u901A\\u8BDD\\u65F6\\u957F200\\u5206\\u949F\\u5DE6\\u53F3\\uFF0C\\u5076\\u5C14\\u5237\\u89C6\\u9891\\uFF0C\\u4E3B\\u8981\\u662F\\u548C\\u5BB6\\u4EBA\\u89C6\\u9891\\u901A\\u8BDD\\uFF0C\\u9884\\u7B97150\\u5143\\u4EE5\\u5185\\u3002\"'}),`\n`]}),`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:\"\\u4F20\\u7EDF\\u5411\\u91CF\\u68C0\\u7D22\\u6A21\\u5F0F\"}),\"\\uFF1A\"]}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:'\\u63D0\\u53D6\\u5173\\u952E\\u8BCD\\uFF1A\"\\u901A\\u8BDD\\u65F6\\u957F200\\u5206\\u949F\"\\u3001\"\\u89C6\\u9891\\u901A\\u8BDD\"\\u3001\"150\\u5143\"'}),`\n`,(0,e.jsx)(n.li,{children:\"\\u5411\\u91CF\\u68C0\\u7D22\\u5339\\u914D\\u76F8\\u4F3C\\u5957\\u9910\"}),`\n`,(0,e.jsx)(n.li,{children:'\\u7F3A\\u4E4F\\u573A\\u666F\\u7406\\u89E3\\uFF0C\\u65E0\\u6CD5\\u7406\\u89E3\"\\u7236\\u6BCD\"\\u8FD9\\u7C7B\\u7528\\u6237\\u7279\\u5F81'}),`\n`]}),`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:\"Deepseek R1 \\u601D\\u7EF4\\u94FE\\u6A21\\u5F0F\"}),\"\\uFF1A\"]}),`\n`,(0,e.jsxs)(n.ol,{children:[`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"\\u7528\\u6237\\u753B\\u50CF\\u89E3\\u6790\"}),\"\\uFF1A\\u8001\\u5E74\\u7FA4\\u4F53(\\u7236\\u6BCD)\\u3001\\u4EE5\\u901A\\u8BDD\\u4E3A\\u4E3B\\u3001\\u9884\\u7B97\\u654F\\u611F\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"\\u9700\\u6C42\\u5206\\u5C42\"}),\"\\uFF1A\\u6838\\u5FC3\\u9700\\u6C42(\\u901A\\u8BDD\\u7EA6200\\u5206\\u949F)\\u3001\\u6B21\\u8981\\u9700\\u6C42(\\u89C6\\u9891\\u901A\\u8BDD\\u6D41\\u91CF)\\u3001\\u4EF7\\u683C\\u4E0A\\u9650(150\\u5143)\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"\\u5957\\u9910\\u5339\\u914D\\u903B\\u8F91\"}),\"\\uFF1A\\u4F18\\u5148\\u8003\\u8651\\u8001\\u5E74\\u4E13\\u5C5E\\u5957\\u9910\\u3001\\u901A\\u8BDD\\u65F6\\u957F\\u6EE1\\u8DB3\\u9700\\u6C42\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"\\u4E2A\\u6027\\u5316\\u5EFA\\u8BAE\"}),\"\\uFF1A\\u63A8\\u8350\\u5F00\\u901A\\u4EB2\\u60C5\\u7F51\\u3001\\u5EFA\\u8BAE\\u8BBE\\u7F6E\\u6D41\\u91CF\\u63D0\\u9192\"]}),`\n`]}),`\n`,(0,e.jsxs)(n.h3,{id:\"\\u878D\\u5408\\u4F18\\u52BF\\u4E0E\\u6548\\u679C\\u5C55\\u671B\",className:\"content-header\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#\\u878D\\u5408\\u4F18\\u52BF\\u4E0E\\u6548\\u679C\\u5C55\\u671B\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u878D\\u5408\\u4F18\\u52BF\\u4E0E\\u6548\\u679C\\u5C55\\u671B\"]}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"\\u51C6\\u786E\\u6027\\u63D0\\u5347\"}),\"\\uFF1A\\u6DF1\\u5C42\\u8BED\\u4E49\\u89E3\\u6790\\u6709\\u52A9\\u4E8E\\u663E\\u8457\\u63D0\\u9AD8\\u610F\\u56FE\\u548C\\u5B9E\\u4F53\\u8BC6\\u522B\\u7684\\u51C6\\u786E\\u7387\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"\\u51B3\\u7B56\\u652F\\u6301\"}),\"\\uFF1A\\u878D\\u5408\\u540E\\u7684\\u89E3\\u6790\\u7ED3\\u679C\\u53EF\\u4E3A\\u4EFB\\u52A1\\u89C4\\u5212\\u548C\\u540E\\u7EED\\u5904\\u7406\\u63D0\\u4F9B\\u66F4\\u53EF\\u9760\\u7684\\u8BED\\u4E49\\u4FE1\\u606F\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"\\u6A21\\u5757\\u7075\\u6D3B\\u6027\"}),\"\\uFF1A\\u65E0\\u8BBA\\u662F\\u4F5C\\u4E3A\\u73B0\\u6709 Agent \\u7684\\u589E\\u5F3A\\uFF0C\\u8FD8\\u662F\\u72EC\\u7ACB\\u667A\\u80FD\\u4F53\\u5B58\\u5728\\uFF0CDeepseek R1 \\u6A21\\u578B\\u5747\\u53EF\\u4EE5\\u6839\\u636E\\u4E1A\\u52A1\\u9700\\u6C42\\u7075\\u6D3B\\u8C03\\u5EA6\"]}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u672A\\u6765\\uFF0C\\u6211\\u4EEC\\u5C06\\u6301\\u7EED\\u76D1\\u63A7 Deepseek R1 \\u6A21\\u578B\\u5728\\u5B9E\\u9645\\u573A\\u666F\\u4E0B\\u7684\\u8868\\u73B0\\uFF0C\\u5E76\\u6839\\u636E\\u7528\\u6237\\u53CD\\u9988\\u4E0D\\u65AD\\u4F18\\u5316\\u878D\\u5408\\u7B56\\u7565\\u3002\"})]})}function o(a={}){let{wrapper:n}=a.components||{};return n?(0,e.jsx)(n,{...a,children:(0,e.jsx)(h,{...a})}):h(a)}return f(A);})();\n;return Component;"
        },
        "_id": "blog/multi-agent-autogen.mdx",
        "_raw": {
          "sourceFilePath": "blog/multi-agent-autogen.mdx",
          "sourceFileName": "multi-agent-autogen.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/multi-agent-autogen"
        },
        "type": "Blog",
        "readingTime": {
          "text": "9 min read",
          "minutes": 8.715,
          "time": 522900,
          "words": 1743
        },
        "slug": "multi-agent-autogen",
        "path": "blog/multi-agent-autogen",
        "toc": [
          {
            "value": "🔍 整体架构设计",
            "url": "#-整体架构设计",
            "depth": 2
          },
          {
            "value": "顶层控制模块",
            "url": "#顶层控制模块",
            "depth": 3
          },
          {
            "value": "业务执行模块",
            "url": "#业务执行模块",
            "depth": 3
          },
          {
            "value": "🛠️ 智能体框架选型",
            "url": "#️-智能体框架选型",
            "depth": 2
          },
          {
            "value": "调研方法与过程",
            "url": "#调研方法与过程",
            "depth": 3
          },
          {
            "value": "为什么选择 AutoGen",
            "url": "#为什么选择-autogen",
            "depth": 3
          },
          {
            "value": "框架对比",
            "url": "#框架对比",
            "depth": 3
          },
          {
            "value": "🧠 Deepseek R1 融合",
            "url": "#-deepseek-r1-融合",
            "depth": 2
          },
          {
            "value": "集成方案：基于深度思考过程的认知迭代",
            "url": "#集成方案基于深度思考过程的认知迭代",
            "depth": 3
          },
          {
            "value": "场景案例：套餐推荐优化",
            "url": "#场景案例套餐推荐优化",
            "depth": 3
          },
          {
            "value": "融合优势与效果展望",
            "url": "#融合优势与效果展望",
            "depth": 3
          }
        ],
        "structuredData": {
          "@context": "https://schema.org",
          "@type": "BlogPosting",
          "headline": "基于 AutoGen 的数智助手问答架构设计",
          "datePublished": "2025-02-05T00:00:00.000Z",
          "dateModified": "2025-02-05T00:00:00.000Z",
          "description": "深入探讨基于 AutoGen 框架的多智能体对话系统架构设计，包括意图理解、任务规划及 Deepseek R1 融合方案。",
          "url": "https://zhangjian94cn.github.io/blog/multi-agent-autogen"
        }
      },
      "documentHash": "1770184406752",
      "hasWarnings": false,
      "documentTypeName": "Blog"
    },
    "blog/onedal-intro.mdx": {
      "document": {
        "title": "oneDAL 入门指南",
        "date": "2022-12-14T00:00:00.000Z",
        "tags": [
          "机器学习",
          "oneDAL",
          "Intel"
        ],
        "draft": false,
        "summary": "Intel oneDAL 高性能数据分析库入门：介绍 oneDAL 的基本概念、安装方法及示例编译运行。",
        "authors": [
          "default"
        ],
        "body": {
          "raw": "\n> 本文是对 oneDAL 的一个简单介绍，主要参考 [onedal 官方文档](https://oneapi-src.github.io/oneDAL/index.html)\n\n## 简介\n\noneDAL 是一个高性能的数据分析库，其包含了数据分析的所有阶段（preprocessing, transformation, analysis, modeling, validation, and decision making）。oneDAL 支持批量、在线以及分布式的计算模式，主要提供两组 C++ 接口：\n\n- **oneAPI Interfaces**：基于开放的 oneDAL 规范，目前正在积极开发中，可以在各种硬件上工作\n- **DAAL Interfaces**：仅限于 CPU 的接口，提供了各种算法的实现\n\n## 安装\n\n### oneAPI\n\n安装 oneDAL 需要的 oneAPI 依赖，包括 intel-basekit intel-hpckit：\n\n```bash\napt-get install -y --no-install-recommends curl ca-certificates gpg-agent software-properties-common\n\n# download the key to system keyring\nwget -O- https://apt.repos.intel.com/intel-gpg-keys/GPG-PUB-KEY-INTEL-SW-PRODUCTS.PUB | \\\n  gpg --dearmor | tee /usr/share/keyrings/oneapi-archive-keyring.gpg > /dev/null\n\n# add signed entry to apt sources\necho \"deb [signed-by=/usr/share/keyrings/oneapi-archive-keyring.gpg] https://apt.repos.intel.com/oneapi all main\" | \\\n  tee /etc/apt/sources.list.d/oneAPI.list\n\napt update && apt install intel-basekit intel-hpckit -y\n\necho \"source /opt/intel/oneapi/compiler/latest/env/vars.sh\" >> ~/.bashrc\necho \"source /opt/intel/oneapi/tbb/latest/env/vars.sh\" >> ~/.bashrc\nsource ~/.bashrc\n```\n\n### oneDAL\n\n如果想从源码编译 oneDAL，官网提供了在不同系统环境下的 [安装教程](https://github.com/oneapi-src/oneDAL/blob/master/INSTALL.md)\n\n## 例程\n\n### 编译运行\n\noneDAL 提供了两种方式编译 example：使用 cmake 或者 make。\n\n#### 使用 make\n\n如果你已经添加了 tbb、icc 等的环境变量，可以直接 make 得到可执行文件：\n\n```bash\nsource /opt/intel/oneapi/compiler/latest/env/vars.sh\nsource /opt/intel/oneapi/tbb/latest/env/vars.sh\n```\n\n#### 使用 cmake\n\n在使用 cmake 前，先设置 cmake 使用的编译器，在 CMakeLists.txt 下添加：\n\n```cmake\nSET(CMAKE_C_COMPILER \"icc\")\nSET(CMAKE_CXX_COMPILER \"icpc\")\n```\n\n使用如下命令进行编译：\n\n```bash\ncd <onedal_dir>/__release_lnx/daal/latest/examples/daal/cpp\nmkdir build && cd build\ncmake .. -DEXAMPLES_LIST=gbt_cls_dense_batch\nmake -j$(nproc)\n```\n\n这样你就会在 `_cmake_results/` 下获得可执行文件。\n\n## 结语\n\n本文带您了解了 oneDAL 的基本概念，并使用一个简单的示例进行编译和运行。然而，真正有趣的部分在于 oneDAL 的内部实现技巧和思想，敬请期待后续内容。\n",
          "code": "var Component=(()=>{var p=Object.create;var l=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var N=Object.getOwnPropertyNames;var k=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty;var g=(a,e)=>()=>(e||a((e={exports:{}}).exports,e),e.exports),b=(a,e)=>{for(var s in e)l(a,s,{get:e[s],enumerable:!0})},r=(a,e,s,i)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let c of N(e))!u.call(a,c)&&c!==s&&l(a,c,{get:()=>e[c],enumerable:!(i=m(e,c))||i.enumerable});return a};var f=(a,e,s)=>(s=a!=null?p(k(a)):{},r(e||!a||!a.__esModule?l(s,\"default\",{value:a,enumerable:!0}):s,a)),A=a=>r(l({},\"__esModule\",{value:!0}),a);var o=g((v,t)=>{t.exports=_jsx_runtime});var x={};b(x,{default:()=>h,frontmatter:()=>L});var n=f(o()),L={title:\"oneDAL \\u5165\\u95E8\\u6307\\u5357\",date:\"2022-12-14\",tags:[\"\\u673A\\u5668\\u5B66\\u4E60\",\"oneDAL\",\"Intel\"],draft:!1,summary:\"Intel oneDAL \\u9AD8\\u6027\\u80FD\\u6570\\u636E\\u5206\\u6790\\u5E93\\u5165\\u95E8\\uFF1A\\u4ECB\\u7ECD oneDAL \\u7684\\u57FA\\u672C\\u6982\\u5FF5\\u3001\\u5B89\\u88C5\\u65B9\\u6CD5\\u53CA\\u793A\\u4F8B\\u7F16\\u8BD1\\u8FD0\\u884C\\u3002\",authors:[\"default\"]};function d(a){let e={a:\"a\",blockquote:\"blockquote\",code:\"code\",h2:\"h2\",h3:\"h3\",h4:\"h4\",li:\"li\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",ul:\"ul\",...a.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.blockquote,{children:[`\n`,(0,n.jsxs)(e.p,{children:[\"\\u672C\\u6587\\u662F\\u5BF9 oneDAL \\u7684\\u4E00\\u4E2A\\u7B80\\u5355\\u4ECB\\u7ECD\\uFF0C\\u4E3B\\u8981\\u53C2\\u8003 \",(0,n.jsx)(e.a,{href:\"https://oneapi-src.github.io/oneDAL/index.html\",children:\"onedal \\u5B98\\u65B9\\u6587\\u6863\"})]}),`\n`]}),`\n`,(0,n.jsxs)(e.h2,{id:\"\\u7B80\\u4ECB\",className:\"content-header\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#\\u7B80\\u4ECB\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u7B80\\u4ECB\"]}),`\n`,(0,n.jsx)(e.p,{children:\"oneDAL \\u662F\\u4E00\\u4E2A\\u9AD8\\u6027\\u80FD\\u7684\\u6570\\u636E\\u5206\\u6790\\u5E93\\uFF0C\\u5176\\u5305\\u542B\\u4E86\\u6570\\u636E\\u5206\\u6790\\u7684\\u6240\\u6709\\u9636\\u6BB5\\uFF08preprocessing, transformation, analysis, modeling, validation, and decision making\\uFF09\\u3002oneDAL \\u652F\\u6301\\u6279\\u91CF\\u3001\\u5728\\u7EBF\\u4EE5\\u53CA\\u5206\\u5E03\\u5F0F\\u7684\\u8BA1\\u7B97\\u6A21\\u5F0F\\uFF0C\\u4E3B\\u8981\\u63D0\\u4F9B\\u4E24\\u7EC4 C++ \\u63A5\\u53E3\\uFF1A\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"oneAPI Interfaces\"}),\"\\uFF1A\\u57FA\\u4E8E\\u5F00\\u653E\\u7684 oneDAL \\u89C4\\u8303\\uFF0C\\u76EE\\u524D\\u6B63\\u5728\\u79EF\\u6781\\u5F00\\u53D1\\u4E2D\\uFF0C\\u53EF\\u4EE5\\u5728\\u5404\\u79CD\\u786C\\u4EF6\\u4E0A\\u5DE5\\u4F5C\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"DAAL Interfaces\"}),\"\\uFF1A\\u4EC5\\u9650\\u4E8E CPU \\u7684\\u63A5\\u53E3\\uFF0C\\u63D0\\u4F9B\\u4E86\\u5404\\u79CD\\u7B97\\u6CD5\\u7684\\u5B9E\\u73B0\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.h2,{id:\"\\u5B89\\u88C5\",className:\"content-header\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#\\u5B89\\u88C5\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u5B89\\u88C5\"]}),`\n`,(0,n.jsxs)(e.h3,{id:\"oneapi\",className:\"content-header\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#oneapi\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"oneAPI\"]}),`\n`,(0,n.jsx)(e.p,{children:\"\\u5B89\\u88C5 oneDAL \\u9700\\u8981\\u7684 oneAPI \\u4F9D\\u8D56\\uFF0C\\u5305\\u62EC intel-basekit intel-hpckit\\uFF1A\"}),`\n`,(0,n.jsx)(e.pre,{className:\"language-bash\",children:(0,n.jsxs)(e.code,{className:\"language-bash code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token function\",children:\"apt-get\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"install\"}),\" \",(0,n.jsx)(e.span,{className:\"token parameter variable\",children:\"-y\"}),\" --no-install-recommends \",(0,n.jsx)(e.span,{className:\"token function\",children:\"curl\"}),` ca-certificates gpg-agent software-properties-common\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"# download the key to system keyring\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token function\",children:\"wget\"}),\" -O- https://apt.repos.intel.com/intel-gpg-keys/GPG-PUB-KEY-INTEL-SW-PRODUCTS.PUB \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"|\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\\\\\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  gpg \",(0,n.jsx)(e.span,{className:\"token parameter variable\",children:\"--dearmor\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"|\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"tee\"}),\" /usr/share/keyrings/oneapi-archive-keyring.gpg \",(0,n.jsx)(e.span,{className:\"token operator\",children:\">\"}),` /dev/null\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"# add signed entry to apt sources\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token builtin class-name\",children:\"echo\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:'\"deb [signed-by=/usr/share/keyrings/oneapi-archive-keyring.gpg] https://apt.repos.intel.com/oneapi all main\"'}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"|\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\\\\\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token function\",children:\"tee\"}),` /etc/apt/sources.list.d/oneAPI.list\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token function\",children:\"apt\"}),\" update \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"&&\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"apt\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"install\"}),\" intel-basekit intel-hpckit \",(0,n.jsx)(e.span,{className:\"token parameter variable\",children:\"-y\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token builtin class-name\",children:\"echo\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:'\"source /opt/intel/oneapi/compiler/latest/env/vars.sh\"'}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\">>\"}),` ~/.bashrc\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token builtin class-name\",children:\"echo\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:'\"source /opt/intel/oneapi/tbb/latest/env/vars.sh\"'}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\">>\"}),` ~/.bashrc\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token builtin class-name\",children:\"source\"}),` ~/.bashrc\n`]})]})}),`\n`,(0,n.jsxs)(e.h3,{id:\"onedal\",className:\"content-header\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#onedal\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"oneDAL\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u5982\\u679C\\u60F3\\u4ECE\\u6E90\\u7801\\u7F16\\u8BD1 oneDAL\\uFF0C\\u5B98\\u7F51\\u63D0\\u4F9B\\u4E86\\u5728\\u4E0D\\u540C\\u7CFB\\u7EDF\\u73AF\\u5883\\u4E0B\\u7684 \",(0,n.jsx)(e.a,{href:\"https://github.com/oneapi-src/oneDAL/blob/master/INSTALL.md\",children:\"\\u5B89\\u88C5\\u6559\\u7A0B\"})]}),`\n`,(0,n.jsxs)(e.h2,{id:\"\\u4F8B\\u7A0B\",className:\"content-header\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#\\u4F8B\\u7A0B\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u4F8B\\u7A0B\"]}),`\n`,(0,n.jsxs)(e.h3,{id:\"\\u7F16\\u8BD1\\u8FD0\\u884C\",className:\"content-header\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#\\u7F16\\u8BD1\\u8FD0\\u884C\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u7F16\\u8BD1\\u8FD0\\u884C\"]}),`\n`,(0,n.jsx)(e.p,{children:\"oneDAL \\u63D0\\u4F9B\\u4E86\\u4E24\\u79CD\\u65B9\\u5F0F\\u7F16\\u8BD1 example\\uFF1A\\u4F7F\\u7528 cmake \\u6216\\u8005 make\\u3002\"}),`\n`,(0,n.jsxs)(e.h4,{id:\"\\u4F7F\\u7528-make\",className:\"content-header\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#\\u4F7F\\u7528-make\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u4F7F\\u7528 make\"]}),`\n`,(0,n.jsx)(e.p,{children:\"\\u5982\\u679C\\u4F60\\u5DF2\\u7ECF\\u6DFB\\u52A0\\u4E86 tbb\\u3001icc \\u7B49\\u7684\\u73AF\\u5883\\u53D8\\u91CF\\uFF0C\\u53EF\\u4EE5\\u76F4\\u63A5 make \\u5F97\\u5230\\u53EF\\u6267\\u884C\\u6587\\u4EF6\\uFF1A\"}),`\n`,(0,n.jsx)(e.pre,{className:\"language-bash\",children:(0,n.jsxs)(e.code,{className:\"language-bash code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token builtin class-name\",children:\"source\"}),` /opt/intel/oneapi/compiler/latest/env/vars.sh\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token builtin class-name\",children:\"source\"}),` /opt/intel/oneapi/tbb/latest/env/vars.sh\n`]})]})}),`\n`,(0,n.jsxs)(e.h4,{id:\"\\u4F7F\\u7528-cmake\",className:\"content-header\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#\\u4F7F\\u7528-cmake\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u4F7F\\u7528 cmake\"]}),`\n`,(0,n.jsx)(e.p,{children:\"\\u5728\\u4F7F\\u7528 cmake \\u524D\\uFF0C\\u5148\\u8BBE\\u7F6E cmake \\u4F7F\\u7528\\u7684\\u7F16\\u8BD1\\u5668\\uFF0C\\u5728 CMakeLists.txt \\u4E0B\\u6DFB\\u52A0\\uFF1A\"}),`\n`,(0,n.jsx)(e.pre,{className:\"language-cmake\",children:(0,n.jsxs)(e.code,{className:\"language-cmake code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token function\",children:\"SET\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token variable\",children:\"CMAKE_C_COMPILER\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:'\"icc\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token function\",children:\"SET\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token variable\",children:\"CMAKE_CXX_COMPILER\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:'\"icpc\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]})]})}),`\n`,(0,n.jsx)(e.p,{children:\"\\u4F7F\\u7528\\u5982\\u4E0B\\u547D\\u4EE4\\u8FDB\\u884C\\u7F16\\u8BD1\\uFF1A\"}),`\n`,(0,n.jsx)(e.pre,{className:\"language-bash\",children:(0,n.jsxs)(e.code,{className:\"language-bash code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token builtin class-name\",children:\"cd\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"<\"}),\"onedal_dir\",(0,n.jsx)(e.span,{className:\"token operator\",children:\">\"}),`/__release_lnx/daal/latest/examples/daal/cpp\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token function\",children:\"mkdir\"}),\" build \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"&&\"}),\" \",(0,n.jsx)(e.span,{className:\"token builtin class-name\",children:\"cd\"}),` build\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"cmake \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"..\"}),\" \",(0,n.jsx)(e.span,{className:\"token parameter variable\",children:\"-DEXAMPLES_LIST\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),`gbt_cls_dense_batch\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token function\",children:\"make\"}),\" -j\",(0,n.jsxs)(e.span,{className:\"token variable\",children:[(0,n.jsx)(e.span,{className:\"token variable\",children:\"$(\"}),\"nproc\",(0,n.jsx)(e.span,{className:\"token variable\",children:\")\"})]}),`\n`]})]})}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u8FD9\\u6837\\u4F60\\u5C31\\u4F1A\\u5728 \",(0,n.jsx)(e.code,{children:\"_cmake_results/\"}),\" \\u4E0B\\u83B7\\u5F97\\u53EF\\u6267\\u884C\\u6587\\u4EF6\\u3002\"]}),`\n`,(0,n.jsxs)(e.h2,{id:\"\\u7ED3\\u8BED\",className:\"content-header\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#\\u7ED3\\u8BED\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u7ED3\\u8BED\"]}),`\n`,(0,n.jsx)(e.p,{children:\"\\u672C\\u6587\\u5E26\\u60A8\\u4E86\\u89E3\\u4E86 oneDAL \\u7684\\u57FA\\u672C\\u6982\\u5FF5\\uFF0C\\u5E76\\u4F7F\\u7528\\u4E00\\u4E2A\\u7B80\\u5355\\u7684\\u793A\\u4F8B\\u8FDB\\u884C\\u7F16\\u8BD1\\u548C\\u8FD0\\u884C\\u3002\\u7136\\u800C\\uFF0C\\u771F\\u6B63\\u6709\\u8DA3\\u7684\\u90E8\\u5206\\u5728\\u4E8E oneDAL \\u7684\\u5185\\u90E8\\u5B9E\\u73B0\\u6280\\u5DE7\\u548C\\u601D\\u60F3\\uFF0C\\u656C\\u8BF7\\u671F\\u5F85\\u540E\\u7EED\\u5185\\u5BB9\\u3002\"})]})}function h(a={}){let{wrapper:e}=a.components||{};return e?(0,n.jsx)(e,{...a,children:(0,n.jsx)(d,{...a})}):d(a)}return A(x);})();\n;return Component;"
        },
        "_id": "blog/onedal-intro.mdx",
        "_raw": {
          "sourceFilePath": "blog/onedal-intro.mdx",
          "sourceFileName": "onedal-intro.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/onedal-intro"
        },
        "type": "Blog",
        "readingTime": {
          "text": "3 min read",
          "minutes": 2.185,
          "time": 131100,
          "words": 437
        },
        "slug": "onedal-intro",
        "path": "blog/onedal-intro",
        "toc": [
          {
            "value": "简介",
            "url": "#简介",
            "depth": 2
          },
          {
            "value": "安装",
            "url": "#安装",
            "depth": 2
          },
          {
            "value": "oneAPI",
            "url": "#oneapi",
            "depth": 3
          },
          {
            "value": "oneDAL",
            "url": "#onedal",
            "depth": 3
          },
          {
            "value": "例程",
            "url": "#例程",
            "depth": 2
          },
          {
            "value": "编译运行",
            "url": "#编译运行",
            "depth": 3
          },
          {
            "value": "使用 make",
            "url": "#使用-make",
            "depth": 4
          },
          {
            "value": "使用 cmake",
            "url": "#使用-cmake",
            "depth": 4
          },
          {
            "value": "结语",
            "url": "#结语",
            "depth": 2
          }
        ],
        "structuredData": {
          "@context": "https://schema.org",
          "@type": "BlogPosting",
          "headline": "oneDAL 入门指南",
          "datePublished": "2022-12-14T00:00:00.000Z",
          "dateModified": "2022-12-14T00:00:00.000Z",
          "description": "Intel oneDAL 高性能数据分析库入门：介绍 oneDAL 的基本概念、安装方法及示例编译运行。",
          "url": "https://zhangjian94cn.github.io/blog/onedal-intro"
        }
      },
      "documentHash": "1770184344990",
      "hasWarnings": false,
      "documentTypeName": "Blog"
    },
    "blog/rag-best-practices.mdx": {
      "document": {
        "title": "RAG 系统最佳实践",
        "date": "2026-01-20T00:00:00.000Z",
        "tags": [
          "RAG",
          "LangChain",
          "Vector DB",
          "LLM"
        ],
        "draft": false,
        "summary": "总结企业级 RAG 系统开发中的经验教训，包括文档分块、向量检索和回答生成优化。",
        "authors": [
          "default"
        ],
        "body": {
          "raw": "\n## 什么是 RAG\n\nRAG (Retrieval-Augmented Generation) 是一种结合检索和生成的技术架构：\n\n1. **检索阶段**：从知识库中找到与问题相关的文档片段\n2. **生成阶段**：将检索结果作为上下文，让 LLM 生成回答\n\n## 核心组件\n\n### 文档分块策略\n\n分块质量直接影响检索效果：\n\n```python\nfrom langchain.text_splitter import RecursiveCharacterTextSplitter\n\nsplitter = RecursiveCharacterTextSplitter(\n    chunk_size=500,\n    chunk_overlap=50,\n    separators=[\"\\n\\n\", \"\\n\", \"。\", \"！\", \"？\"]\n)\n```\n\n**经验教训**：\n\n- 中文场景下，按句子分割比按字符更有效\n- overlap 设置为 chunk_size 的 10% 左右\n- 保留文档结构信息（标题、层级）\n\n### 向量存储选择\n\n| 方案     | 优势           | 适用场景         |\n| -------- | -------------- | ---------------- |\n| Chroma   | 轻量、易用     | 本地开发、小规模 |\n| Milvus   | 高性能、分布式 | 生产环境、大规模 |\n| Pinecone | 全托管         | 快速上线、无运维 |\n\n### 检索优化\n\n混合检索效果最佳：\n\n```python\nfrom langchain.retrievers import EnsembleRetriever\n\n# 语义检索 + 关键词检索\nensemble = EnsembleRetriever(\n    retrievers=[vector_retriever, bm25_retriever],\n    weights=[0.7, 0.3]\n)\n```\n\n## 生产实践\n\n### 评估指标\n\n- **召回率**: 相关文档是否被检索到\n- **准确率**: 回答是否正确\n- **幻觉率**: 是否编造不存在的信息\n\n### 常见问题\n\n1. **检索到但答案不对** → 优化 Prompt\n2. **相关文档检索不到** → 调整分块策略\n3. **回答太啰嗦** → 限制输出长度\n\n## 总结\n\nRAG 不是银弹，需要根据业务场景持续优化。关键是建立完善的评估体系。\n",
          "code": "var Component=(()=>{var p=Object.create;var s=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var N=Object.getPrototypeOf,k=Object.prototype.hasOwnProperty;var g=(a,n)=>()=>(n||a((n={exports:{}}).exports,n),n.exports),b=(a,n)=>{for(var c in n)s(a,c,{get:n[c],enumerable:!0})},i=(a,n,c,r)=>{if(n&&typeof n==\"object\"||typeof n==\"function\")for(let l of u(n))!k.call(a,l)&&l!==c&&s(a,l,{get:()=>n[l],enumerable:!(r=m(n,l))||r.enumerable});return a};var x=(a,n,c)=>(c=a!=null?p(N(a)):{},i(n||!a||!a.__esModule?s(c,\"default\",{value:a,enumerable:!0}):c,a)),f=a=>i(s({},\"__esModule\",{value:!0}),a);var d=g((R,t)=>{t.exports=_jsx_runtime});var y={};b(y,{default:()=>o,frontmatter:()=>v});var e=x(d()),v={title:\"RAG \\u7CFB\\u7EDF\\u6700\\u4F73\\u5B9E\\u8DF5\",date:\"2026-01-20\",tags:[\"RAG\",\"LangChain\",\"Vector DB\",\"LLM\"],draft:!1,summary:\"\\u603B\\u7ED3\\u4F01\\u4E1A\\u7EA7 RAG \\u7CFB\\u7EDF\\u5F00\\u53D1\\u4E2D\\u7684\\u7ECF\\u9A8C\\u6559\\u8BAD\\uFF0C\\u5305\\u62EC\\u6587\\u6863\\u5206\\u5757\\u3001\\u5411\\u91CF\\u68C0\\u7D22\\u548C\\u56DE\\u7B54\\u751F\\u6210\\u4F18\\u5316\\u3002\",authors:[\"default\"]};function h(a){let n={a:\"a\",code:\"code\",h2:\"h2\",h3:\"h3\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",table:\"table\",tbody:\"tbody\",td:\"td\",th:\"th\",thead:\"thead\",tr:\"tr\",ul:\"ul\",...a.components};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(n.h2,{id:\"\\u4EC0\\u4E48\\u662F-rag\",className:\"content-header\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#\\u4EC0\\u4E48\\u662F-rag\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u4EC0\\u4E48\\u662F RAG\"]}),`\n`,(0,e.jsx)(n.p,{children:\"RAG (Retrieval-Augmented Generation) \\u662F\\u4E00\\u79CD\\u7ED3\\u5408\\u68C0\\u7D22\\u548C\\u751F\\u6210\\u7684\\u6280\\u672F\\u67B6\\u6784\\uFF1A\"}),`\n`,(0,e.jsxs)(n.ol,{children:[`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"\\u68C0\\u7D22\\u9636\\u6BB5\"}),\"\\uFF1A\\u4ECE\\u77E5\\u8BC6\\u5E93\\u4E2D\\u627E\\u5230\\u4E0E\\u95EE\\u9898\\u76F8\\u5173\\u7684\\u6587\\u6863\\u7247\\u6BB5\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"\\u751F\\u6210\\u9636\\u6BB5\"}),\"\\uFF1A\\u5C06\\u68C0\\u7D22\\u7ED3\\u679C\\u4F5C\\u4E3A\\u4E0A\\u4E0B\\u6587\\uFF0C\\u8BA9 LLM \\u751F\\u6210\\u56DE\\u7B54\"]}),`\n`]}),`\n`,(0,e.jsxs)(n.h2,{id:\"\\u6838\\u5FC3\\u7EC4\\u4EF6\",className:\"content-header\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#\\u6838\\u5FC3\\u7EC4\\u4EF6\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u6838\\u5FC3\\u7EC4\\u4EF6\"]}),`\n`,(0,e.jsxs)(n.h3,{id:\"\\u6587\\u6863\\u5206\\u5757\\u7B56\\u7565\",className:\"content-header\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#\\u6587\\u6863\\u5206\\u5757\\u7B56\\u7565\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u6587\\u6863\\u5206\\u5757\\u7B56\\u7565\"]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u5206\\u5757\\u8D28\\u91CF\\u76F4\\u63A5\\u5F71\\u54CD\\u68C0\\u7D22\\u6548\\u679C\\uFF1A\"}),`\n`,(0,e.jsx)(n.pre,{className:\"language-python\",children:(0,e.jsxs)(n.code,{className:\"language-python code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"from\"}),\" langchain\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"text_splitter \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"import\"}),` RecursiveCharacterTextSplitter\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"splitter \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" RecursiveCharacterTextSplitter\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    chunk_size\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"500\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    chunk_overlap\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"50\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    separators\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token string\",children:'\"\\\\n\\\\n\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"\\\\n\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"\\u3002\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"\\uFF01\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"\\uFF1F\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]})]})}),`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:\"\\u7ECF\\u9A8C\\u6559\\u8BAD\"}),\"\\uFF1A\"]}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:\"\\u4E2D\\u6587\\u573A\\u666F\\u4E0B\\uFF0C\\u6309\\u53E5\\u5B50\\u5206\\u5272\\u6BD4\\u6309\\u5B57\\u7B26\\u66F4\\u6709\\u6548\"}),`\n`,(0,e.jsx)(n.li,{children:\"overlap \\u8BBE\\u7F6E\\u4E3A chunk_size \\u7684 10% \\u5DE6\\u53F3\"}),`\n`,(0,e.jsx)(n.li,{children:\"\\u4FDD\\u7559\\u6587\\u6863\\u7ED3\\u6784\\u4FE1\\u606F\\uFF08\\u6807\\u9898\\u3001\\u5C42\\u7EA7\\uFF09\"}),`\n`]}),`\n`,(0,e.jsxs)(n.h3,{id:\"\\u5411\\u91CF\\u5B58\\u50A8\\u9009\\u62E9\",className:\"content-header\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#\\u5411\\u91CF\\u5B58\\u50A8\\u9009\\u62E9\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u5411\\u91CF\\u5B58\\u50A8\\u9009\\u62E9\"]}),`\n`,(0,e.jsxs)(n.table,{children:[(0,e.jsx)(n.thead,{children:(0,e.jsxs)(n.tr,{children:[(0,e.jsx)(n.th,{children:\"\\u65B9\\u6848\"}),(0,e.jsx)(n.th,{children:\"\\u4F18\\u52BF\"}),(0,e.jsx)(n.th,{children:\"\\u9002\\u7528\\u573A\\u666F\"})]})}),(0,e.jsxs)(n.tbody,{children:[(0,e.jsxs)(n.tr,{children:[(0,e.jsx)(n.td,{children:\"Chroma\"}),(0,e.jsx)(n.td,{children:\"\\u8F7B\\u91CF\\u3001\\u6613\\u7528\"}),(0,e.jsx)(n.td,{children:\"\\u672C\\u5730\\u5F00\\u53D1\\u3001\\u5C0F\\u89C4\\u6A21\"})]}),(0,e.jsxs)(n.tr,{children:[(0,e.jsx)(n.td,{children:\"Milvus\"}),(0,e.jsx)(n.td,{children:\"\\u9AD8\\u6027\\u80FD\\u3001\\u5206\\u5E03\\u5F0F\"}),(0,e.jsx)(n.td,{children:\"\\u751F\\u4EA7\\u73AF\\u5883\\u3001\\u5927\\u89C4\\u6A21\"})]}),(0,e.jsxs)(n.tr,{children:[(0,e.jsx)(n.td,{children:\"Pinecone\"}),(0,e.jsx)(n.td,{children:\"\\u5168\\u6258\\u7BA1\"}),(0,e.jsx)(n.td,{children:\"\\u5FEB\\u901F\\u4E0A\\u7EBF\\u3001\\u65E0\\u8FD0\\u7EF4\"})]})]})]}),`\n`,(0,e.jsxs)(n.h3,{id:\"\\u68C0\\u7D22\\u4F18\\u5316\",className:\"content-header\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#\\u68C0\\u7D22\\u4F18\\u5316\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u68C0\\u7D22\\u4F18\\u5316\"]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u6DF7\\u5408\\u68C0\\u7D22\\u6548\\u679C\\u6700\\u4F73\\uFF1A\"}),`\n`,(0,e.jsx)(n.pre,{className:\"language-python\",children:(0,e.jsxs)(n.code,{className:\"language-python code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"from\"}),\" langchain\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"retrievers \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"import\"}),` EnsembleRetriever\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# \\u8BED\\u4E49\\u68C0\\u7D22 + \\u5173\\u952E\\u8BCD\\u68C0\\u7D22\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"ensemble \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" EnsembleRetriever\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    retrievers\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"vector_retriever\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" bm25_retriever\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    weights\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"0.7\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"0.3\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]})]})}),`\n`,(0,e.jsxs)(n.h2,{id:\"\\u751F\\u4EA7\\u5B9E\\u8DF5\",className:\"content-header\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#\\u751F\\u4EA7\\u5B9E\\u8DF5\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u751F\\u4EA7\\u5B9E\\u8DF5\"]}),`\n`,(0,e.jsxs)(n.h3,{id:\"\\u8BC4\\u4F30\\u6307\\u6807\",className:\"content-header\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#\\u8BC4\\u4F30\\u6307\\u6807\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u8BC4\\u4F30\\u6307\\u6807\"]}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"\\u53EC\\u56DE\\u7387\"}),\": \\u76F8\\u5173\\u6587\\u6863\\u662F\\u5426\\u88AB\\u68C0\\u7D22\\u5230\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"\\u51C6\\u786E\\u7387\"}),\": \\u56DE\\u7B54\\u662F\\u5426\\u6B63\\u786E\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"\\u5E7B\\u89C9\\u7387\"}),\": \\u662F\\u5426\\u7F16\\u9020\\u4E0D\\u5B58\\u5728\\u7684\\u4FE1\\u606F\"]}),`\n`]}),`\n`,(0,e.jsxs)(n.h3,{id:\"\\u5E38\\u89C1\\u95EE\\u9898\",className:\"content-header\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#\\u5E38\\u89C1\\u95EE\\u9898\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u5E38\\u89C1\\u95EE\\u9898\"]}),`\n`,(0,e.jsxs)(n.ol,{children:[`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"\\u68C0\\u7D22\\u5230\\u4F46\\u7B54\\u6848\\u4E0D\\u5BF9\"}),\" \\u2192 \\u4F18\\u5316 Prompt\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"\\u76F8\\u5173\\u6587\\u6863\\u68C0\\u7D22\\u4E0D\\u5230\"}),\" \\u2192 \\u8C03\\u6574\\u5206\\u5757\\u7B56\\u7565\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"\\u56DE\\u7B54\\u592A\\u5570\\u55E6\"}),\" \\u2192 \\u9650\\u5236\\u8F93\\u51FA\\u957F\\u5EA6\"]}),`\n`]}),`\n`,(0,e.jsxs)(n.h2,{id:\"\\u603B\\u7ED3\",className:\"content-header\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#\\u603B\\u7ED3\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u603B\\u7ED3\"]}),`\n`,(0,e.jsx)(n.p,{children:\"RAG \\u4E0D\\u662F\\u94F6\\u5F39\\uFF0C\\u9700\\u8981\\u6839\\u636E\\u4E1A\\u52A1\\u573A\\u666F\\u6301\\u7EED\\u4F18\\u5316\\u3002\\u5173\\u952E\\u662F\\u5EFA\\u7ACB\\u5B8C\\u5584\\u7684\\u8BC4\\u4F30\\u4F53\\u7CFB\\u3002\"})]})}function o(a={}){let{wrapper:n}=a.components||{};return n?(0,e.jsx)(n,{...a,children:(0,e.jsx)(h,{...a})}):h(a)}return f(y);})();\n;return Component;"
        },
        "_id": "blog/rag-best-practices.mdx",
        "_raw": {
          "sourceFilePath": "blog/rag-best-practices.mdx",
          "sourceFileName": "rag-best-practices.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/rag-best-practices"
        },
        "type": "Blog",
        "readingTime": {
          "text": "2 min read",
          "minutes": 1.82,
          "time": 109200,
          "words": 364
        },
        "slug": "rag-best-practices",
        "path": "blog/rag-best-practices",
        "toc": [
          {
            "value": "什么是 RAG",
            "url": "#什么是-rag",
            "depth": 2
          },
          {
            "value": "核心组件",
            "url": "#核心组件",
            "depth": 2
          },
          {
            "value": "文档分块策略",
            "url": "#文档分块策略",
            "depth": 3
          },
          {
            "value": "向量存储选择",
            "url": "#向量存储选择",
            "depth": 3
          },
          {
            "value": "检索优化",
            "url": "#检索优化",
            "depth": 3
          },
          {
            "value": "生产实践",
            "url": "#生产实践",
            "depth": 2
          },
          {
            "value": "评估指标",
            "url": "#评估指标",
            "depth": 3
          },
          {
            "value": "常见问题",
            "url": "#常见问题",
            "depth": 3
          },
          {
            "value": "总结",
            "url": "#总结",
            "depth": 2
          }
        ],
        "structuredData": {
          "@context": "https://schema.org",
          "@type": "BlogPosting",
          "headline": "RAG 系统最佳实践",
          "datePublished": "2026-01-20T00:00:00.000Z",
          "dateModified": "2026-01-20T00:00:00.000Z",
          "description": "总结企业级 RAG 系统开发中的经验教训，包括文档分块、向量检索和回答生成优化。",
          "url": "https://zhangjian94cn.github.io/blog/rag-best-practices"
        }
      },
      "documentHash": "1769918045989",
      "hasWarnings": false,
      "documentTypeName": "Blog"
    },
    "blog/rl-basics.mdx": {
      "document": {
        "title": "强化学习基础（1）",
        "date": "2023-03-14T00:00:00.000Z",
        "tags": [
          "强化学习",
          "深度学习",
          "DQN"
        ],
        "draft": false,
        "summary": "强化学习入门：介绍 Agent、Environment、Policy 等基本概念，以及 DQN、Policy Network 和 Actor-Critic 方法。",
        "authors": [
          "default"
        ],
        "body": {
          "raw": "\n## Introduction\n\n**智能体（Agent）**是一个能够感知**环境（Environment）**中的**状态（State）**并采取**动作（Action）**的实体。智能体的目标是在某些时间步中，以最大化的**总回报或奖励（Reward）**完成任务。为了实现这个目标，智能体需要利用之前的经验和当前的信息来选择最佳的动作，这个选择过程根据**策略（Policy）**来执行。\n\n- **Agent**：智能体，目标是获得最大化的回报（reward）\n- **Environment**：环境，包括所有的状态、动作、奖励和转移规则\n- **Policy**：策略，将当前状态映射到动作的概率分布\n- **Action**：动作，智能体在环境中执行的行为\n- **Reward**：奖励，表示智能体行为良好或不良的量化反馈值\n\n## Key Concepts\n\n### Reward Function\n\n回报函数定义为从时刻 t 开始的折扣累积奖励：\n\n`R_t = Σ γ^(i-t) × r_i`\n\n其中，R_t 表示在时间 t 的回报值，γ ∈ [0,1] 是折扣因子，表示对未来奖励的重视程度。\n\n### Action-Value Function\n\n动作价值函数用来衡量智能体在某个状态下执行某个动作后遵循某个策略所能获得的期望长期回报：\n\n`Q_π(s, a) = E[R_{t+1} + γ × Q(S_{t+1}, A_{t+1}) | S_t = s, A_t = a]`\n\n最优动作价值函数：\n\n`Q*(s,a) = max_π Q_π(s,a)`\n\n### State-Value Function\n\n状态价值函数衡量智能体在某个状态下遵循某个策略后所能获得的期望长期回报：\n\n`V_π(s) = E[R_{t+1} + γ × V(S_{t+1}) | S_t = s]`\n\n## Deep Q-Network (Value-Based)\n\nDeep Q-Network 用神经网络来近似 Q*(s, a)。DQN 的目标是让神经网络输出的 Q 值尽可能接近 Q* 值，从而在每个状态下选择能够使长期回报最大化的动作。\n\n损失函数：\n\n`L(θ) = E[(r + γ × max_a' Q(s',a';θ⁻) - Q(s,a;θ))²]`\n\n其中：\n\n- θ 是神经网络的参数\n- θ⁻ 是目标网络的参数\n- D 是经验回放的缓存\n- γ 是折扣因子\n\n> DQN 损失函数的设计用到了 Temporal Difference Learning，根据当前状态和动作的价值函数估计和下一个状态的最优动作的价值函数估计来计算 TD 误差。\n\n## Policy Network (Policy-Based)\n\nPolicy Network 使用一个神经网络来直接输出给定状态下的动作概率分布。\n\n**优点**：\n\n- 可以处理连续动作空间和高维状态空间\n- 可以避免最大化误差的累积\n\n状态价值函数和状态-动作价值函数之间的关系为：\n\n`V_π(s) = Σ π_θ(a|s) × Q_π(s,a)`\n\n即在不同策略概率下 Q 的期望。在 Policy Network 中，我们最大化状态价值函数 V_π(s)。\n\n## Actor-Critic Methods\n\nActor-Critic Methods 结合了 Value-Based Methods 以及 Policy-Based Methods，不仅获得了两种方法的优点，同时也在一定程度上避免了：\n\n1. **Value-Based 的问题**：高偏差（High bias），不能直接得到动作值输出，难以用于连续动作空间\n2. **Policy-Based 的问题**：高方差（High Variance），训练不稳定，策略收敛困难\n\n它包括两个部分：\n\n- **Actor**：策略网络 π_θ(a|s)，输入状态，输出动作\n- **Critic**：价值网络，输入状态或状态-动作对，输出价值函数 V_w(s) 或 Q_w(s, a)\n\n## Conclusion\n\n在本文中，我们学习了 RL 基本流程与一些关键性概念，包括回报函数（Reward Function），状态价值函数（State-Value Function）以及动作价值函数（Action-Value Function）。同时，我们还介绍了 Value-Based Methods 以及 Policy-Based Methods，更进一步，Actor-Critic Methods 结合了两种方案，并获得了相对更优的效果。\n",
          "code": "var Component=(()=>{var u=Object.create;var t=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var _=Object.getPrototypeOf,N=Object.prototype.hasOwnProperty;var g=(i,n)=>()=>(n||i((n={exports:{}}).exports,n),n.exports),f=(i,n)=>{for(var c in n)t(i,c,{get:n[c],enumerable:!0})},d=(i,n,c,l)=>{if(n&&typeof n==\"object\"||typeof n==\"function\")for(let r of m(n))!N.call(i,r)&&r!==c&&t(i,r,{get:()=>n[r],enumerable:!(l=p(n,r))||l.enumerable});return i};var k=(i,n,c)=>(c=i!=null?u(_(i)):{},d(n||!i||!i.__esModule?t(c,\"default\",{value:i,enumerable:!0}):c,i)),w=i=>d(t({},\"__esModule\",{value:!0}),i);var o=g((b,a)=>{a.exports=_jsx_runtime});var y={};f(y,{default:()=>s,frontmatter:()=>x});var e=k(o()),x={title:\"\\u5F3A\\u5316\\u5B66\\u4E60\\u57FA\\u7840\\uFF081\\uFF09\",date:\"2023-03-14\",tags:[\"\\u5F3A\\u5316\\u5B66\\u4E60\",\"\\u6DF1\\u5EA6\\u5B66\\u4E60\",\"DQN\"],draft:!1,summary:\"\\u5F3A\\u5316\\u5B66\\u4E60\\u5165\\u95E8\\uFF1A\\u4ECB\\u7ECD Agent\\u3001Environment\\u3001Policy \\u7B49\\u57FA\\u672C\\u6982\\u5FF5\\uFF0C\\u4EE5\\u53CA DQN\\u3001Policy Network \\u548C Actor-Critic \\u65B9\\u6CD5\\u3002\",authors:[\"default\"]};function h(i){let n={a:\"a\",blockquote:\"blockquote\",code:\"code\",h2:\"h2\",h3:\"h3\",li:\"li\",ol:\"ol\",p:\"p\",span:\"span\",strong:\"strong\",ul:\"ul\",...i.components};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(n.h2,{id:\"introduction\",className:\"content-header\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#introduction\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Introduction\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"**\\u667A\\u80FD\\u4F53\\uFF08Agent\\uFF09\",(0,e.jsx)(n.strong,{children:\"\\u662F\\u4E00\\u4E2A\\u80FD\\u591F\\u611F\\u77E5\"}),\"\\u73AF\\u5883\\uFF08Environment\\uFF09\",(0,e.jsx)(n.strong,{children:\"\\u4E2D\\u7684\"}),\"\\u72B6\\u6001\\uFF08State\\uFF09\",(0,e.jsx)(n.strong,{children:\"\\u5E76\\u91C7\\u53D6\"}),\"\\u52A8\\u4F5C\\uFF08Action\\uFF09\",(0,e.jsx)(n.strong,{children:\"\\u7684\\u5B9E\\u4F53\\u3002\\u667A\\u80FD\\u4F53\\u7684\\u76EE\\u6807\\u662F\\u5728\\u67D0\\u4E9B\\u65F6\\u95F4\\u6B65\\u4E2D\\uFF0C\\u4EE5\\u6700\\u5927\\u5316\\u7684\"}),\"\\u603B\\u56DE\\u62A5\\u6216\\u5956\\u52B1\\uFF08Reward\\uFF09\",(0,e.jsx)(n.strong,{children:\"\\u5B8C\\u6210\\u4EFB\\u52A1\\u3002\\u4E3A\\u4E86\\u5B9E\\u73B0\\u8FD9\\u4E2A\\u76EE\\u6807\\uFF0C\\u667A\\u80FD\\u4F53\\u9700\\u8981\\u5229\\u7528\\u4E4B\\u524D\\u7684\\u7ECF\\u9A8C\\u548C\\u5F53\\u524D\\u7684\\u4FE1\\u606F\\u6765\\u9009\\u62E9\\u6700\\u4F73\\u7684\\u52A8\\u4F5C\\uFF0C\\u8FD9\\u4E2A\\u9009\\u62E9\\u8FC7\\u7A0B\\u6839\\u636E\"}),\"\\u7B56\\u7565\\uFF08Policy\\uFF09**\\u6765\\u6267\\u884C\\u3002\"]}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"Agent\"}),\"\\uFF1A\\u667A\\u80FD\\u4F53\\uFF0C\\u76EE\\u6807\\u662F\\u83B7\\u5F97\\u6700\\u5927\\u5316\\u7684\\u56DE\\u62A5\\uFF08reward\\uFF09\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"Environment\"}),\"\\uFF1A\\u73AF\\u5883\\uFF0C\\u5305\\u62EC\\u6240\\u6709\\u7684\\u72B6\\u6001\\u3001\\u52A8\\u4F5C\\u3001\\u5956\\u52B1\\u548C\\u8F6C\\u79FB\\u89C4\\u5219\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"Policy\"}),\"\\uFF1A\\u7B56\\u7565\\uFF0C\\u5C06\\u5F53\\u524D\\u72B6\\u6001\\u6620\\u5C04\\u5230\\u52A8\\u4F5C\\u7684\\u6982\\u7387\\u5206\\u5E03\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"Action\"}),\"\\uFF1A\\u52A8\\u4F5C\\uFF0C\\u667A\\u80FD\\u4F53\\u5728\\u73AF\\u5883\\u4E2D\\u6267\\u884C\\u7684\\u884C\\u4E3A\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"Reward\"}),\"\\uFF1A\\u5956\\u52B1\\uFF0C\\u8868\\u793A\\u667A\\u80FD\\u4F53\\u884C\\u4E3A\\u826F\\u597D\\u6216\\u4E0D\\u826F\\u7684\\u91CF\\u5316\\u53CD\\u9988\\u503C\"]}),`\n`]}),`\n`,(0,e.jsxs)(n.h2,{id:\"key-concepts\",className:\"content-header\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#key-concepts\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Key Concepts\"]}),`\n`,(0,e.jsxs)(n.h3,{id:\"reward-function\",className:\"content-header\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#reward-function\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Reward Function\"]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u56DE\\u62A5\\u51FD\\u6570\\u5B9A\\u4E49\\u4E3A\\u4ECE\\u65F6\\u523B t \\u5F00\\u59CB\\u7684\\u6298\\u6263\\u7D2F\\u79EF\\u5956\\u52B1\\uFF1A\"}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.code,{children:\"R_t = \\u03A3 \\u03B3^(i-t) \\xD7 r_i\"})}),`\n`,(0,e.jsx)(n.p,{children:\"\\u5176\\u4E2D\\uFF0CR_t \\u8868\\u793A\\u5728\\u65F6\\u95F4 t \\u7684\\u56DE\\u62A5\\u503C\\uFF0C\\u03B3 \\u2208 [0,1] \\u662F\\u6298\\u6263\\u56E0\\u5B50\\uFF0C\\u8868\\u793A\\u5BF9\\u672A\\u6765\\u5956\\u52B1\\u7684\\u91CD\\u89C6\\u7A0B\\u5EA6\\u3002\"}),`\n`,(0,e.jsxs)(n.h3,{id:\"action-value-function\",className:\"content-header\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#action-value-function\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Action-Value Function\"]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u52A8\\u4F5C\\u4EF7\\u503C\\u51FD\\u6570\\u7528\\u6765\\u8861\\u91CF\\u667A\\u80FD\\u4F53\\u5728\\u67D0\\u4E2A\\u72B6\\u6001\\u4E0B\\u6267\\u884C\\u67D0\\u4E2A\\u52A8\\u4F5C\\u540E\\u9075\\u5FAA\\u67D0\\u4E2A\\u7B56\\u7565\\u6240\\u80FD\\u83B7\\u5F97\\u7684\\u671F\\u671B\\u957F\\u671F\\u56DE\\u62A5\\uFF1A\"}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.code,{children:\"Q_\\u03C0(s, a) = E[R_{t+1} + \\u03B3 \\xD7 Q(S_{t+1}, A_{t+1}) | S_t = s, A_t = a]\"})}),`\n`,(0,e.jsx)(n.p,{children:\"\\u6700\\u4F18\\u52A8\\u4F5C\\u4EF7\\u503C\\u51FD\\u6570\\uFF1A\"}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.code,{children:\"Q*(s,a) = max_\\u03C0 Q_\\u03C0(s,a)\"})}),`\n`,(0,e.jsxs)(n.h3,{id:\"state-value-function\",className:\"content-header\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#state-value-function\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"State-Value Function\"]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u72B6\\u6001\\u4EF7\\u503C\\u51FD\\u6570\\u8861\\u91CF\\u667A\\u80FD\\u4F53\\u5728\\u67D0\\u4E2A\\u72B6\\u6001\\u4E0B\\u9075\\u5FAA\\u67D0\\u4E2A\\u7B56\\u7565\\u540E\\u6240\\u80FD\\u83B7\\u5F97\\u7684\\u671F\\u671B\\u957F\\u671F\\u56DE\\u62A5\\uFF1A\"}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.code,{children:\"V_\\u03C0(s) = E[R_{t+1} + \\u03B3 \\xD7 V(S_{t+1}) | S_t = s]\"})}),`\n`,(0,e.jsxs)(n.h2,{id:\"deep-q-network-value-based\",className:\"content-header\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#deep-q-network-value-based\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Deep Q-Network (Value-Based)\"]}),`\n`,(0,e.jsx)(n.p,{children:\"Deep Q-Network \\u7528\\u795E\\u7ECF\\u7F51\\u7EDC\\u6765\\u8FD1\\u4F3C Q*(s, a)\\u3002DQN \\u7684\\u76EE\\u6807\\u662F\\u8BA9\\u795E\\u7ECF\\u7F51\\u7EDC\\u8F93\\u51FA\\u7684 Q \\u503C\\u5C3D\\u53EF\\u80FD\\u63A5\\u8FD1 Q* \\u503C\\uFF0C\\u4ECE\\u800C\\u5728\\u6BCF\\u4E2A\\u72B6\\u6001\\u4E0B\\u9009\\u62E9\\u80FD\\u591F\\u4F7F\\u957F\\u671F\\u56DE\\u62A5\\u6700\\u5927\\u5316\\u7684\\u52A8\\u4F5C\\u3002\"}),`\n`,(0,e.jsx)(n.p,{children:\"\\u635F\\u5931\\u51FD\\u6570\\uFF1A\"}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.code,{children:\"L(\\u03B8) = E[(r + \\u03B3 \\xD7 max_a' Q(s',a';\\u03B8\\u207B) - Q(s,a;\\u03B8))\\xB2]\"})}),`\n`,(0,e.jsx)(n.p,{children:\"\\u5176\\u4E2D\\uFF1A\"}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:\"\\u03B8 \\u662F\\u795E\\u7ECF\\u7F51\\u7EDC\\u7684\\u53C2\\u6570\"}),`\n`,(0,e.jsx)(n.li,{children:\"\\u03B8\\u207B \\u662F\\u76EE\\u6807\\u7F51\\u7EDC\\u7684\\u53C2\\u6570\"}),`\n`,(0,e.jsx)(n.li,{children:\"D \\u662F\\u7ECF\\u9A8C\\u56DE\\u653E\\u7684\\u7F13\\u5B58\"}),`\n`,(0,e.jsx)(n.li,{children:\"\\u03B3 \\u662F\\u6298\\u6263\\u56E0\\u5B50\"}),`\n`]}),`\n`,(0,e.jsxs)(n.blockquote,{children:[`\n`,(0,e.jsx)(n.p,{children:\"DQN \\u635F\\u5931\\u51FD\\u6570\\u7684\\u8BBE\\u8BA1\\u7528\\u5230\\u4E86 Temporal Difference Learning\\uFF0C\\u6839\\u636E\\u5F53\\u524D\\u72B6\\u6001\\u548C\\u52A8\\u4F5C\\u7684\\u4EF7\\u503C\\u51FD\\u6570\\u4F30\\u8BA1\\u548C\\u4E0B\\u4E00\\u4E2A\\u72B6\\u6001\\u7684\\u6700\\u4F18\\u52A8\\u4F5C\\u7684\\u4EF7\\u503C\\u51FD\\u6570\\u4F30\\u8BA1\\u6765\\u8BA1\\u7B97 TD \\u8BEF\\u5DEE\\u3002\"}),`\n`]}),`\n`,(0,e.jsxs)(n.h2,{id:\"policy-network-policy-based\",className:\"content-header\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#policy-network-policy-based\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Policy Network (Policy-Based)\"]}),`\n`,(0,e.jsx)(n.p,{children:\"Policy Network \\u4F7F\\u7528\\u4E00\\u4E2A\\u795E\\u7ECF\\u7F51\\u7EDC\\u6765\\u76F4\\u63A5\\u8F93\\u51FA\\u7ED9\\u5B9A\\u72B6\\u6001\\u4E0B\\u7684\\u52A8\\u4F5C\\u6982\\u7387\\u5206\\u5E03\\u3002\"}),`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:\"\\u4F18\\u70B9\"}),\"\\uFF1A\"]}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:\"\\u53EF\\u4EE5\\u5904\\u7406\\u8FDE\\u7EED\\u52A8\\u4F5C\\u7A7A\\u95F4\\u548C\\u9AD8\\u7EF4\\u72B6\\u6001\\u7A7A\\u95F4\"}),`\n`,(0,e.jsx)(n.li,{children:\"\\u53EF\\u4EE5\\u907F\\u514D\\u6700\\u5927\\u5316\\u8BEF\\u5DEE\\u7684\\u7D2F\\u79EF\"}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u72B6\\u6001\\u4EF7\\u503C\\u51FD\\u6570\\u548C\\u72B6\\u6001-\\u52A8\\u4F5C\\u4EF7\\u503C\\u51FD\\u6570\\u4E4B\\u95F4\\u7684\\u5173\\u7CFB\\u4E3A\\uFF1A\"}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.code,{children:\"V_\\u03C0(s) = \\u03A3 \\u03C0_\\u03B8(a|s) \\xD7 Q_\\u03C0(s,a)\"})}),`\n`,(0,e.jsx)(n.p,{children:\"\\u5373\\u5728\\u4E0D\\u540C\\u7B56\\u7565\\u6982\\u7387\\u4E0B Q \\u7684\\u671F\\u671B\\u3002\\u5728 Policy Network \\u4E2D\\uFF0C\\u6211\\u4EEC\\u6700\\u5927\\u5316\\u72B6\\u6001\\u4EF7\\u503C\\u51FD\\u6570 V_\\u03C0(s)\\u3002\"}),`\n`,(0,e.jsxs)(n.h2,{id:\"actor-critic-methods\",className:\"content-header\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#actor-critic-methods\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Actor-Critic Methods\"]}),`\n`,(0,e.jsx)(n.p,{children:\"Actor-Critic Methods \\u7ED3\\u5408\\u4E86 Value-Based Methods \\u4EE5\\u53CA Policy-Based Methods\\uFF0C\\u4E0D\\u4EC5\\u83B7\\u5F97\\u4E86\\u4E24\\u79CD\\u65B9\\u6CD5\\u7684\\u4F18\\u70B9\\uFF0C\\u540C\\u65F6\\u4E5F\\u5728\\u4E00\\u5B9A\\u7A0B\\u5EA6\\u4E0A\\u907F\\u514D\\u4E86\\uFF1A\"}),`\n`,(0,e.jsxs)(n.ol,{children:[`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"Value-Based \\u7684\\u95EE\\u9898\"}),\"\\uFF1A\\u9AD8\\u504F\\u5DEE\\uFF08High bias\\uFF09\\uFF0C\\u4E0D\\u80FD\\u76F4\\u63A5\\u5F97\\u5230\\u52A8\\u4F5C\\u503C\\u8F93\\u51FA\\uFF0C\\u96BE\\u4EE5\\u7528\\u4E8E\\u8FDE\\u7EED\\u52A8\\u4F5C\\u7A7A\\u95F4\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"Policy-Based \\u7684\\u95EE\\u9898\"}),\"\\uFF1A\\u9AD8\\u65B9\\u5DEE\\uFF08High Variance\\uFF09\\uFF0C\\u8BAD\\u7EC3\\u4E0D\\u7A33\\u5B9A\\uFF0C\\u7B56\\u7565\\u6536\\u655B\\u56F0\\u96BE\"]}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u5B83\\u5305\\u62EC\\u4E24\\u4E2A\\u90E8\\u5206\\uFF1A\"}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"Actor\"}),\"\\uFF1A\\u7B56\\u7565\\u7F51\\u7EDC \\u03C0_\\u03B8(a|s)\\uFF0C\\u8F93\\u5165\\u72B6\\u6001\\uFF0C\\u8F93\\u51FA\\u52A8\\u4F5C\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"Critic\"}),\"\\uFF1A\\u4EF7\\u503C\\u7F51\\u7EDC\\uFF0C\\u8F93\\u5165\\u72B6\\u6001\\u6216\\u72B6\\u6001-\\u52A8\\u4F5C\\u5BF9\\uFF0C\\u8F93\\u51FA\\u4EF7\\u503C\\u51FD\\u6570 V_w(s) \\u6216 Q_w(s, a)\"]}),`\n`]}),`\n`,(0,e.jsxs)(n.h2,{id:\"conclusion\",className:\"content-header\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#conclusion\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Conclusion\"]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u5728\\u672C\\u6587\\u4E2D\\uFF0C\\u6211\\u4EEC\\u5B66\\u4E60\\u4E86 RL \\u57FA\\u672C\\u6D41\\u7A0B\\u4E0E\\u4E00\\u4E9B\\u5173\\u952E\\u6027\\u6982\\u5FF5\\uFF0C\\u5305\\u62EC\\u56DE\\u62A5\\u51FD\\u6570\\uFF08Reward Function\\uFF09\\uFF0C\\u72B6\\u6001\\u4EF7\\u503C\\u51FD\\u6570\\uFF08State-Value Function\\uFF09\\u4EE5\\u53CA\\u52A8\\u4F5C\\u4EF7\\u503C\\u51FD\\u6570\\uFF08Action-Value Function\\uFF09\\u3002\\u540C\\u65F6\\uFF0C\\u6211\\u4EEC\\u8FD8\\u4ECB\\u7ECD\\u4E86 Value-Based Methods \\u4EE5\\u53CA Policy-Based Methods\\uFF0C\\u66F4\\u8FDB\\u4E00\\u6B65\\uFF0CActor-Critic Methods \\u7ED3\\u5408\\u4E86\\u4E24\\u79CD\\u65B9\\u6848\\uFF0C\\u5E76\\u83B7\\u5F97\\u4E86\\u76F8\\u5BF9\\u66F4\\u4F18\\u7684\\u6548\\u679C\\u3002\"})]})}function s(i={}){let{wrapper:n}=i.components||{};return n?(0,e.jsx)(n,{...i,children:(0,e.jsx)(h,{...i})}):h(i)}return w(y);})();\n;return Component;"
        },
        "_id": "blog/rl-basics.mdx",
        "_raw": {
          "sourceFilePath": "blog/rl-basics.mdx",
          "sourceFileName": "rl-basics.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/rl-basics"
        },
        "type": "Blog",
        "readingTime": {
          "text": "5 min read",
          "minutes": 4.445,
          "time": 266700,
          "words": 889
        },
        "slug": "rl-basics",
        "path": "blog/rl-basics",
        "toc": [
          {
            "value": "Introduction",
            "url": "#introduction",
            "depth": 2
          },
          {
            "value": "Key Concepts",
            "url": "#key-concepts",
            "depth": 2
          },
          {
            "value": "Reward Function",
            "url": "#reward-function",
            "depth": 3
          },
          {
            "value": "Action-Value Function",
            "url": "#action-value-function",
            "depth": 3
          },
          {
            "value": "State-Value Function",
            "url": "#state-value-function",
            "depth": 3
          },
          {
            "value": "Deep Q-Network (Value-Based)",
            "url": "#deep-q-network-value-based",
            "depth": 2
          },
          {
            "value": "Policy Network (Policy-Based)",
            "url": "#policy-network-policy-based",
            "depth": 2
          },
          {
            "value": "Actor-Critic Methods",
            "url": "#actor-critic-methods",
            "depth": 2
          },
          {
            "value": "Conclusion",
            "url": "#conclusion",
            "depth": 2
          }
        ],
        "structuredData": {
          "@context": "https://schema.org",
          "@type": "BlogPosting",
          "headline": "强化学习基础（1）",
          "datePublished": "2023-03-14T00:00:00.000Z",
          "dateModified": "2023-03-14T00:00:00.000Z",
          "description": "强化学习入门：介绍 Agent、Environment、Policy 等基本概念，以及 DQN、Policy Network 和 Actor-Critic 方法。",
          "url": "https://zhangjian94cn.github.io/blog/rl-basics"
        }
      },
      "documentHash": "1770184408797",
      "hasWarnings": false,
      "documentTypeName": "Blog"
    },
    "blog/tbb-intro.mdx": {
      "document": {
        "title": "TBB 入门教程",
        "date": "2022-11-22T00:00:00.000Z",
        "tags": [
          "HPC",
          "TBB",
          "并行计算"
        ],
        "draft": false,
        "summary": "Intel oneTBB 入门：介绍 TBB 的优势、安装方法及简单的 parallel_for 使用示例。",
        "authors": [
          "default"
        ],
        "body": {
          "raw": "\n## 简介\n\n### oneTBB 的优势\n\n1. oneTBB enables you to specify logical paralleism instead of threads.\n2. oneTBB targets threading for performance.\n3. oneTBB is compatible with other threading packages.\n4. oneTBB emphasizes scalable, data parallel programming.\n5. oneTBB relies on generic programming.\n\n### 并行开发中的常见问题\n\n几种在并行开发中常见的问题：\n\n1. Interface correspondence to specification\n2. Memory errors\n3. Data race\n4. Race conditions and deadlocks\n\n其中比较复杂的是：Race conditions 和 deadlocks。可以使用下面的测试方法：\n\n1. **Unit tests**：能力有限但基础重要\n2. **Integration tests**：组合多种功能模拟用户场景\n3. **Stress testing**：确保很少触发的错误条件也能被捕获\n\n## 安装\n\n```bash\n# Clone oneTBB repository\ngit clone https://github.com/oneapi-src/oneTBB.git\ncd oneTBB\n\n# Create binary directory for out-of-source build\nmkdir build && cd build\n\n# Configure and build\ncmake .. && make -j$(nproc)\nsudo make install\n```\n\n## 使用示例\n\n```cpp\n#include <tbb/tbb.h>\n#include <cstdio>\n\nusing namespace tbb;\n\nint main()\n{\n    tick_count t0 = tick_count::now();\n    parallel_for(0, 100, 1, [](int i) {\n        printf(\"hello tbb %d \\n\", i);\n    });\n    tick_count t1 = tick_count::now();\n\n    printf(\"use time %f \\n\", (t1-t0).seconds());\n\n    return 0;\n}\n```\n\n**CMakeLists.txt**\n\n```cmake\ncmake_minimum_required(VERSION 3.1)\n\nproject(TEST)\nfind_package(TBB REQUIRED)\nadd_executable(TEST_tbb test_tbb.cpp)\ntarget_link_libraries(TEST_tbb TBB::tbb)\n```\n\n## 参考\n\n- [oneTBB 官方文档](https://oneapi-src.github.io/oneTBB/)\n- [oneTBB 安装指南](https://github.com/oneapi-src/oneTBB/blob/master/INSTALL.md)\n- [oneTBB Developer Guide](https://oneapi-src.github.io/oneTBB/main/tbb_userguide/title.html)\n",
          "code": "var Component=(()=>{var h=Object.create;var l=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var N=Object.getPrototypeOf,k=Object.prototype.hasOwnProperty;var b=(a,n)=>()=>(n||a((n={exports:{}}).exports,n),n.exports),g=(a,n)=>{for(var s in n)l(a,s,{get:n[s],enumerable:!0})},t=(a,n,s,i)=>{if(n&&typeof n==\"object\"||typeof n==\"function\")for(let c of u(n))!k.call(a,c)&&c!==s&&l(a,c,{get:()=>n[c],enumerable:!(i=m(n,c))||i.enumerable});return a};var f=(a,n,s)=>(s=a!=null?h(N(a)):{},t(n||!a||!a.__esModule?l(s,\"default\",{value:a,enumerable:!0}):s,a)),B=a=>t(l({},\"__esModule\",{value:!0}),a);var r=b((x,o)=>{o.exports=_jsx_runtime});var y={};g(y,{default:()=>p,frontmatter:()=>T});var e=f(r()),T={title:\"TBB \\u5165\\u95E8\\u6559\\u7A0B\",date:\"2022-11-22\",tags:[\"HPC\",\"TBB\",\"\\u5E76\\u884C\\u8BA1\\u7B97\"],draft:!1,summary:\"Intel oneTBB \\u5165\\u95E8\\uFF1A\\u4ECB\\u7ECD TBB \\u7684\\u4F18\\u52BF\\u3001\\u5B89\\u88C5\\u65B9\\u6CD5\\u53CA\\u7B80\\u5355\\u7684 parallel_for \\u4F7F\\u7528\\u793A\\u4F8B\\u3002\",authors:[\"default\"]};function d(a){let n={a:\"a\",code:\"code\",h2:\"h2\",h3:\"h3\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",ul:\"ul\",...a.components};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(n.h2,{id:\"\\u7B80\\u4ECB\",className:\"content-header\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#\\u7B80\\u4ECB\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u7B80\\u4ECB\"]}),`\n`,(0,e.jsxs)(n.h3,{id:\"onetbb-\\u7684\\u4F18\\u52BF\",className:\"content-header\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#onetbb-\\u7684\\u4F18\\u52BF\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"oneTBB \\u7684\\u4F18\\u52BF\"]}),`\n`,(0,e.jsxs)(n.ol,{children:[`\n`,(0,e.jsx)(n.li,{children:\"oneTBB enables you to specify logical paralleism instead of threads.\"}),`\n`,(0,e.jsx)(n.li,{children:\"oneTBB targets threading for performance.\"}),`\n`,(0,e.jsx)(n.li,{children:\"oneTBB is compatible with other threading packages.\"}),`\n`,(0,e.jsx)(n.li,{children:\"oneTBB emphasizes scalable, data parallel programming.\"}),`\n`,(0,e.jsx)(n.li,{children:\"oneTBB relies on generic programming.\"}),`\n`]}),`\n`,(0,e.jsxs)(n.h3,{id:\"\\u5E76\\u884C\\u5F00\\u53D1\\u4E2D\\u7684\\u5E38\\u89C1\\u95EE\\u9898\",className:\"content-header\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#\\u5E76\\u884C\\u5F00\\u53D1\\u4E2D\\u7684\\u5E38\\u89C1\\u95EE\\u9898\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u5E76\\u884C\\u5F00\\u53D1\\u4E2D\\u7684\\u5E38\\u89C1\\u95EE\\u9898\"]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u51E0\\u79CD\\u5728\\u5E76\\u884C\\u5F00\\u53D1\\u4E2D\\u5E38\\u89C1\\u7684\\u95EE\\u9898\\uFF1A\"}),`\n`,(0,e.jsxs)(n.ol,{children:[`\n`,(0,e.jsx)(n.li,{children:\"Interface correspondence to specification\"}),`\n`,(0,e.jsx)(n.li,{children:\"Memory errors\"}),`\n`,(0,e.jsx)(n.li,{children:\"Data race\"}),`\n`,(0,e.jsx)(n.li,{children:\"Race conditions and deadlocks\"}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u5176\\u4E2D\\u6BD4\\u8F83\\u590D\\u6742\\u7684\\u662F\\uFF1ARace conditions \\u548C deadlocks\\u3002\\u53EF\\u4EE5\\u4F7F\\u7528\\u4E0B\\u9762\\u7684\\u6D4B\\u8BD5\\u65B9\\u6CD5\\uFF1A\"}),`\n`,(0,e.jsxs)(n.ol,{children:[`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"Unit tests\"}),\"\\uFF1A\\u80FD\\u529B\\u6709\\u9650\\u4F46\\u57FA\\u7840\\u91CD\\u8981\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"Integration tests\"}),\"\\uFF1A\\u7EC4\\u5408\\u591A\\u79CD\\u529F\\u80FD\\u6A21\\u62DF\\u7528\\u6237\\u573A\\u666F\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"Stress testing\"}),\"\\uFF1A\\u786E\\u4FDD\\u5F88\\u5C11\\u89E6\\u53D1\\u7684\\u9519\\u8BEF\\u6761\\u4EF6\\u4E5F\\u80FD\\u88AB\\u6355\\u83B7\"]}),`\n`]}),`\n`,(0,e.jsxs)(n.h2,{id:\"\\u5B89\\u88C5\",className:\"content-header\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#\\u5B89\\u88C5\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u5B89\\u88C5\"]}),`\n`,(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsxs)(n.code,{className:\"language-bash code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# Clone oneTBB repository\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token function\",children:\"git\"}),` clone https://github.com/oneapi-src/oneTBB.git\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token builtin class-name\",children:\"cd\"}),` oneTBB\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# Create binary directory for out-of-source build\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token function\",children:\"mkdir\"}),\" build \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"&&\"}),\" \",(0,e.jsx)(n.span,{className:\"token builtin class-name\",children:\"cd\"}),` build\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# Configure and build\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"cmake \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"..\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"&&\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"make\"}),\" -j\",(0,e.jsxs)(n.span,{className:\"token variable\",children:[(0,e.jsx)(n.span,{className:\"token variable\",children:\"$(\"}),\"nproc\",(0,e.jsx)(n.span,{className:\"token variable\",children:\")\"})]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token function\",children:\"sudo\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"make\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"install\"}),`\n`]})]})}),`\n`,(0,e.jsxs)(n.h2,{id:\"\\u4F7F\\u7528\\u793A\\u4F8B\",className:\"content-header\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#\\u4F7F\\u7528\\u793A\\u4F8B\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u4F7F\\u7528\\u793A\\u4F8B\"]}),`\n`,(0,e.jsx)(n.pre,{className:\"language-cpp\",children:(0,e.jsxs)(n.code,{className:\"language-cpp code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token macro property\",children:[(0,e.jsx)(n.span,{className:\"token directive-hash\",children:\"#\"}),(0,e.jsx)(n.span,{className:\"token directive keyword\",children:\"include\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"<tbb/tbb.h>\"})]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token macro property\",children:[(0,e.jsx)(n.span,{className:\"token directive-hash\",children:\"#\"}),(0,e.jsx)(n.span,{className:\"token directive keyword\",children:\"include\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"<cstdio>\"})]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"using\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"namespace\"}),\" tbb\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"int\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"main\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    tick_count t0 \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" tick_count\",(0,e.jsx)(n.span,{className:\"token double-colon punctuation\",children:\"::\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"now\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token function\",children:\"parallel_for\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"0\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"100\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"1\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token keyword\",children:\"int\"}),\" i\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token function\",children:\"printf\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:'\"hello tbb %d \\\\n\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" i\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    tick_count t1 \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" tick_count\",(0,e.jsx)(n.span,{className:\"token double-colon punctuation\",children:\"::\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"now\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token function\",children:\"printf\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:'\"use time %f \\\\n\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"t1\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"-\"}),\"t0\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"seconds\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"return\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"0\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.strong,{children:\"CMakeLists.txt\"})}),`\n`,(0,e.jsx)(n.pre,{className:\"language-cmake\",children:(0,e.jsxs)(n.code,{className:\"language-cmake code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"cmake_minimum_required\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token property\",children:\"VERSION\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"3.1\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"project\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"TEST\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"find_package\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"TBB REQUIRED\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"add_executable\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"TEST_tbb test_tbb.cpp\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"target_link_libraries\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"TEST_tbb \",(0,e.jsx)(n.span,{className:\"token inserted class-name\",children:\"TBB::tbb\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]})]})}),`\n`,(0,e.jsxs)(n.h2,{id:\"\\u53C2\\u8003\",className:\"content-header\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#\\u53C2\\u8003\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u53C2\\u8003\"]}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://oneapi-src.github.io/oneTBB/\",children:\"oneTBB \\u5B98\\u65B9\\u6587\\u6863\"})}),`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://github.com/oneapi-src/oneTBB/blob/master/INSTALL.md\",children:\"oneTBB \\u5B89\\u88C5\\u6307\\u5357\"})}),`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://oneapi-src.github.io/oneTBB/main/tbb_userguide/title.html\",children:\"oneTBB Developer Guide\"})}),`\n`]})]})}function p(a={}){let{wrapper:n}=a.components||{};return n?(0,e.jsx)(n,{...a,children:(0,e.jsx)(d,{...a})}):d(a)}return B(y);})();\n;return Component;"
        },
        "_id": "blog/tbb-intro.mdx",
        "_raw": {
          "sourceFilePath": "blog/tbb-intro.mdx",
          "sourceFileName": "tbb-intro.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/tbb-intro"
        },
        "type": "Blog",
        "readingTime": {
          "text": "2 min read",
          "minutes": 1.34,
          "time": 80400,
          "words": 268
        },
        "slug": "tbb-intro",
        "path": "blog/tbb-intro",
        "toc": [
          {
            "value": "简介",
            "url": "#简介",
            "depth": 2
          },
          {
            "value": "oneTBB 的优势",
            "url": "#onetbb-的优势",
            "depth": 3
          },
          {
            "value": "并行开发中的常见问题",
            "url": "#并行开发中的常见问题",
            "depth": 3
          },
          {
            "value": "安装",
            "url": "#安装",
            "depth": 2
          },
          {
            "value": "使用示例",
            "url": "#使用示例",
            "depth": 2
          },
          {
            "value": "参考",
            "url": "#参考",
            "depth": 2
          }
        ],
        "structuredData": {
          "@context": "https://schema.org",
          "@type": "BlogPosting",
          "headline": "TBB 入门教程",
          "datePublished": "2022-11-22T00:00:00.000Z",
          "dateModified": "2022-11-22T00:00:00.000Z",
          "description": "Intel oneTBB 入门：介绍 TBB 的优势、安装方法及简单的 parallel_for 使用示例。",
          "url": "https://zhangjian94cn.github.io/blog/tbb-intro"
        }
      },
      "documentHash": "1770184342934",
      "hasWarnings": false,
      "documentTypeName": "Blog"
    },
    "blog/text2sql-finetuning-practice.mdx": {
      "document": {
        "title": "江苏移动数智助手 Text2SQL 大模型微调实践",
        "date": "2024-08-03T00:00:00.000Z",
        "tags": [
          "LLM",
          "Text2SQL",
          "微调",
          "LoRA"
        ],
        "draft": false,
        "summary": "分享在数智助手项目中进行 Text2SQL 微调的实践经验，包括问题分析、训练数据准备、LoRA 微调过程及效果评估。",
        "authors": [
          "default"
        ],
        "body": {
          "raw": "\n> \"随着人工智能技术的迅猛发展，企业在数据处理和分析方面的需求也日益增长。为了更高效地从海量数据中提取有用信息，我们在数智助手中进行了Text2SQL微调实践。这不仅提高了数据查询的效率，还大幅提升了用户体验。\"\n\n## 问题分析\n\nText2SQL也称NL2SQL，指用自然语言向LLM提问，推理生成结构化SQL语句的过程。\n\n随着大语言模型的迅猛演进，通过LLM将自然语言表达的用户需求转化为SQL查询指令，已确立为解决复杂数据检索问题的首选方案。我们利用海量数据对大模型进行微调，从而增强其在新场景下的适应性和准确性，最终形成：**用户问题-SQL命令生成-SQL查询结果返回-查询结果总结输出的完整闭环**，实现可靠、准确的问答流程。\n\n在项目早期未引入Text2SQL时，针对用户套餐查询的需求，我们基于单纯RAG语义向量匹配和基座大模型能力，无法实现对用户问题的精准回答。\n\n### Text2SQL大模型现存问题\n\n在实践过程中，我们发现目前的Text2SQL中存在的一些主要问题包括：\n\n**(1) 输出幻觉（Hallucination）**：LLM在生成SQL语句时会生成一些看似合理，但实际与输入文本无关或错误的查询，这可能是由于模型尚未充分学习到数据库的信息和SQL逻辑，导致在推理阶段产生误导性的输出。例如，当用户提问：\"比语音翻倍包更经济的套餐有哪些？\"，生成的SQL命令为：\n\n```sql\n\"SELECT * FROM database WHERE money < 50;\"\n```\n\n大模型直接认为\"语音翻倍包\"的价格为50元，并以此输出SQL语句，导致查询结果出错。\n\n**(2) 答案稳定性**：模型生成答案不够稳定，偶尔需要多次提问才能找到最优答案。例如，用户多次提问\"请问流量超过3000MB有几种套餐\"，得到的回答会出现以下几种情况：\n\n```sql\nSELECT COUNT(*) FROM database WHERE en_names LIKE %'流量超过3000MB'%;\nSELECT COUNT(*) FROM database WHERE en_broadband > 3;\nSELECT COUNT(*) FROM database WHERE en_broadband > 3000;\n```\n\n在多次提问的过程中，出现了语义理解不清（将\"流量超过3000MB\"作为套餐名）、单位换算出错（MB转换成GB）的情况，暴露出大模型稳定性不强的问题。\n\n### 优化方法\n\n为了解决这些模型问题，我们考虑了**Prompt Engineering（提示工程）**、**Fine-tuning（模型微调）**等方式对模型进行优化。\n\n**(1) Prompt Engineering（提示工程）**能够通过设计特定的提示词或句子，引导模型生成更贴合用户意图的输出。在处理SQL查询时，向模型注入特定领域的知识，比如SQL规范、数据库架构以及注意单位转换等额外要求，能够显著提升模型对于SQL语句结构和逻辑的理解能力。\n\n**(2) Fine-tuning（模型微调）**是一种先进的机器学习技术，旨在针对预训练模型进行定制化调整，使其更加契合特定应用场景的需求。LoRA微调通过将模型的部分权重矩阵分解为两个低秩矩阵，只更新这两个小矩阵的参数来实现微调，**从而减少计算资源和内存占用**。\n\n## 微调训练数据准备\n\n### 生成方法\n\n(1) 提取关键属性信息，对业务知识提取关键属性及对应的信息。可抽取的关键属性为：\n\n```\n套餐名称：{names}\n套餐价格：{money}\n套餐流量：{GB}\n可通话时长：{duration}\n套餐上线年份：{online_years}\n```\n\n(2) 构建常见的用户问题与sql命令语料对，通过抽象化用户可能提问的问题，并进行对应的同义词替换，生成大量训练样本\n\n**示例1**：查询128元的套餐\n\n```sql\nSELECT * FROM {table_name} WHERE money = {money};\n```\n\n**示例2**：降档流量套餐到60G\n\n```sql\nSELECT * FROM {table_name} WHERE GB = {GB};\n```\n\n(3) 训练语料对保存为json格式\n\n```json\n{\n  \"user\": {\"升级到41GB流量的套餐，有什么建议\"},\n  \"assistant\": {\"SELECT * FROM database WHERE GB = 41000;\"}\n}\n```\n\n### 生成规模\n\n共生成**15w条语料对**，包括正向语料和反向语料：\n\n- **正向语料**（用户输入能够生成sql命令）：\n  - **直接查询类**：用户直接询问明确的套餐名称、价格，生成**5w条样本**\n  - **数字比较类**：用户希望找到更优惠、更多流量的套餐，生成**5w条样本**\n\n- **反向语料**（用户输入无法生成sql命令）：生成**5w条样本**\n\n## 微调过程\n\n1. 所需资源：**GPU：NVIDIA A100-SXM4-40GB x2**；**微调模型：QWen-7b-chat**\n\n2. 微调过程\n   - **训练时长**：大约3.75小时\n\n我们对微调后的模型进行测试，用户问题与SQL语句的转换正确率可达**98.56%**，达到了生产上线的标准。当我们将微调模型部署后，回答的套餐信息已明显扩充，并且从用户角度考虑了短期和长期两种情况，向用户提供了更全面、更可靠的答案。\n\n## 未来展望\n\n随着大模型技术的日新月异，Text2SQL技术也在以惊人的速度不断发展。目前所采用的优化手段，虽然在现阶段可能有效，但随着大模型能力的持续提升，这些手段很可能会逐渐显得过时。\n\n一方面，我们不能神话大型语言模型（LLM）的能力，给予其过高的期望。另一方面，我们也不能因高估工程实现的难度而望而生畏。只有一步一个脚印，踏踏实实地解决工程实践中的每一个问题，才能最终将Text2SQL技术推向成熟的生产阶段。\n",
          "code": "var Component=(()=>{var p=Object.create;var l=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var N=Object.getOwnPropertyNames;var u=Object.getPrototypeOf,k=Object.prototype.hasOwnProperty;var g=(a,n)=>()=>(n||a((n={exports:{}}).exports,n),n.exports),L=(a,n)=>{for(var s in n)l(a,s,{get:n[s],enumerable:!0})},i=(a,n,s,r)=>{if(n&&typeof n==\"object\"||typeof n==\"function\")for(let c of N(n))!k.call(a,c)&&c!==s&&l(a,c,{get:()=>n[c],enumerable:!(r=m(n,c))||r.enumerable});return a};var E=(a,n,s)=>(s=a!=null?p(u(a)):{},i(n||!a||!a.__esModule?l(s,\"default\",{value:a,enumerable:!0}):s,a)),S=a=>i(l({},\"__esModule\",{value:!0}),a);var d=g((Q,t)=>{t.exports=_jsx_runtime});var y={};L(y,{default:()=>h,frontmatter:()=>x});var e=E(d()),x={title:\"\\u6C5F\\u82CF\\u79FB\\u52A8\\u6570\\u667A\\u52A9\\u624B Text2SQL \\u5927\\u6A21\\u578B\\u5FAE\\u8C03\\u5B9E\\u8DF5\",date:\"2024-08-03\",tags:[\"LLM\",\"Text2SQL\",\"\\u5FAE\\u8C03\",\"LoRA\"],draft:!1,summary:\"\\u5206\\u4EAB\\u5728\\u6570\\u667A\\u52A9\\u624B\\u9879\\u76EE\\u4E2D\\u8FDB\\u884C Text2SQL \\u5FAE\\u8C03\\u7684\\u5B9E\\u8DF5\\u7ECF\\u9A8C\\uFF0C\\u5305\\u62EC\\u95EE\\u9898\\u5206\\u6790\\u3001\\u8BAD\\u7EC3\\u6570\\u636E\\u51C6\\u5907\\u3001LoRA \\u5FAE\\u8C03\\u8FC7\\u7A0B\\u53CA\\u6548\\u679C\\u8BC4\\u4F30\\u3002\",authors:[\"default\"]};function o(a){let n={a:\"a\",blockquote:\"blockquote\",code:\"code\",h2:\"h2\",h3:\"h3\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",ul:\"ul\",...a.components};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(n.blockquote,{children:[`\n`,(0,e.jsx)(n.p,{children:'\"\\u968F\\u7740\\u4EBA\\u5DE5\\u667A\\u80FD\\u6280\\u672F\\u7684\\u8FC5\\u731B\\u53D1\\u5C55\\uFF0C\\u4F01\\u4E1A\\u5728\\u6570\\u636E\\u5904\\u7406\\u548C\\u5206\\u6790\\u65B9\\u9762\\u7684\\u9700\\u6C42\\u4E5F\\u65E5\\u76CA\\u589E\\u957F\\u3002\\u4E3A\\u4E86\\u66F4\\u9AD8\\u6548\\u5730\\u4ECE\\u6D77\\u91CF\\u6570\\u636E\\u4E2D\\u63D0\\u53D6\\u6709\\u7528\\u4FE1\\u606F\\uFF0C\\u6211\\u4EEC\\u5728\\u6570\\u667A\\u52A9\\u624B\\u4E2D\\u8FDB\\u884C\\u4E86Text2SQL\\u5FAE\\u8C03\\u5B9E\\u8DF5\\u3002\\u8FD9\\u4E0D\\u4EC5\\u63D0\\u9AD8\\u4E86\\u6570\\u636E\\u67E5\\u8BE2\\u7684\\u6548\\u7387\\uFF0C\\u8FD8\\u5927\\u5E45\\u63D0\\u5347\\u4E86\\u7528\\u6237\\u4F53\\u9A8C\\u3002\"'}),`\n`]}),`\n`,(0,e.jsxs)(n.h2,{id:\"\\u95EE\\u9898\\u5206\\u6790\",className:\"content-header\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#\\u95EE\\u9898\\u5206\\u6790\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u95EE\\u9898\\u5206\\u6790\"]}),`\n`,(0,e.jsx)(n.p,{children:\"Text2SQL\\u4E5F\\u79F0NL2SQL\\uFF0C\\u6307\\u7528\\u81EA\\u7136\\u8BED\\u8A00\\u5411LLM\\u63D0\\u95EE\\uFF0C\\u63A8\\u7406\\u751F\\u6210\\u7ED3\\u6784\\u5316SQL\\u8BED\\u53E5\\u7684\\u8FC7\\u7A0B\\u3002\"}),`\n`,(0,e.jsxs)(n.p,{children:[\"\\u968F\\u7740\\u5927\\u8BED\\u8A00\\u6A21\\u578B\\u7684\\u8FC5\\u731B\\u6F14\\u8FDB\\uFF0C\\u901A\\u8FC7LLM\\u5C06\\u81EA\\u7136\\u8BED\\u8A00\\u8868\\u8FBE\\u7684\\u7528\\u6237\\u9700\\u6C42\\u8F6C\\u5316\\u4E3ASQL\\u67E5\\u8BE2\\u6307\\u4EE4\\uFF0C\\u5DF2\\u786E\\u7ACB\\u4E3A\\u89E3\\u51B3\\u590D\\u6742\\u6570\\u636E\\u68C0\\u7D22\\u95EE\\u9898\\u7684\\u9996\\u9009\\u65B9\\u6848\\u3002\\u6211\\u4EEC\\u5229\\u7528\\u6D77\\u91CF\\u6570\\u636E\\u5BF9\\u5927\\u6A21\\u578B\\u8FDB\\u884C\\u5FAE\\u8C03\\uFF0C\\u4ECE\\u800C\\u589E\\u5F3A\\u5176\\u5728\\u65B0\\u573A\\u666F\\u4E0B\\u7684\\u9002\\u5E94\\u6027\\u548C\\u51C6\\u786E\\u6027\\uFF0C\\u6700\\u7EC8\\u5F62\\u6210\\uFF1A\",(0,e.jsx)(n.strong,{children:\"\\u7528\\u6237\\u95EE\\u9898-SQL\\u547D\\u4EE4\\u751F\\u6210-SQL\\u67E5\\u8BE2\\u7ED3\\u679C\\u8FD4\\u56DE-\\u67E5\\u8BE2\\u7ED3\\u679C\\u603B\\u7ED3\\u8F93\\u51FA\\u7684\\u5B8C\\u6574\\u95ED\\u73AF\"}),\"\\uFF0C\\u5B9E\\u73B0\\u53EF\\u9760\\u3001\\u51C6\\u786E\\u7684\\u95EE\\u7B54\\u6D41\\u7A0B\\u3002\"]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u5728\\u9879\\u76EE\\u65E9\\u671F\\u672A\\u5F15\\u5165Text2SQL\\u65F6\\uFF0C\\u9488\\u5BF9\\u7528\\u6237\\u5957\\u9910\\u67E5\\u8BE2\\u7684\\u9700\\u6C42\\uFF0C\\u6211\\u4EEC\\u57FA\\u4E8E\\u5355\\u7EAFRAG\\u8BED\\u4E49\\u5411\\u91CF\\u5339\\u914D\\u548C\\u57FA\\u5EA7\\u5927\\u6A21\\u578B\\u80FD\\u529B\\uFF0C\\u65E0\\u6CD5\\u5B9E\\u73B0\\u5BF9\\u7528\\u6237\\u95EE\\u9898\\u7684\\u7CBE\\u51C6\\u56DE\\u7B54\\u3002\"}),`\n`,(0,e.jsxs)(n.h3,{id:\"text2sql\\u5927\\u6A21\\u578B\\u73B0\\u5B58\\u95EE\\u9898\",className:\"content-header\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#text2sql\\u5927\\u6A21\\u578B\\u73B0\\u5B58\\u95EE\\u9898\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Text2SQL\\u5927\\u6A21\\u578B\\u73B0\\u5B58\\u95EE\\u9898\"]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u5728\\u5B9E\\u8DF5\\u8FC7\\u7A0B\\u4E2D\\uFF0C\\u6211\\u4EEC\\u53D1\\u73B0\\u76EE\\u524D\\u7684Text2SQL\\u4E2D\\u5B58\\u5728\\u7684\\u4E00\\u4E9B\\u4E3B\\u8981\\u95EE\\u9898\\u5305\\u62EC\\uFF1A\"}),`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:\"(1) \\u8F93\\u51FA\\u5E7B\\u89C9\\uFF08Hallucination\\uFF09\"}),'\\uFF1ALLM\\u5728\\u751F\\u6210SQL\\u8BED\\u53E5\\u65F6\\u4F1A\\u751F\\u6210\\u4E00\\u4E9B\\u770B\\u4F3C\\u5408\\u7406\\uFF0C\\u4F46\\u5B9E\\u9645\\u4E0E\\u8F93\\u5165\\u6587\\u672C\\u65E0\\u5173\\u6216\\u9519\\u8BEF\\u7684\\u67E5\\u8BE2\\uFF0C\\u8FD9\\u53EF\\u80FD\\u662F\\u7531\\u4E8E\\u6A21\\u578B\\u5C1A\\u672A\\u5145\\u5206\\u5B66\\u4E60\\u5230\\u6570\\u636E\\u5E93\\u7684\\u4FE1\\u606F\\u548CSQL\\u903B\\u8F91\\uFF0C\\u5BFC\\u81F4\\u5728\\u63A8\\u7406\\u9636\\u6BB5\\u4EA7\\u751F\\u8BEF\\u5BFC\\u6027\\u7684\\u8F93\\u51FA\\u3002\\u4F8B\\u5982\\uFF0C\\u5F53\\u7528\\u6237\\u63D0\\u95EE\\uFF1A\"\\u6BD4\\u8BED\\u97F3\\u7FFB\\u500D\\u5305\\u66F4\\u7ECF\\u6D4E\\u7684\\u5957\\u9910\\u6709\\u54EA\\u4E9B\\uFF1F\"\\uFF0C\\u751F\\u6210\\u7684SQL\\u547D\\u4EE4\\u4E3A\\uFF1A']}),`\n`,(0,e.jsx)(n.pre,{className:\"language-sql\",children:(0,e.jsx)(n.code,{className:\"language-sql code-highlight\",children:(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token string\",children:'\"SELECT * FROM database WHERE money < 50;\"'}),`\n`]})})}),`\n`,(0,e.jsx)(n.p,{children:'\\u5927\\u6A21\\u578B\\u76F4\\u63A5\\u8BA4\\u4E3A\"\\u8BED\\u97F3\\u7FFB\\u500D\\u5305\"\\u7684\\u4EF7\\u683C\\u4E3A50\\u5143\\uFF0C\\u5E76\\u4EE5\\u6B64\\u8F93\\u51FASQL\\u8BED\\u53E5\\uFF0C\\u5BFC\\u81F4\\u67E5\\u8BE2\\u7ED3\\u679C\\u51FA\\u9519\\u3002'}),`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:\"(2) \\u7B54\\u6848\\u7A33\\u5B9A\\u6027\"}),'\\uFF1A\\u6A21\\u578B\\u751F\\u6210\\u7B54\\u6848\\u4E0D\\u591F\\u7A33\\u5B9A\\uFF0C\\u5076\\u5C14\\u9700\\u8981\\u591A\\u6B21\\u63D0\\u95EE\\u624D\\u80FD\\u627E\\u5230\\u6700\\u4F18\\u7B54\\u6848\\u3002\\u4F8B\\u5982\\uFF0C\\u7528\\u6237\\u591A\\u6B21\\u63D0\\u95EE\"\\u8BF7\\u95EE\\u6D41\\u91CF\\u8D85\\u8FC73000MB\\u6709\\u51E0\\u79CD\\u5957\\u9910\"\\uFF0C\\u5F97\\u5230\\u7684\\u56DE\\u7B54\\u4F1A\\u51FA\\u73B0\\u4EE5\\u4E0B\\u51E0\\u79CD\\u60C5\\u51B5\\uFF1A']}),`\n`,(0,e.jsx)(n.pre,{className:\"language-sql\",children:(0,e.jsxs)(n.code,{className:\"language-sql code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"SELECT\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"COUNT\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"*\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"FROM\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"database\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"WHERE\"}),\" en_names \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"LIKE\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"%\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'\\u6D41\\u91CF\\u8D85\\u8FC73000MB'\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"%\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"SELECT\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"COUNT\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"*\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"FROM\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"database\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"WHERE\"}),\" en_broadband \",(0,e.jsx)(n.span,{className:\"token operator\",children:\">\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"3\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"SELECT\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"COUNT\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"*\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"FROM\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"database\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"WHERE\"}),\" en_broadband \",(0,e.jsx)(n.span,{className:\"token operator\",children:\">\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"3000\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]})]})}),`\n`,(0,e.jsx)(n.p,{children:'\\u5728\\u591A\\u6B21\\u63D0\\u95EE\\u7684\\u8FC7\\u7A0B\\u4E2D\\uFF0C\\u51FA\\u73B0\\u4E86\\u8BED\\u4E49\\u7406\\u89E3\\u4E0D\\u6E05\\uFF08\\u5C06\"\\u6D41\\u91CF\\u8D85\\u8FC73000MB\"\\u4F5C\\u4E3A\\u5957\\u9910\\u540D\\uFF09\\u3001\\u5355\\u4F4D\\u6362\\u7B97\\u51FA\\u9519\\uFF08MB\\u8F6C\\u6362\\u6210GB\\uFF09\\u7684\\u60C5\\u51B5\\uFF0C\\u66B4\\u9732\\u51FA\\u5927\\u6A21\\u578B\\u7A33\\u5B9A\\u6027\\u4E0D\\u5F3A\\u7684\\u95EE\\u9898\\u3002'}),`\n`,(0,e.jsxs)(n.h3,{id:\"\\u4F18\\u5316\\u65B9\\u6CD5\",className:\"content-header\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#\\u4F18\\u5316\\u65B9\\u6CD5\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u4F18\\u5316\\u65B9\\u6CD5\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"\\u4E3A\\u4E86\\u89E3\\u51B3\\u8FD9\\u4E9B\\u6A21\\u578B\\u95EE\\u9898\\uFF0C\\u6211\\u4EEC\\u8003\\u8651\\u4E86\",(0,e.jsx)(n.strong,{children:\"Prompt Engineering\\uFF08\\u63D0\\u793A\\u5DE5\\u7A0B\\uFF09\"}),\"\\u3001**Fine-tuning\\uFF08\\u6A21\\u578B\\u5FAE\\u8C03\\uFF09**\\u7B49\\u65B9\\u5F0F\\u5BF9\\u6A21\\u578B\\u8FDB\\u884C\\u4F18\\u5316\\u3002\"]}),`\n`,(0,e.jsx)(n.p,{children:\"**(1) Prompt Engineering\\uFF08\\u63D0\\u793A\\u5DE5\\u7A0B\\uFF09**\\u80FD\\u591F\\u901A\\u8FC7\\u8BBE\\u8BA1\\u7279\\u5B9A\\u7684\\u63D0\\u793A\\u8BCD\\u6216\\u53E5\\u5B50\\uFF0C\\u5F15\\u5BFC\\u6A21\\u578B\\u751F\\u6210\\u66F4\\u8D34\\u5408\\u7528\\u6237\\u610F\\u56FE\\u7684\\u8F93\\u51FA\\u3002\\u5728\\u5904\\u7406SQL\\u67E5\\u8BE2\\u65F6\\uFF0C\\u5411\\u6A21\\u578B\\u6CE8\\u5165\\u7279\\u5B9A\\u9886\\u57DF\\u7684\\u77E5\\u8BC6\\uFF0C\\u6BD4\\u5982SQL\\u89C4\\u8303\\u3001\\u6570\\u636E\\u5E93\\u67B6\\u6784\\u4EE5\\u53CA\\u6CE8\\u610F\\u5355\\u4F4D\\u8F6C\\u6362\\u7B49\\u989D\\u5916\\u8981\\u6C42\\uFF0C\\u80FD\\u591F\\u663E\\u8457\\u63D0\\u5347\\u6A21\\u578B\\u5BF9\\u4E8ESQL\\u8BED\\u53E5\\u7ED3\\u6784\\u548C\\u903B\\u8F91\\u7684\\u7406\\u89E3\\u80FD\\u529B\\u3002\"}),`\n`,(0,e.jsxs)(n.p,{children:[\"**(2) Fine-tuning\\uFF08\\u6A21\\u578B\\u5FAE\\u8C03\\uFF09**\\u662F\\u4E00\\u79CD\\u5148\\u8FDB\\u7684\\u673A\\u5668\\u5B66\\u4E60\\u6280\\u672F\\uFF0C\\u65E8\\u5728\\u9488\\u5BF9\\u9884\\u8BAD\\u7EC3\\u6A21\\u578B\\u8FDB\\u884C\\u5B9A\\u5236\\u5316\\u8C03\\u6574\\uFF0C\\u4F7F\\u5176\\u66F4\\u52A0\\u5951\\u5408\\u7279\\u5B9A\\u5E94\\u7528\\u573A\\u666F\\u7684\\u9700\\u6C42\\u3002LoRA\\u5FAE\\u8C03\\u901A\\u8FC7\\u5C06\\u6A21\\u578B\\u7684\\u90E8\\u5206\\u6743\\u91CD\\u77E9\\u9635\\u5206\\u89E3\\u4E3A\\u4E24\\u4E2A\\u4F4E\\u79E9\\u77E9\\u9635\\uFF0C\\u53EA\\u66F4\\u65B0\\u8FD9\\u4E24\\u4E2A\\u5C0F\\u77E9\\u9635\\u7684\\u53C2\\u6570\\u6765\\u5B9E\\u73B0\\u5FAE\\u8C03\\uFF0C\",(0,e.jsx)(n.strong,{children:\"\\u4ECE\\u800C\\u51CF\\u5C11\\u8BA1\\u7B97\\u8D44\\u6E90\\u548C\\u5185\\u5B58\\u5360\\u7528\"}),\"\\u3002\"]}),`\n`,(0,e.jsxs)(n.h2,{id:\"\\u5FAE\\u8C03\\u8BAD\\u7EC3\\u6570\\u636E\\u51C6\\u5907\",className:\"content-header\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#\\u5FAE\\u8C03\\u8BAD\\u7EC3\\u6570\\u636E\\u51C6\\u5907\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u5FAE\\u8C03\\u8BAD\\u7EC3\\u6570\\u636E\\u51C6\\u5907\"]}),`\n`,(0,e.jsxs)(n.h3,{id:\"\\u751F\\u6210\\u65B9\\u6CD5\",className:\"content-header\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#\\u751F\\u6210\\u65B9\\u6CD5\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u751F\\u6210\\u65B9\\u6CD5\"]}),`\n`,(0,e.jsx)(n.p,{children:\"(1) \\u63D0\\u53D6\\u5173\\u952E\\u5C5E\\u6027\\u4FE1\\u606F\\uFF0C\\u5BF9\\u4E1A\\u52A1\\u77E5\\u8BC6\\u63D0\\u53D6\\u5173\\u952E\\u5C5E\\u6027\\u53CA\\u5BF9\\u5E94\\u7684\\u4FE1\\u606F\\u3002\\u53EF\\u62BD\\u53D6\\u7684\\u5173\\u952E\\u5C5E\\u6027\\u4E3A\\uFF1A\"}),`\n`,(0,e.jsx)(n.pre,{className:\"language-js\",children:(0,e.jsxs)(n.code,{className:\"language-js code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\\u5957\\u9910\\u540D\\u79F0\\uFF1A\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\"names\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\\u5957\\u9910\\u4EF7\\u683C\\uFF1A\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\"money\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\\u5957\\u9910\\u6D41\\u91CF\\uFF1A\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),(0,e.jsx)(n.span,{className:\"token constant\",children:\"GB\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\\u53EF\\u901A\\u8BDD\\u65F6\\u957F\\uFF1A\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\"duration\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\\u5957\\u9910\\u4E0A\\u7EBF\\u5E74\\u4EFD\\uFF1A\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\"online_years\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,e.jsx)(n.p,{children:\"(2) \\u6784\\u5EFA\\u5E38\\u89C1\\u7684\\u7528\\u6237\\u95EE\\u9898\\u4E0Esql\\u547D\\u4EE4\\u8BED\\u6599\\u5BF9\\uFF0C\\u901A\\u8FC7\\u62BD\\u8C61\\u5316\\u7528\\u6237\\u53EF\\u80FD\\u63D0\\u95EE\\u7684\\u95EE\\u9898\\uFF0C\\u5E76\\u8FDB\\u884C\\u5BF9\\u5E94\\u7684\\u540C\\u4E49\\u8BCD\\u66FF\\u6362\\uFF0C\\u751F\\u6210\\u5927\\u91CF\\u8BAD\\u7EC3\\u6837\\u672C\"}),`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:\"\\u793A\\u4F8B1\"}),\"\\uFF1A\\u67E5\\u8BE2128\\u5143\\u7684\\u5957\\u9910\"]}),`\n`,(0,e.jsx)(n.pre,{className:\"language-sql\",children:(0,e.jsx)(n.code,{className:\"language-sql code-highlight\",children:(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"SELECT\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"*\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"FROM\"}),\" {table_name} \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"WHERE\"}),\" money \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" {money}\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]})})}),`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:\"\\u793A\\u4F8B2\"}),\"\\uFF1A\\u964D\\u6863\\u6D41\\u91CF\\u5957\\u9910\\u523060G\"]}),`\n`,(0,e.jsx)(n.pre,{className:\"language-sql\",children:(0,e.jsx)(n.code,{className:\"language-sql code-highlight\",children:(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"SELECT\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"*\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"FROM\"}),\" {table_name} \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"WHERE\"}),\" GB \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" {GB}\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]})})}),`\n`,(0,e.jsx)(n.p,{children:\"(3) \\u8BAD\\u7EC3\\u8BED\\u6599\\u5BF9\\u4FDD\\u5B58\\u4E3Ajson\\u683C\\u5F0F\"}),`\n`,(0,e.jsx)(n.pre,{className:\"language-json\",children:(0,e.jsxs)(n.code,{className:\"language-json code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"user\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),(0,e.jsx)(n.span,{className:\"token string\",children:'\"\\u5347\\u7EA7\\u523041GB\\u6D41\\u91CF\\u7684\\u5957\\u9910\\uFF0C\\u6709\\u4EC0\\u4E48\\u5EFA\\u8BAE\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"assistant\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),(0,e.jsx)(n.span,{className:\"token string\",children:'\"SELECT * FROM database WHERE GB = 41000;\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,e.jsxs)(n.h3,{id:\"\\u751F\\u6210\\u89C4\\u6A21\",className:\"content-header\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#\\u751F\\u6210\\u89C4\\u6A21\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u751F\\u6210\\u89C4\\u6A21\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"\\u5171\\u751F\\u6210\",(0,e.jsx)(n.strong,{children:\"15w\\u6761\\u8BED\\u6599\\u5BF9\"}),\"\\uFF0C\\u5305\\u62EC\\u6B63\\u5411\\u8BED\\u6599\\u548C\\u53CD\\u5411\\u8BED\\u6599\\uFF1A\"]}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:\"\\u6B63\\u5411\\u8BED\\u6599\"}),\"\\uFF08\\u7528\\u6237\\u8F93\\u5165\\u80FD\\u591F\\u751F\\u6210sql\\u547D\\u4EE4\\uFF09\\uFF1A\"]}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"\\u76F4\\u63A5\\u67E5\\u8BE2\\u7C7B\"}),\"\\uFF1A\\u7528\\u6237\\u76F4\\u63A5\\u8BE2\\u95EE\\u660E\\u786E\\u7684\\u5957\\u9910\\u540D\\u79F0\\u3001\\u4EF7\\u683C\\uFF0C\\u751F\\u6210\",(0,e.jsx)(n.strong,{children:\"5w\\u6761\\u6837\\u672C\"})]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"\\u6570\\u5B57\\u6BD4\\u8F83\\u7C7B\"}),\"\\uFF1A\\u7528\\u6237\\u5E0C\\u671B\\u627E\\u5230\\u66F4\\u4F18\\u60E0\\u3001\\u66F4\\u591A\\u6D41\\u91CF\\u7684\\u5957\\u9910\\uFF0C\\u751F\\u6210\",(0,e.jsx)(n.strong,{children:\"5w\\u6761\\u6837\\u672C\"})]}),`\n`]}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:\"\\u53CD\\u5411\\u8BED\\u6599\"}),\"\\uFF08\\u7528\\u6237\\u8F93\\u5165\\u65E0\\u6CD5\\u751F\\u6210sql\\u547D\\u4EE4\\uFF09\\uFF1A\\u751F\\u6210\",(0,e.jsx)(n.strong,{children:\"5w\\u6761\\u6837\\u672C\"})]}),`\n`]}),`\n`]}),`\n`,(0,e.jsxs)(n.h2,{id:\"\\u5FAE\\u8C03\\u8FC7\\u7A0B\",className:\"content-header\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#\\u5FAE\\u8C03\\u8FC7\\u7A0B\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u5FAE\\u8C03\\u8FC7\\u7A0B\"]}),`\n`,(0,e.jsxs)(n.ol,{children:[`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsxs)(n.p,{children:[\"\\u6240\\u9700\\u8D44\\u6E90\\uFF1A\",(0,e.jsx)(n.strong,{children:\"GPU\\uFF1ANVIDIA A100-SXM4-40GB x2\"}),\"\\uFF1B\",(0,e.jsx)(n.strong,{children:\"\\u5FAE\\u8C03\\u6A21\\u578B\\uFF1AQWen-7b-chat\"})]}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u5FAE\\u8C03\\u8FC7\\u7A0B\"}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"\\u8BAD\\u7EC3\\u65F6\\u957F\"}),\"\\uFF1A\\u5927\\u7EA63.75\\u5C0F\\u65F6\"]}),`\n`]}),`\n`]}),`\n`]}),`\n`,(0,e.jsxs)(n.p,{children:[\"\\u6211\\u4EEC\\u5BF9\\u5FAE\\u8C03\\u540E\\u7684\\u6A21\\u578B\\u8FDB\\u884C\\u6D4B\\u8BD5\\uFF0C\\u7528\\u6237\\u95EE\\u9898\\u4E0ESQL\\u8BED\\u53E5\\u7684\\u8F6C\\u6362\\u6B63\\u786E\\u7387\\u53EF\\u8FBE\",(0,e.jsx)(n.strong,{children:\"98.56%\"}),\"\\uFF0C\\u8FBE\\u5230\\u4E86\\u751F\\u4EA7\\u4E0A\\u7EBF\\u7684\\u6807\\u51C6\\u3002\\u5F53\\u6211\\u4EEC\\u5C06\\u5FAE\\u8C03\\u6A21\\u578B\\u90E8\\u7F72\\u540E\\uFF0C\\u56DE\\u7B54\\u7684\\u5957\\u9910\\u4FE1\\u606F\\u5DF2\\u660E\\u663E\\u6269\\u5145\\uFF0C\\u5E76\\u4E14\\u4ECE\\u7528\\u6237\\u89D2\\u5EA6\\u8003\\u8651\\u4E86\\u77ED\\u671F\\u548C\\u957F\\u671F\\u4E24\\u79CD\\u60C5\\u51B5\\uFF0C\\u5411\\u7528\\u6237\\u63D0\\u4F9B\\u4E86\\u66F4\\u5168\\u9762\\u3001\\u66F4\\u53EF\\u9760\\u7684\\u7B54\\u6848\\u3002\"]}),`\n`,(0,e.jsxs)(n.h2,{id:\"\\u672A\\u6765\\u5C55\\u671B\",className:\"content-header\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#\\u672A\\u6765\\u5C55\\u671B\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u672A\\u6765\\u5C55\\u671B\"]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u968F\\u7740\\u5927\\u6A21\\u578B\\u6280\\u672F\\u7684\\u65E5\\u65B0\\u6708\\u5F02\\uFF0CText2SQL\\u6280\\u672F\\u4E5F\\u5728\\u4EE5\\u60CA\\u4EBA\\u7684\\u901F\\u5EA6\\u4E0D\\u65AD\\u53D1\\u5C55\\u3002\\u76EE\\u524D\\u6240\\u91C7\\u7528\\u7684\\u4F18\\u5316\\u624B\\u6BB5\\uFF0C\\u867D\\u7136\\u5728\\u73B0\\u9636\\u6BB5\\u53EF\\u80FD\\u6709\\u6548\\uFF0C\\u4F46\\u968F\\u7740\\u5927\\u6A21\\u578B\\u80FD\\u529B\\u7684\\u6301\\u7EED\\u63D0\\u5347\\uFF0C\\u8FD9\\u4E9B\\u624B\\u6BB5\\u5F88\\u53EF\\u80FD\\u4F1A\\u9010\\u6E10\\u663E\\u5F97\\u8FC7\\u65F6\\u3002\"}),`\n`,(0,e.jsx)(n.p,{children:\"\\u4E00\\u65B9\\u9762\\uFF0C\\u6211\\u4EEC\\u4E0D\\u80FD\\u795E\\u8BDD\\u5927\\u578B\\u8BED\\u8A00\\u6A21\\u578B\\uFF08LLM\\uFF09\\u7684\\u80FD\\u529B\\uFF0C\\u7ED9\\u4E88\\u5176\\u8FC7\\u9AD8\\u7684\\u671F\\u671B\\u3002\\u53E6\\u4E00\\u65B9\\u9762\\uFF0C\\u6211\\u4EEC\\u4E5F\\u4E0D\\u80FD\\u56E0\\u9AD8\\u4F30\\u5DE5\\u7A0B\\u5B9E\\u73B0\\u7684\\u96BE\\u5EA6\\u800C\\u671B\\u800C\\u751F\\u754F\\u3002\\u53EA\\u6709\\u4E00\\u6B65\\u4E00\\u4E2A\\u811A\\u5370\\uFF0C\\u8E0F\\u8E0F\\u5B9E\\u5B9E\\u5730\\u89E3\\u51B3\\u5DE5\\u7A0B\\u5B9E\\u8DF5\\u4E2D\\u7684\\u6BCF\\u4E00\\u4E2A\\u95EE\\u9898\\uFF0C\\u624D\\u80FD\\u6700\\u7EC8\\u5C06Text2SQL\\u6280\\u672F\\u63A8\\u5411\\u6210\\u719F\\u7684\\u751F\\u4EA7\\u9636\\u6BB5\\u3002\"})]})}function h(a={}){let{wrapper:n}=a.components||{};return n?(0,e.jsx)(n,{...a,children:(0,e.jsx)(o,{...a})}):o(a)}return S(y);})();\n;return Component;"
        },
        "_id": "blog/text2sql-finetuning-practice.mdx",
        "_raw": {
          "sourceFilePath": "blog/text2sql-finetuning-practice.mdx",
          "sourceFileName": "text2sql-finetuning-practice.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/text2sql-finetuning-practice"
        },
        "type": "Blog",
        "readingTime": {
          "text": "8 min read",
          "minutes": 7.59,
          "time": 455400,
          "words": 1518
        },
        "slug": "text2sql-finetuning-practice",
        "path": "blog/text2sql-finetuning-practice",
        "toc": [
          {
            "value": "问题分析",
            "url": "#问题分析",
            "depth": 2
          },
          {
            "value": "Text2SQL大模型现存问题",
            "url": "#text2sql大模型现存问题",
            "depth": 3
          },
          {
            "value": "优化方法",
            "url": "#优化方法",
            "depth": 3
          },
          {
            "value": "微调训练数据准备",
            "url": "#微调训练数据准备",
            "depth": 2
          },
          {
            "value": "生成方法",
            "url": "#生成方法",
            "depth": 3
          },
          {
            "value": "生成规模",
            "url": "#生成规模",
            "depth": 3
          },
          {
            "value": "微调过程",
            "url": "#微调过程",
            "depth": 2
          },
          {
            "value": "未来展望",
            "url": "#未来展望",
            "depth": 2
          }
        ],
        "structuredData": {
          "@context": "https://schema.org",
          "@type": "BlogPosting",
          "headline": "江苏移动数智助手 Text2SQL 大模型微调实践",
          "datePublished": "2024-08-03T00:00:00.000Z",
          "dateModified": "2024-08-03T00:00:00.000Z",
          "description": "分享在数智助手项目中进行 Text2SQL 微调的实践经验，包括问题分析、训练数据准备、LoRA 微调过程及效果评估。",
          "url": "https://zhangjian94cn.github.io/blog/text2sql-finetuning-practice"
        }
      },
      "documentHash": "1770184124180",
      "hasWarnings": false,
      "documentTypeName": "Blog"
    },
    "blog/text2sql-lora-finetuning.mdx": {
      "document": {
        "title": "Text2SQL 大模型微调实战",
        "date": "2026-01-28T00:00:00.000Z",
        "tags": [
          "LLM",
          "Fine-tuning",
          "LoRA",
          "Text2SQL"
        ],
        "draft": false,
        "summary": "分享基于 LoRA 微调 Qwen-7B 实现自然语言转 SQL 的完整流程，准确率达到 98.56%。",
        "authors": [
          "default"
        ],
        "body": {
          "raw": "\n## 项目背景\n\n在企业数据分析场景中，非技术人员往往需要通过 SQL 查询数据库。Text2SQL 技术可以让用户用自然语言描述需求，自动生成对应的 SQL 语句。\n\n## 技术方案\n\n### 模型选择\n\n选择 Qwen-7B 作为基础模型，原因：\n\n- 中文理解能力强\n- 参数量适中，可在单卡 A100 上微调\n- 社区活跃，资料丰富\n\n### LoRA 微调\n\n使用 LoRA (Low-Rank Adaptation) 进行高效微调：\n\n```python\nfrom peft import LoraConfig, get_peft_model\n\nlora_config = LoraConfig(\n    r=16,\n    lora_alpha=32,\n    target_modules=[\"q_proj\", \"v_proj\"],\n    lora_dropout=0.05,\n    bias=\"none\",\n    task_type=\"CAUSAL_LM\"\n)\n\nmodel = get_peft_model(base_model, lora_config)\n```\n\n### 数据集构建\n\n基于 Spider 和 WikiSQL 数据集，构建了 10 万条中英文混合样本：\n\n| 数据集   | 样本数 | 表数量 |\n| -------- | ------ | ------ |\n| Spider   | 7000   | 200    |\n| WikiSQL  | 80000  | 26000  |\n| 自建数据 | 13000  | 150    |\n\n## 实验结果\n\n在测试集上的准确率：\n\n- **执行准确率**: 98.56%\n- **精确匹配率**: 87.3%\n- **推理速度**: 50ms/query\n\n## 总结\n\n通过 LoRA 微调可以在有限资源下获得优秀效果。下一步计划探索多轮对话场景下的 SQL 生成。\n",
          "code": "var Component=(()=>{var p=Object.create;var s=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var N=Object.getOwnPropertyNames;var u=Object.getPrototypeOf,k=Object.prototype.hasOwnProperty;var g=(a,n)=>()=>(n||a((n={exports:{}}).exports,n),n.exports),f=(a,n)=>{for(var c in n)s(a,c,{get:n[c],enumerable:!0})},r=(a,n,c,i)=>{if(n&&typeof n==\"object\"||typeof n==\"function\")for(let l of N(n))!k.call(a,l)&&l!==c&&s(a,l,{get:()=>n[l],enumerable:!(i=m(n,l))||i.enumerable});return a};var L=(a,n,c)=>(c=a!=null?p(u(a)):{},r(n||!a||!a.__esModule?s(c,\"default\",{value:a,enumerable:!0}):c,a)),_=a=>r(s({},\"__esModule\",{value:!0}),a);var d=g((y,t)=>{t.exports=_jsx_runtime});var b={};f(b,{default:()=>h,frontmatter:()=>x});var e=L(d()),x={title:\"Text2SQL \\u5927\\u6A21\\u578B\\u5FAE\\u8C03\\u5B9E\\u6218\",date:\"2026-01-28\",tags:[\"LLM\",\"Fine-tuning\",\"LoRA\",\"Text2SQL\"],draft:!1,summary:\"\\u5206\\u4EAB\\u57FA\\u4E8E LoRA \\u5FAE\\u8C03 Qwen-7B \\u5B9E\\u73B0\\u81EA\\u7136\\u8BED\\u8A00\\u8F6C SQL \\u7684\\u5B8C\\u6574\\u6D41\\u7A0B\\uFF0C\\u51C6\\u786E\\u7387\\u8FBE\\u5230 98.56%\\u3002\",authors:[\"default\"]};function o(a){let n={a:\"a\",code:\"code\",h2:\"h2\",h3:\"h3\",li:\"li\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",table:\"table\",tbody:\"tbody\",td:\"td\",th:\"th\",thead:\"thead\",tr:\"tr\",ul:\"ul\",...a.components};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(n.h2,{id:\"\\u9879\\u76EE\\u80CC\\u666F\",className:\"content-header\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#\\u9879\\u76EE\\u80CC\\u666F\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u9879\\u76EE\\u80CC\\u666F\"]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u5728\\u4F01\\u4E1A\\u6570\\u636E\\u5206\\u6790\\u573A\\u666F\\u4E2D\\uFF0C\\u975E\\u6280\\u672F\\u4EBA\\u5458\\u5F80\\u5F80\\u9700\\u8981\\u901A\\u8FC7 SQL \\u67E5\\u8BE2\\u6570\\u636E\\u5E93\\u3002Text2SQL \\u6280\\u672F\\u53EF\\u4EE5\\u8BA9\\u7528\\u6237\\u7528\\u81EA\\u7136\\u8BED\\u8A00\\u63CF\\u8FF0\\u9700\\u6C42\\uFF0C\\u81EA\\u52A8\\u751F\\u6210\\u5BF9\\u5E94\\u7684 SQL \\u8BED\\u53E5\\u3002\"}),`\n`,(0,e.jsxs)(n.h2,{id:\"\\u6280\\u672F\\u65B9\\u6848\",className:\"content-header\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#\\u6280\\u672F\\u65B9\\u6848\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u6280\\u672F\\u65B9\\u6848\"]}),`\n`,(0,e.jsxs)(n.h3,{id:\"\\u6A21\\u578B\\u9009\\u62E9\",className:\"content-header\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#\\u6A21\\u578B\\u9009\\u62E9\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u6A21\\u578B\\u9009\\u62E9\"]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u9009\\u62E9 Qwen-7B \\u4F5C\\u4E3A\\u57FA\\u7840\\u6A21\\u578B\\uFF0C\\u539F\\u56E0\\uFF1A\"}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:\"\\u4E2D\\u6587\\u7406\\u89E3\\u80FD\\u529B\\u5F3A\"}),`\n`,(0,e.jsx)(n.li,{children:\"\\u53C2\\u6570\\u91CF\\u9002\\u4E2D\\uFF0C\\u53EF\\u5728\\u5355\\u5361 A100 \\u4E0A\\u5FAE\\u8C03\"}),`\n`,(0,e.jsx)(n.li,{children:\"\\u793E\\u533A\\u6D3B\\u8DC3\\uFF0C\\u8D44\\u6599\\u4E30\\u5BCC\"}),`\n`]}),`\n`,(0,e.jsxs)(n.h3,{id:\"lora-\\u5FAE\\u8C03\",className:\"content-header\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#lora-\\u5FAE\\u8C03\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"LoRA \\u5FAE\\u8C03\"]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u4F7F\\u7528 LoRA (Low-Rank Adaptation) \\u8FDB\\u884C\\u9AD8\\u6548\\u5FAE\\u8C03\\uFF1A\"}),`\n`,(0,e.jsx)(n.pre,{className:\"language-python\",children:(0,e.jsxs)(n.code,{className:\"language-python code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"from\"}),\" peft \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"import\"}),\" LoraConfig\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),` get_peft_model\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"lora_config \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" LoraConfig\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    r\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"16\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    lora_alpha\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"32\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    target_modules\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token string\",children:'\"q_proj\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"v_proj\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    lora_dropout\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"0.05\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    bias\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:'\"none\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    task_type\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:'\"CAUSAL_LM\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"model \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" get_peft_model\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"base_model\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" lora_config\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]})]})}),`\n`,(0,e.jsxs)(n.h3,{id:\"\\u6570\\u636E\\u96C6\\u6784\\u5EFA\",className:\"content-header\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#\\u6570\\u636E\\u96C6\\u6784\\u5EFA\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u6570\\u636E\\u96C6\\u6784\\u5EFA\"]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u57FA\\u4E8E Spider \\u548C WikiSQL \\u6570\\u636E\\u96C6\\uFF0C\\u6784\\u5EFA\\u4E86 10 \\u4E07\\u6761\\u4E2D\\u82F1\\u6587\\u6DF7\\u5408\\u6837\\u672C\\uFF1A\"}),`\n`,(0,e.jsxs)(n.table,{children:[(0,e.jsx)(n.thead,{children:(0,e.jsxs)(n.tr,{children:[(0,e.jsx)(n.th,{children:\"\\u6570\\u636E\\u96C6\"}),(0,e.jsx)(n.th,{children:\"\\u6837\\u672C\\u6570\"}),(0,e.jsx)(n.th,{children:\"\\u8868\\u6570\\u91CF\"})]})}),(0,e.jsxs)(n.tbody,{children:[(0,e.jsxs)(n.tr,{children:[(0,e.jsx)(n.td,{children:\"Spider\"}),(0,e.jsx)(n.td,{children:\"7000\"}),(0,e.jsx)(n.td,{children:\"200\"})]}),(0,e.jsxs)(n.tr,{children:[(0,e.jsx)(n.td,{children:\"WikiSQL\"}),(0,e.jsx)(n.td,{children:\"80000\"}),(0,e.jsx)(n.td,{children:\"26000\"})]}),(0,e.jsxs)(n.tr,{children:[(0,e.jsx)(n.td,{children:\"\\u81EA\\u5EFA\\u6570\\u636E\"}),(0,e.jsx)(n.td,{children:\"13000\"}),(0,e.jsx)(n.td,{children:\"150\"})]})]})]}),`\n`,(0,e.jsxs)(n.h2,{id:\"\\u5B9E\\u9A8C\\u7ED3\\u679C\",className:\"content-header\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#\\u5B9E\\u9A8C\\u7ED3\\u679C\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u5B9E\\u9A8C\\u7ED3\\u679C\"]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u5728\\u6D4B\\u8BD5\\u96C6\\u4E0A\\u7684\\u51C6\\u786E\\u7387\\uFF1A\"}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"\\u6267\\u884C\\u51C6\\u786E\\u7387\"}),\": 98.56%\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"\\u7CBE\\u786E\\u5339\\u914D\\u7387\"}),\": 87.3%\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"\\u63A8\\u7406\\u901F\\u5EA6\"}),\": 50ms/query\"]}),`\n`]}),`\n`,(0,e.jsxs)(n.h2,{id:\"\\u603B\\u7ED3\",className:\"content-header\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#\\u603B\\u7ED3\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u603B\\u7ED3\"]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u901A\\u8FC7 LoRA \\u5FAE\\u8C03\\u53EF\\u4EE5\\u5728\\u6709\\u9650\\u8D44\\u6E90\\u4E0B\\u83B7\\u5F97\\u4F18\\u79C0\\u6548\\u679C\\u3002\\u4E0B\\u4E00\\u6B65\\u8BA1\\u5212\\u63A2\\u7D22\\u591A\\u8F6E\\u5BF9\\u8BDD\\u573A\\u666F\\u4E0B\\u7684 SQL \\u751F\\u6210\\u3002\"})]})}function h(a={}){let{wrapper:n}=a.components||{};return n?(0,e.jsx)(n,{...a,children:(0,e.jsx)(o,{...a})}):o(a)}return _(b);})();\n;return Component;"
        },
        "_id": "blog/text2sql-lora-finetuning.mdx",
        "_raw": {
          "sourceFilePath": "blog/text2sql-lora-finetuning.mdx",
          "sourceFileName": "text2sql-lora-finetuning.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/text2sql-lora-finetuning"
        },
        "type": "Blog",
        "readingTime": {
          "text": "2 min read",
          "minutes": 1.375,
          "time": 82500,
          "words": 275
        },
        "slug": "text2sql-lora-finetuning",
        "path": "blog/text2sql-lora-finetuning",
        "toc": [
          {
            "value": "项目背景",
            "url": "#项目背景",
            "depth": 2
          },
          {
            "value": "技术方案",
            "url": "#技术方案",
            "depth": 2
          },
          {
            "value": "模型选择",
            "url": "#模型选择",
            "depth": 3
          },
          {
            "value": "LoRA 微调",
            "url": "#lora-微调",
            "depth": 3
          },
          {
            "value": "数据集构建",
            "url": "#数据集构建",
            "depth": 3
          },
          {
            "value": "实验结果",
            "url": "#实验结果",
            "depth": 2
          },
          {
            "value": "总结",
            "url": "#总结",
            "depth": 2
          }
        ],
        "structuredData": {
          "@context": "https://schema.org",
          "@type": "BlogPosting",
          "headline": "Text2SQL 大模型微调实战",
          "datePublished": "2026-01-28T00:00:00.000Z",
          "dateModified": "2026-01-28T00:00:00.000Z",
          "description": "分享基于 LoRA 微调 Qwen-7B 实现自然语言转 SQL 的完整流程，准确率达到 98.56%。",
          "url": "https://zhangjian94cn.github.io/blog/text2sql-lora-finetuning"
        }
      },
      "documentHash": "1769918031645",
      "hasWarnings": false,
      "documentTypeName": "Blog"
    },
    "blog/welcome.mdx": {
      "document": {
        "title": "欢迎来到我的博客",
        "date": "2026-02-01T00:00:00.000Z",
        "tags": [
          "公告",
          "博客"
        ],
        "draft": false,
        "summary": "个人博客正式上线！这里将分享 AI 技术探索、学习笔记与生活思考。",
        "authors": [
          "default"
        ],
        "body": {
          "raw": "\n## 👋 你好，欢迎来到我的博客！\n\n这是我的个人网站，在这里我会分享：\n\n- **AI 技术实践**：大语言模型、RAG、Text2SQL 等实战经验\n- **学习笔记**：计算机视觉、高性能计算、算法优化\n- **生活思考**：工作方法论、个人成长\n\n## 为什么要写博客？\n\n写作是最好的学习方式之一。通过将所学整理成文字，可以：\n\n1. 加深对知识的理解\n2. 建立个人知识库\n3. 与社区交流分享\n\n## 技术栈\n\n这个博客使用以下技术构建：\n\n- **框架**: Next.js 16 + React 19\n- **样式**: Tailwind CSS 4\n- **内容**: Contentlayer + MDX\n- **部署**: 支持 GitHub Pages / 自托管\n\n欢迎关注，一起交流学习！\n",
          "code": "var Component=(()=>{var u=Object.create;var t=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var p=Object.getOwnPropertyNames;var x=Object.getPrototypeOf,g=Object.prototype.hasOwnProperty;var f=(r,n)=>()=>(n||r((n={exports:{}}).exports,n),n.exports),N=(r,n)=>{for(var i in n)t(r,i,{get:n[i],enumerable:!0})},a=(r,n,i,c)=>{if(n&&typeof n==\"object\"||typeof n==\"function\")for(let l of p(n))!g.call(r,l)&&l!==i&&t(r,l,{get:()=>n[l],enumerable:!(c=m(n,l))||c.enumerable});return r};var _=(r,n,i)=>(i=r!=null?u(x(r)):{},a(n||!r||!r.__esModule?t(i,\"default\",{value:r,enumerable:!0}):i,r)),j=r=>a(t({},\"__esModule\",{value:!0}),r);var h=f((M,d)=>{d.exports=_jsx_runtime});var b={};N(b,{default:()=>o,frontmatter:()=>I});var e=_(h()),I={title:\"\\u6B22\\u8FCE\\u6765\\u5230\\u6211\\u7684\\u535A\\u5BA2\",date:\"2026-02-01\",tags:[\"\\u516C\\u544A\",\"\\u535A\\u5BA2\"],draft:!1,summary:\"\\u4E2A\\u4EBA\\u535A\\u5BA2\\u6B63\\u5F0F\\u4E0A\\u7EBF\\uFF01\\u8FD9\\u91CC\\u5C06\\u5206\\u4EAB AI \\u6280\\u672F\\u63A2\\u7D22\\u3001\\u5B66\\u4E60\\u7B14\\u8BB0\\u4E0E\\u751F\\u6D3B\\u601D\\u8003\\u3002\",authors:[\"default\"]};function s(r){let n={a:\"a\",h2:\"h2\",li:\"li\",ol:\"ol\",p:\"p\",span:\"span\",strong:\"strong\",ul:\"ul\",...r.components};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(n.h2,{id:\"-\\u4F60\\u597D\\u6B22\\u8FCE\\u6765\\u5230\\u6211\\u7684\\u535A\\u5BA2\",className:\"content-header\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#-\\u4F60\\u597D\\u6B22\\u8FCE\\u6765\\u5230\\u6211\\u7684\\u535A\\u5BA2\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u{1F44B} \\u4F60\\u597D\\uFF0C\\u6B22\\u8FCE\\u6765\\u5230\\u6211\\u7684\\u535A\\u5BA2\\uFF01\"]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u8FD9\\u662F\\u6211\\u7684\\u4E2A\\u4EBA\\u7F51\\u7AD9\\uFF0C\\u5728\\u8FD9\\u91CC\\u6211\\u4F1A\\u5206\\u4EAB\\uFF1A\"}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"AI \\u6280\\u672F\\u5B9E\\u8DF5\"}),\"\\uFF1A\\u5927\\u8BED\\u8A00\\u6A21\\u578B\\u3001RAG\\u3001Text2SQL \\u7B49\\u5B9E\\u6218\\u7ECF\\u9A8C\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"\\u5B66\\u4E60\\u7B14\\u8BB0\"}),\"\\uFF1A\\u8BA1\\u7B97\\u673A\\u89C6\\u89C9\\u3001\\u9AD8\\u6027\\u80FD\\u8BA1\\u7B97\\u3001\\u7B97\\u6CD5\\u4F18\\u5316\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"\\u751F\\u6D3B\\u601D\\u8003\"}),\"\\uFF1A\\u5DE5\\u4F5C\\u65B9\\u6CD5\\u8BBA\\u3001\\u4E2A\\u4EBA\\u6210\\u957F\"]}),`\n`]}),`\n`,(0,e.jsxs)(n.h2,{id:\"\\u4E3A\\u4EC0\\u4E48\\u8981\\u5199\\u535A\\u5BA2\",className:\"content-header\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#\\u4E3A\\u4EC0\\u4E48\\u8981\\u5199\\u535A\\u5BA2\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u4E3A\\u4EC0\\u4E48\\u8981\\u5199\\u535A\\u5BA2\\uFF1F\"]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u5199\\u4F5C\\u662F\\u6700\\u597D\\u7684\\u5B66\\u4E60\\u65B9\\u5F0F\\u4E4B\\u4E00\\u3002\\u901A\\u8FC7\\u5C06\\u6240\\u5B66\\u6574\\u7406\\u6210\\u6587\\u5B57\\uFF0C\\u53EF\\u4EE5\\uFF1A\"}),`\n`,(0,e.jsxs)(n.ol,{children:[`\n`,(0,e.jsx)(n.li,{children:\"\\u52A0\\u6DF1\\u5BF9\\u77E5\\u8BC6\\u7684\\u7406\\u89E3\"}),`\n`,(0,e.jsx)(n.li,{children:\"\\u5EFA\\u7ACB\\u4E2A\\u4EBA\\u77E5\\u8BC6\\u5E93\"}),`\n`,(0,e.jsx)(n.li,{children:\"\\u4E0E\\u793E\\u533A\\u4EA4\\u6D41\\u5206\\u4EAB\"}),`\n`]}),`\n`,(0,e.jsxs)(n.h2,{id:\"\\u6280\\u672F\\u6808\",className:\"content-header\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#\\u6280\\u672F\\u6808\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u6280\\u672F\\u6808\"]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u8FD9\\u4E2A\\u535A\\u5BA2\\u4F7F\\u7528\\u4EE5\\u4E0B\\u6280\\u672F\\u6784\\u5EFA\\uFF1A\"}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"\\u6846\\u67B6\"}),\": Next.js 16 + React 19\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"\\u6837\\u5F0F\"}),\": Tailwind CSS 4\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"\\u5185\\u5BB9\"}),\": Contentlayer + MDX\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"\\u90E8\\u7F72\"}),\": \\u652F\\u6301 GitHub Pages / \\u81EA\\u6258\\u7BA1\"]}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u6B22\\u8FCE\\u5173\\u6CE8\\uFF0C\\u4E00\\u8D77\\u4EA4\\u6D41\\u5B66\\u4E60\\uFF01\"})]})}function o(r={}){let{wrapper:n}=r.components||{};return n?(0,e.jsx)(n,{...r,children:(0,e.jsx)(s,{...r})}):s(r)}return j(b);})();\n;return Component;"
        },
        "_id": "blog/welcome.mdx",
        "_raw": {
          "sourceFilePath": "blog/welcome.mdx",
          "sourceFileName": "welcome.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/welcome"
        },
        "type": "Blog",
        "readingTime": {
          "text": "1 min read",
          "minutes": 0.94,
          "time": 56400,
          "words": 188
        },
        "slug": "welcome",
        "path": "blog/welcome",
        "toc": [
          {
            "value": "👋 你好，欢迎来到我的博客！",
            "url": "#-你好欢迎来到我的博客",
            "depth": 2
          },
          {
            "value": "为什么要写博客？",
            "url": "#为什么要写博客",
            "depth": 2
          },
          {
            "value": "技术栈",
            "url": "#技术栈",
            "depth": 2
          }
        ],
        "structuredData": {
          "@context": "https://schema.org",
          "@type": "BlogPosting",
          "headline": "欢迎来到我的博客",
          "datePublished": "2026-02-01T00:00:00.000Z",
          "dateModified": "2026-02-01T00:00:00.000Z",
          "description": "个人博客正式上线！这里将分享 AI 技术探索、学习笔记与生活思考。",
          "url": "https://zhangjian94cn.github.io/blog/welcome"
        }
      },
      "documentHash": "1769915977233",
      "hasWarnings": false,
      "documentTypeName": "Blog"
    }
  }
}
